(()=>{var In=Object.create;var Ce=Object.defineProperty,Rn=Object.defineProperties,Bn=Object.getOwnPropertyDescriptor,An=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertyNames,qt=Object.getOwnPropertySymbols,Un=Object.getPrototypeOf,Zt=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable;var Jt=(r,e,o)=>e in r?Ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,jt=(r,e)=>{for(var o in e||(e={}))Zt.call(e,o)&&Jt(r,o,e[o]);if(qt)for(var o of qt(e))Dn.call(e,o)&&Jt(r,o,e[o]);return r},er=(r,e)=>Rn(r,An(e)),Hn=r=>Ce(r,"__esModule",{value:!0});var be=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var kn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var On=(r,e,o,f)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Nn(e))!Zt.call(r,l)&&(o||l!=="default")&&Ce(r,l,{get:()=>e[l],enumerable:!(f=Bn(e,l))||f.enumerable});return r},Fn=(r,e)=>On(Hn(Ce(r!=null?In(Un(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var ar=kn((or,Ye)=>{(function(r){if(typeof or=="object"&&typeof Ye<"u")Ye.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,o;return function f(l,x,y){function _(H,z){if(!x[H]){if(!l[H]){var g=typeof be=="function"&&be;if(!z&&g)return g(H,!0);if(P)return P(H,!0);var C=new Error("Cannot find module '"+H+"'");throw C.code="MODULE_NOT_FOUND",C}var O=x[H]={exports:{}};l[H][0].call(O.exports,function($){var J=l[H][1][$];return _(J||$)},O,O.exports,f,l,x,y)}return x[H].exports}for(var P=typeof be=="function"&&be,D=0;D<y.length;D++)_(y[D]);return _}({1:[function(f,l,x){(function(y){"use strict";var _=y.MutationObserver||y.WebKitMutationObserver,P;if(_){var D=0,H=new _($),z=y.document.createTextNode("");H.observe(z,{characterData:!0}),P=function(){z.data=D=++D%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var g=new y.MessageChannel;g.port1.onmessage=$,P=function(){g.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?P=function(){var X=y.document.createElement("script");X.onreadystatechange=function(){$(),X.onreadystatechange=null,X.parentNode.removeChild(X),X=null},y.document.documentElement.appendChild(X)}:P=function(){setTimeout($,0)};var C,O=[];function $(){C=!0;for(var X,ee,G=O.length;G;){for(ee=O,O=[],X=-1;++X<G;)ee[X]();G=O.length}C=!1}l.exports=J;function J(X){O.push(X)===1&&!C&&P()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,l,x){"use strict";var y=f(1);function _(){}var P={},D=["REJECTED"],H=["FULFILLED"],z=["PENDING"];l.exports=g;function g(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,v!==_&&J(this,v)}g.prototype.catch=function(v){return this.then(null,v)},g.prototype.then=function(v,R){if(typeof v!="function"&&this.state===H||typeof R!="function"&&this.state===D)return this;var S=new this.constructor(_);if(this.state!==z){var N=this.state===H?v:R;O(S,N,this.outcome)}else this.queue.push(new C(S,v,R));return S};function C(v,R,S){this.promise=v,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}C.prototype.callFulfilled=function(v){P.resolve(this.promise,v)},C.prototype.otherCallFulfilled=function(v){O(this.promise,this.onFulfilled,v)},C.prototype.callRejected=function(v){P.reject(this.promise,v)},C.prototype.otherCallRejected=function(v){O(this.promise,this.onRejected,v)};function O(v,R,S){y(function(){var N;try{N=R(S)}catch(V){return P.reject(v,V)}N===v?P.reject(v,new TypeError("Cannot resolve promise with itself")):P.resolve(v,N)})}P.resolve=function(v,R){var S=X($,R);if(S.status==="error")return P.reject(v,S.value);var N=S.value;if(N)J(v,N);else{v.state=H,v.outcome=R;for(var V=-1,Y=v.queue.length;++V<Y;)v.queue[V].callFulfilled(R)}return v},P.reject=function(v,R){v.state=D,v.outcome=R;for(var S=-1,N=v.queue.length;++S<N;)v.queue[S].callRejected(R);return v};function $(v){var R=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof R=="function")return function(){R.apply(v,arguments)}}function J(v,R){var S=!1;function N(Q){S||(S=!0,P.reject(v,Q))}function V(Q){S||(S=!0,P.resolve(v,Q))}function Y(){R(V,N)}var K=X(Y);K.status==="error"&&N(K.value)}function X(v,R){var S={};try{S.value=v(R),S.status="success"}catch(N){S.status="error",S.value=N}return S}g.resolve=ee;function ee(v){return v instanceof this?v:P.resolve(new this(_),v)}g.reject=G;function G(v){var R=new this(_);return P.reject(R,v)}g.all=Ne;function Ne(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,N=!1;if(!S)return this.resolve([]);for(var V=new Array(S),Y=0,K=-1,Q=new this(_);++K<S;)te(v[K],K);return Q;function te(pe,Pe){R.resolve(pe).then(Ue,function(se){N||(N=!0,P.reject(Q,se))});function Ue(se){V[Pe]=se,++Y===S&&!N&&(N=!0,P.resolve(Q,V))}}}g.race=ie;function ie(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,N=!1;if(!S)return this.resolve([]);for(var V=-1,Y=new this(_);++V<S;)K(v[V]);return Y;function K(Q){R.resolve(Q).then(function(te){N||(N=!0,P.resolve(Y,te))},function(te){N||(N=!0,P.reject(Y,te))})}}},{"1":1}],3:[function(f,l,x){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=f(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(f,l,x){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function P(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(t){return}}var D=P();function H(){try{if(!D||!D.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(n){return!1}}function z(t,a){t=t||[],a=a||{};try{return new Blob(t,a)}catch(i){if(i.name!=="TypeError")throw i;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,s=new n,c=0;c<t.length;c+=1)s.append(t[c]);return s.getBlob(a.type)}}typeof Promise>"u"&&f(3);var g=Promise;function C(t,a){a&&t.then(function(n){a(null,n)},function(n){a(n)})}function O(t,a,n){typeof a=="function"&&t.then(a),typeof n=="function"&&t.catch(n)}function $(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function J(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var X="local-forage-detect-blob-support",ee=void 0,G={},Ne=Object.prototype.toString,ie="readonly",v="readwrite";function R(t){for(var a=t.length,n=new ArrayBuffer(a),s=new Uint8Array(n),c=0;c<a;c++)s[c]=t.charCodeAt(c);return n}function S(t){return new g(function(a){var n=t.transaction(X,v),s=z([""]);n.objectStore(X).put(s,"key"),n.onabort=function(c){c.preventDefault(),c.stopPropagation(),a(!1)},n.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);a(i||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function N(t){return typeof ee=="boolean"?g.resolve(ee):S(t).then(function(a){return ee=a,ee})}function V(t){var a=G[t.name],n={};n.promise=new g(function(s,c){n.resolve=s,n.reject=c}),a.deferredOperations.push(n),a.dbReady?a.dbReady=a.dbReady.then(function(){return n.promise}):a.dbReady=n.promise}function Y(t){var a=G[t.name],n=a.deferredOperations.pop();if(n)return n.resolve(),n.promise}function K(t,a){var n=G[t.name],s=n.deferredOperations.pop();if(s)return s.reject(a),s.promise}function Q(t,a){return new g(function(n,s){if(G[t.name]=G[t.name]||It(),t.db)if(a)V(t),t.db.close();else return n(t.db);var c=[t.name];a&&c.push(t.version);var i=D.open.apply(D,c);a&&(i.onupgradeneeded=function(u){var m=i.result;try{m.createObjectStore(t.storeName),u.oldVersion<=1&&m.createObjectStore(X)}catch(d){if(d.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw d}}),i.onerror=function(u){u.preventDefault(),s(i.error)},i.onsuccess=function(){var u=i.result;u.onversionchange=function(m){m.target.close()},n(u),Y(t)}})}function te(t){return Q(t,!1)}function pe(t){return Q(t,!0)}function Pe(t,a){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),s=t.version<t.db.version,c=t.version>t.db.version;if(s&&(t.version!==a&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),c||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function Ue(t){return new g(function(a,n){var s=new FileReader;s.onerror=n,s.onloadend=function(c){var i=btoa(c.target.result||"");a({__local_forage_encoded_blob:!0,data:i,type:t.type})},s.readAsBinaryString(t)})}function se(t){var a=R(atob(t.data));return z([a],{type:t.type})}function _t(t){return t&&t.__local_forage_encoded_blob}function Ir(t){var a=this,n=a._initReady().then(function(){var s=G[a._dbInfo.name];if(s&&s.dbReady)return s.dbReady});return O(n,t,t),n}function Rr(t){V(t);for(var a=G[t.name],n=a.forages,s=0;s<n.length;s++){var c=n[s];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return t.db=null,te(t).then(function(i){return t.db=i,Pe(t)?pe(t):i}).then(function(i){t.db=a.db=i;for(var u=0;u<n.length;u++)n[u]._dbInfo.db=i}).catch(function(i){throw K(t,i),i})}function re(t,a,n,s){s===void 0&&(s=1);try{var c=t.db.transaction(t.storeName,a);n(null,c)}catch(i){if(s>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError"))return g.resolve().then(function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),pe(t)}).then(function(){return Rr(t).then(function(){re(t,a,n,s-1)})}).catch(n);n(i)}}function It(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Br(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=t[s];var c=G[n.name];c||(c=It(),G[n.name]=c),c.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=Ir);var i=[];function u(){return g.resolve()}for(var m=0;m<c.forages.length;m++){var d=c.forages[m];d!==a&&i.push(d._initReady().catch(u))}var p=c.forages.slice(0);return g.all(i).then(function(){return n.db=c.db,te(n)}).then(function(h){return n.db=h,Pe(n,a._defaultConfig.version)?pe(n):h}).then(function(h){n.db=c.db=h,a._dbInfo=n;for(var E=0;E<p.length;E++){var M=p[E];M!==a&&(M._dbInfo.db=n.db,M._dbInfo.version=n.version)}})}function Ar(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.get(t);p.onsuccess=function(){var h=p.result;h===void 0&&(h=null),_t(h)&&(h=se(h)),c(h)},p.onerror=function(){i(p.error)}}catch(h){i(h)}})}).catch(i)});return C(s,a),s}function Nr(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.openCursor(),h=1;p.onsuccess=function(){var E=p.result;if(E){var M=E.value;_t(M)&&(M=se(M));var B=t(M,E.key,h++);B!==void 0?c(B):E.continue()}else c()},p.onerror=function(){i(p.error)}}catch(E){i(E)}})}).catch(i)});return C(s,a),s}function Ur(t,a,n){var s=this;t=$(t);var c=new g(function(i,u){var m;s.ready().then(function(){return m=s._dbInfo,Ne.call(a)==="[object Blob]"?N(m.db).then(function(d){return d?a:Ue(a)}):a}).then(function(d){re(s._dbInfo,v,function(p,h){if(p)return u(p);try{var E=h.objectStore(s._dbInfo.storeName);d===null&&(d=void 0);var M=E.put(d,t);h.oncomplete=function(){d===void 0&&(d=null),i(d)},h.onabort=h.onerror=function(){var B=M.error?M.error:M.transaction.error;u(B)}}catch(B){u(B)}})}).catch(u)});return C(c,n),c}function Dr(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,v,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.delete(t);m.oncomplete=function(){c()},m.onerror=function(){i(p.error)},m.onabort=function(){var h=p.error?p.error:p.transaction.error;i(h)}}catch(h){i(h)}})}).catch(i)});return C(s,a),s}function Hr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,v,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.clear();u.oncomplete=function(){s()},u.onabort=u.onerror=function(){var p=d.error?d.error:d.transaction.error;c(p)}}catch(p){c(p)}})}).catch(c)});return C(n,t),n}function kr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.count();d.onsuccess=function(){s(d.result)},d.onerror=function(){c(d.error)}}catch(p){c(p)}})}).catch(c)});return C(n,t),n}function Or(t,a){var n=this,s=new g(function(c,i){if(t<0){c(null);return}n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=!1,h=d.openKeyCursor();h.onsuccess=function(){var E=h.result;if(!E){c(null);return}t===0||p?c(E.key):(p=!0,E.advance(t))},h.onerror=function(){i(h.error)}}catch(E){i(E)}})}).catch(i)});return C(s,a),s}function Fr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.openKeyCursor(),p=[];d.onsuccess=function(){var h=d.result;if(!h){s(p);return}p.push(h.key),h.continue()},d.onerror=function(){c(d.error)}}catch(h){c(h)}})}).catch(c)});return C(n,t),n}function $r(t,a){a=J.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;if(!t.name)c=g.reject("Invalid arguments");else{var i=t.name===n.name&&s._dbInfo.db,u=i?g.resolve(s._dbInfo.db):te(t).then(function(m){var d=G[t.name],p=d.forages;d.db=m;for(var h=0;h<p.length;h++)p[h]._dbInfo.db=m;return m});t.storeName?c=u.then(function(m){if(!!m.objectStoreNames.contains(t.storeName)){var d=m.version+1;V(t);var p=G[t.name],h=p.forages;m.close();for(var E=0;E<h.length;E++){var M=h[E];M._dbInfo.db=null,M._dbInfo.version=d}var B=new g(function(A,F){var k=D.open(t.name,d);k.onerror=function(q){var ve=k.result;ve.close(),F(q)},k.onupgradeneeded=function(){var q=k.result;q.deleteObjectStore(t.storeName)},k.onsuccess=function(){var q=k.result;q.close(),A(q)}});return B.then(function(A){p.db=A;for(var F=0;F<h.length;F++){var k=h[F];k._dbInfo.db=A,Y(k._dbInfo)}}).catch(function(A){throw(K(t,A)||g.resolve()).catch(function(){}),A})}}):c=u.then(function(m){V(t);var d=G[t.name],p=d.forages;m.close();for(var h=0;h<p.length;h++){var E=p[h];E._dbInfo.db=null}var M=new g(function(B,A){var F=D.deleteDatabase(t.name);F.onerror=function(){var k=F.result;k&&k.close(),A(F.error)},F.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},F.onsuccess=function(){var k=F.result;k&&k.close(),B(k)}});return M.then(function(B){d.db=B;for(var A=0;A<p.length;A++){var F=p[A];Y(F._dbInfo)}}).catch(function(B){throw(K(t,B)||g.resolve()).catch(function(){}),B})})}return C(c,a),c}var Xr={_driver:"asyncStorage",_initStorage:Br,_support:H(),iterate:Nr,getItem:Ar,setItem:Ur,removeItem:Dr,clear:Hr,length:kr,key:Or,keys:Fr,dropInstance:$r};function Gr(){return typeof openDatabase=="function"}var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wr="~~local_forage_type~",Rt=/^~~local_forage_type~([^~]+)~/,Te="__lfsc__:",De=Te.length,He="arbf",ke="blob",Bt="si08",At="ui08",Nt="uic8",Ut="si16",Dt="si32",Ht="ur16",kt="ui32",Ot="fl32",Ft="fl64",$t=De+He.length,Xt=Object.prototype.toString;function Gt(t){var a=t.length*.75,n=t.length,s,c=0,i,u,m,d;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);var p=new ArrayBuffer(a),h=new Uint8Array(p);for(s=0;s<n;s+=4)i=oe.indexOf(t[s]),u=oe.indexOf(t[s+1]),m=oe.indexOf(t[s+2]),d=oe.indexOf(t[s+3]),h[c++]=i<<2|u>>4,h[c++]=(u&15)<<4|m>>2,h[c++]=(m&3)<<6|d&63;return p}function Oe(t){var a=new Uint8Array(t),n="",s;for(s=0;s<a.length;s+=3)n+=oe[a[s]>>2],n+=oe[(a[s]&3)<<4|a[s+1]>>4],n+=oe[(a[s+1]&15)<<2|a[s+2]>>6],n+=oe[a[s+2]&63];return a.length%3===2?n=n.substring(0,n.length-1)+"=":a.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function Vr(t,a){var n="";if(t&&(n=Xt.call(t)),t&&(n==="[object ArrayBuffer]"||t.buffer&&Xt.call(t.buffer)==="[object ArrayBuffer]")){var s,c=Te;t instanceof ArrayBuffer?(s=t,c+=He):(s=t.buffer,n==="[object Int8Array]"?c+=Bt:n==="[object Uint8Array]"?c+=At:n==="[object Uint8ClampedArray]"?c+=Nt:n==="[object Int16Array]"?c+=Ut:n==="[object Uint16Array]"?c+=Ht:n==="[object Int32Array]"?c+=Dt:n==="[object Uint32Array]"?c+=kt:n==="[object Float32Array]"?c+=Ot:n==="[object Float64Array]"?c+=Ft:a(new Error("Failed to get type for BinaryArray"))),a(c+Oe(s))}else if(n==="[object Blob]"){var i=new FileReader;i.onload=function(){var u=Wr+t.type+"~"+Oe(this.result);a(Te+ke+u)},i.readAsArrayBuffer(t)}else try{a(JSON.stringify(t))}catch(u){console.error("Couldn't convert value into a JSON string: ",t),a(null,u)}}function zr(t){if(t.substring(0,De)!==Te)return JSON.parse(t);var a=t.substring($t),n=t.substring(De,$t),s;if(n===ke&&Rt.test(a)){var c=a.match(Rt);s=c[1],a=a.substring(c[0].length)}var i=Gt(a);switch(n){case He:return i;case ke:return z([i],{type:s});case Bt:return new Int8Array(i);case At:return new Uint8Array(i);case Nt:return new Uint8ClampedArray(i);case Ut:return new Int16Array(i);case Ht:return new Uint16Array(i);case Dt:return new Int32Array(i);case kt:return new Uint32Array(i);case Ot:return new Float32Array(i);case Ft:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var Fe={serialize:Vr,deserialize:zr,stringToBuffer:Gt,bufferToString:Oe};function Wt(t,a,n,s){t.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,s)}function Yr(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=typeof t[s]!="string"?t[s].toString():t[s];var c=new g(function(i,u){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(m){return u(m)}n.db.transaction(function(m){Wt(m,n,function(){a._dbInfo=n,i()},function(d,p){u(p)})},u)});return n.serializer=Fe,c}function ae(t,a,n,s,c,i){t.executeSql(n,s,c,function(u,m){m.code===m.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(d,p){p.rows.length?i(d,m):Wt(d,a,function(){d.executeSql(n,s,c,i)},i)},i):i(u,m)},i)}function Kr(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[t],function(d,p){var h=p.rows.length?p.rows.item(0).value:null;h&&(h=u.serializer.deserialize(h)),c(h)},function(d,p){i(p)})})}).catch(i)});return C(s,a),s}function Qr(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT * FROM "+u.storeName,[],function(d,p){for(var h=p.rows,E=h.length,M=0;M<E;M++){var B=h.item(M),A=B.value;if(A&&(A=u.serializer.deserialize(A)),A=t(A,B.key,M+1),A!==void 0){c(A);return}}c()},function(d,p){i(p)})})}).catch(i)});return C(s,a),s}function Vt(t,a,n,s){var c=this;t=$(t);var i=new g(function(u,m){c.ready().then(function(){a===void 0&&(a=null);var d=a,p=c._dbInfo;p.serializer.serialize(a,function(h,E){E?m(E):p.db.transaction(function(M){ae(M,p,"INSERT OR REPLACE INTO "+p.storeName+" (key, value) VALUES (?, ?)",[t,h],function(){u(d)},function(B,A){m(A)})},function(M){if(M.code===M.QUOTA_ERR){if(s>0){u(Vt.apply(c,[t,d,n,s-1]));return}m(M)}})})}).catch(m)});return C(i,n),i}function qr(t,a,n){return Vt.apply(this,[t,a,n,1])}function Jr(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[t],function(){c()},function(d,p){i(p)})})}).catch(i)});return C(s,a),s}function Zr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"DELETE FROM "+i.storeName,[],function(){s()},function(m,d){c(d)})})}).catch(c)});return C(n,t),n}function jr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(m,d){var p=d.rows.item(0).c;s(p)},function(m,d){c(d)})})}).catch(c)});return C(n,t),n}function en(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[t+1],function(d,p){var h=p.rows.length?p.rows.item(0).key:null;c(h)},function(d,p){i(p)})})}).catch(i)});return C(s,a),s}function tn(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT key FROM "+i.storeName,[],function(m,d){for(var p=[],h=0;h<d.rows.length;h++)p.push(d.rows.item(h).key);s(p)},function(m,d){c(d)})})}).catch(c)});return C(n,t),n}function rn(t){return new g(function(a,n){t.transaction(function(s){s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,i){for(var u=[],m=0;m<i.rows.length;m++)u.push(i.rows.item(m).name);a({db:t,storeNames:u})},function(c,i){n(i)})},function(s){n(s)})})}function nn(t,a){a=J.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;return t.name?c=new g(function(i){var u;t.name===n.name?u=s._dbInfo.db:u=openDatabase(t.name,"","",0),t.storeName?i({db:u,storeNames:[t.storeName]}):i(rn(u))}).then(function(i){return new g(function(u,m){i.db.transaction(function(d){function p(B){return new g(function(A,F){d.executeSql("DROP TABLE IF EXISTS "+B,[],function(){A()},function(k,q){F(q)})})}for(var h=[],E=0,M=i.storeNames.length;E<M;E++)h.push(p(i.storeNames[E]));g.all(h).then(function(){u()}).catch(function(B){m(B)})},function(d){m(d)})})}):c=g.reject("Invalid arguments"),C(c,a),c}var on={_driver:"webSQLStorage",_initStorage:Yr,_support:Gr(),iterate:Qr,getItem:Kr,setItem:qr,removeItem:Jr,clear:Zr,length:jr,key:en,keys:tn,dropInstance:nn};function an(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function zt(t,a){var n=t.name+"/";return t.storeName!==a.storeName&&(n+=t.storeName+"/"),n}function sn(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(a){return!0}}function cn(){return!sn()||localStorage.length>0}function fn(t){var a=this,n={};if(t)for(var s in t)n[s]=t[s];return n.keyPrefix=zt(t,a._defaultConfig),cn()?(a._dbInfo=n,n.serializer=Fe,g.resolve()):g.reject()}function un(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var i=localStorage.key(c);i.indexOf(s)===0&&localStorage.removeItem(i)}});return C(n,t),n}function ln(t,a){var n=this;t=$(t);var s=n.ready().then(function(){var c=n._dbInfo,i=localStorage.getItem(c.keyPrefix+t);return i&&(i=c.serializer.deserialize(i)),i});return C(s,a),s}function mn(t,a){var n=this,s=n.ready().then(function(){for(var c=n._dbInfo,i=c.keyPrefix,u=i.length,m=localStorage.length,d=1,p=0;p<m;p++){var h=localStorage.key(p);if(h.indexOf(i)===0){var E=localStorage.getItem(h);if(E&&(E=c.serializer.deserialize(E)),E=t(E,h.substring(u),d++),E!==void 0)return E}}});return C(s,a),s}function dn(t,a){var n=this,s=n.ready().then(function(){var c=n._dbInfo,i;try{i=localStorage.key(t)}catch(u){i=null}return i&&(i=i.substring(c.keyPrefix.length)),i});return C(s,a),s}function pn(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo,c=localStorage.length,i=[],u=0;u<c;u++){var m=localStorage.key(u);m.indexOf(s.keyPrefix)===0&&i.push(m.substring(s.keyPrefix.length))}return i});return C(n,t),n}function hn(t){var a=this,n=a.keys().then(function(s){return s.length});return C(n,t),n}function vn(t,a){var n=this;t=$(t);var s=n.ready().then(function(){var c=n._dbInfo;localStorage.removeItem(c.keyPrefix+t)});return C(s,a),s}function bn(t,a,n){var s=this;t=$(t);var c=s.ready().then(function(){a===void 0&&(a=null);var i=a;return new g(function(u,m){var d=s._dbInfo;d.serializer.serialize(a,function(p,h){if(h)m(h);else try{localStorage.setItem(d.keyPrefix+t,p),u(i)}catch(E){(E.name==="QuotaExceededError"||E.name==="NS_ERROR_DOM_QUOTA_REACHED")&&m(E),m(E)}})})});return C(c,n),c}function gn(t,a){if(a=J.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var s=this,c;return t.name?c=new g(function(i){t.storeName?i(zt(t,s._defaultConfig)):i(t.name+"/")}).then(function(i){for(var u=localStorage.length-1;u>=0;u--){var m=localStorage.key(u);m.indexOf(i)===0&&localStorage.removeItem(m)}}):c=g.reject("Invalid arguments"),C(c,a),c}var yn={_driver:"localStorageWrapper",_initStorage:fn,_support:an(),iterate:mn,getItem:ln,setItem:bn,removeItem:vn,clear:un,length:hn,key:dn,keys:pn,dropInstance:gn},En=function(a,n){return a===n||typeof a=="number"&&typeof n=="number"&&isNaN(a)&&isNaN(n)},Ln=function(a,n){for(var s=a.length,c=0;c<s;){if(En(a[c],n))return!0;c++}return!1},Yt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},he={},Kt={},ce={INDEXEDDB:Xr,WEBSQL:on,LOCALSTORAGE:yn},xn=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],we=["dropInstance"],$e=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(we),Pn={description:"",driver:xn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Tn(t,a){t[a]=function(){var n=arguments;return t.ready().then(function(){return t[a].apply(t,n)})}}function Xe(){for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var n in a)a.hasOwnProperty(n)&&(Yt(a[n])?arguments[0][n]=a[n].slice():arguments[0][n]=a[n])}return arguments[0]}var wn=function(){function t(a){_(this,t);for(var n in ce)if(ce.hasOwnProperty(n)){var s=ce[n],c=s._driver;this[n]=c,he[c]||this.defineDriver(s)}this._defaultConfig=Xe({},Pn),this._config=Xe({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(n){if((typeof n>"u"?"undefined":y(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in n){if(s==="storeName"&&(n[s]=n[s].replace(/\W/g,"_")),s==="version"&&typeof n[s]!="number")return new Error("Database version must be a number.");this._config[s]=n[s]}return"driver"in n&&n.driver?this.setDriver(this._config.driver):!0}else return typeof n=="string"?this._config[n]:this._config},t.prototype.defineDriver=function(n,s,c){var i=new g(function(u,m){try{var d=n._driver,p=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){m(p);return}for(var h=$e.concat("_initStorage"),E=0,M=h.length;E<M;E++){var B=h[E],A=!Ln(we,B);if((A||n[B])&&typeof n[B]!="function"){m(p);return}}var F=function(){for(var ve=function(Sn){return function(){var _n=new Error("Method "+Sn+" is not implemented by the current driver"),Qt=g.reject(_n);return C(Qt,arguments[arguments.length-1]),Qt}},Ge=0,Mn=we.length;Ge<Mn;Ge++){var We=we[Ge];n[We]||(n[We]=ve(We))}};F();var k=function(ve){he[d]&&console.info("Redefining LocalForage driver: "+d),he[d]=n,Kt[d]=ve,u()};"_support"in n?n._support&&typeof n._support=="function"?n._support().then(k,m):k(!!n._support):k(!0)}catch(q){m(q)}});return O(i,s,c),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(n,s,c){var i=he[n]?g.resolve(he[n]):g.reject(new Error("Driver not found."));return O(i,s,c),i},t.prototype.getSerializer=function(n){var s=g.resolve(Fe);return O(s,n),s},t.prototype.ready=function(n){var s=this,c=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return O(c,n,n),c},t.prototype.setDriver=function(n,s,c){var i=this;Yt(n)||(n=[n]);var u=this._getSupportedDrivers(n);function m(){i._config.driver=i.driver()}function d(E){return i._extend(E),m(),i._ready=i._initStorage(i._config),i._ready}function p(E){return function(){var M=0;function B(){for(;M<E.length;){var A=E[M];return M++,i._dbInfo=null,i._ready=null,i.getDriver(A).then(d).catch(B)}m();var F=new Error("No available storage method found.");return i._driverSet=g.reject(F),i._driverSet}return B()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=h.then(function(){var E=u[0];return i._dbInfo=null,i._ready=null,i.getDriver(E).then(function(M){i._driver=M._driver,m(),i._wrapLibraryMethodsWithReady(),i._initDriver=p(u)})}).catch(function(){m();var E=new Error("No available storage method found.");return i._driverSet=g.reject(E),i._driverSet}),O(this._driverSet,s,c),this._driverSet},t.prototype.supports=function(n){return!!Kt[n]},t.prototype._extend=function(n){Xe(this,n)},t.prototype._getSupportedDrivers=function(n){for(var s=[],c=0,i=n.length;c<i;c++){var u=n[c];this.supports(u)&&s.push(u)}return s},t.prototype._wrapLibraryMethodsWithReady=function(){for(var n=0,s=$e.length;n<s;n++)Tn(this,$e[n])},t.prototype.createInstance=function(n){return new t(n)},t}(),Cn=new wn;l.exports=Cn},{"3":3}]},{},[4])(4)})});var ze=r=>{let e=typeof r;return r!==null&&(e==="object"||e==="function")},Ve=new Set(["__proto__","prototype","constructor"]),$n=new Set("0123456789");function tr(r){let e=[],o="",f="start",l=!1;for(let x of r)switch(x){case"\\":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");l&&(o+=x),f="property",l=!l;break;case".":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="property";break}if(l){l=!1,o+=x;break}if(Ve.has(o))return[];e.push(o),o="",f="property";break;case"[":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="index";break}if(l){l=!1,o+=x;break}if(f==="property"){if(Ve.has(o))return[];e.push(o),o=""}f="index";break;case"]":if(f==="index"){e.push(Number.parseInt(o,10)),o="",f="indexEnd";break}if(f==="indexEnd")throw new Error("Invalid character after an index");default:if(f==="index"&&!$n.has(x))throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");f==="start"&&(f="property"),l&&(l=!1,o+="\\"),o+=x}switch(l&&(o+="\\"),f){case"property":{if(Ve.has(o))return[];e.push(o);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function rr(r,e){if(typeof e!="number"&&Array.isArray(r)){let o=Number.parseInt(e,10);return Number.isInteger(o)&&r[o]===r[e]}return!1}function Xn(r,e){if(rr(r,e))throw new Error("Cannot use string index")}function T(r,e,o){if(!ze(r)||typeof e!="string")return o===void 0?r:o;let f=tr(e);if(f.length===0)return o;for(let l=0;l<f.length;l++){let x=f[l];if(rr(r,x)?r=l===f.length-1?void 0:null:r=r[x],r==null){if(l!==f.length-1)return o;break}}return r===void 0?o:r}function nr(r,e,o){if(!ze(r)||typeof e!="string")return r;let f=r,l=tr(e);for(let x=0;x<l.length;x++){let y=l[x];Xn(r,y),x===l.length-1?r[y]=o:ze(r[y])||(r[y]=typeof l[x+1]=="number"?[]:{}),r=r[y]}return f}var Ae=Fn(ar());var U=r=>document.getElementById(r),ir=(r,e)=>{if(document.visibilityState==="hidden")return!1;let o=Object.entries(e);for(let[f,l]of o)r[f]=l;return!0},L=(r,e)=>document.visibilityState==="hidden"?!1:ir(U(r),e),I=(r,e)=>document.visibilityState==="hidden"?!1:ir(U(r).style,e);var ne=(r,e)=>r.querySelector(e),Gn=(r,e)=>{let o=U("confirmationBox"),f=U("confirmWrapper"),l=ne(document,"#confirm"),x=ne(document,"#transparentBG"),y=ne(l,"#okConfirm"),_=ne(l,"#cancelConfirm");o.style.display="block",f.style.display="block",x.style.display="block",ne(l,"p").textContent=r,l.focus();let P=({target:H})=>{let z=H;return y.removeEventListener("click",P),_.removeEventListener("click",P),l.removeEventListener("keyup",D),o.style.display="none",f.style.display="none",x.style.display="none",e(z===y)},D=H=>H.key==="Enter"||H.key===" "?P({target:y}):H.key==="Escape"?P({target:_}):H.preventDefault();y.addEventListener("click",P),_.addEventListener("click",P),l.addEventListener("keyup",D)},Wn=(r,e)=>{let o=U("confirmationBox"),f=U("alertWrapper"),l=ne(document,"#transparentBG"),x=ne(document,"#alert"),y=ne(x,"#okAlert");o.style.display="block",f.style.display="block",l.style.display="block",ne(x,"p").textContent=r,x.focus();let _=()=>{y.removeEventListener("click",_),x.removeEventListener("keyup",P),o.style.display="none",f.style.display="none",l.style.display="none",e(void 0)},P=D=>(D.key==="Enter"||D.key===" ")&&_();y.addEventListener("click",_),x.addEventListener("keyup",P)};var Z=r=>new Promise(e=>Wn(r,e));var Me=r=>new Promise(e=>Gn(r,e));var b=(r,e=0)=>{if(r<0)return"-"+b(-r,e);if(r>=1e6){let D=Math.floor(Math.log10(r));return r/=Math.pow(10,D),b(r,2)+"e"+b(D)}let o=Math.floor(r),f=r-o,l=o.toLocaleString(),x=e>0&&r!==0,y=Math.pow(10,e)*f,_=1e-6;Math.ceil(y)-y<_&&(y=Math.ceil(y));let P=x?Math.floor(y).toString():"";if(P!==""){for(;P.length<e;)P="0"+P;P="."+P}return l+P};var fe=r=>{I("mainTab",{display:"none"}),I("upgradeTab",{display:"none"}),I("talentsTab",{display:"none"}),r==="Main"?I("mainTab",{display:"block"}):r==="Upgrades"?I("upgradeTab",{display:"block"}):r==="Talents"&&I("talentsTab",{display:"block"})},Se=(r,e)=>{e?I("progression",{backgroundColor:"gold"}):I("progression",{backgroundColor:"turquoise"}),setTimeout(()=>{I("progression",{backgroundColor:ue(r)})},500),L("refresh-crit-counter",{textContent:b(r.criticalHitsThisRefresh)}),L("refresh-crit-fragments",{textContent:b(100*r.criticalHitsThisRefresh*r.coinUpgrades.barAgitation.upgradeEffect(),2)}),r.barFragments.updateHTML()},_e=r=>{I("progression",{backgroundColor:"cyan"}),setTimeout(()=>{I("progression",{backgroundColor:ue(r)})},1e3),L("coinWorth",{textContent:`Worth ${b(r.coinValueCache)} coins`}),r.coinValueCache>0?I("coinWorth",{color:"gold"}):I("coinWorth",{color:"grey"}),L("refresh-crit-counter",{textContent:b(r.criticalHitsThisRefresh)}),L("refresh-counter",{textContent:b(r.refreshCount)})};var Vn=10,Ie=0,Ke=0,ge=r=>{let e=0;return e+=Vn*Math.pow(r.barLevel+1,2),e*=Math.min(1,(r.barLevel+20)/40),e*=Math.max(1,1+(r.barLevel-20)/10),r.barLevel>40&&(e*=Math.pow(2,1/10*(r.barLevel-40))),r.barLevel>100&&(e*=Math.pow(2,1/10*(r.barLevel-100))),r.barLevel>200&&(e*=Math.pow(2,1/10*(r.barLevel-200))),r.barLevel%5===0&&(e*=Math.max(1,1/2*r.barLevel/10)),e},zn=r=>{let e=0;return r.barLevel>=5&&(e=.1),r.barLevel>=10&&(e+=.9*(1-Math.pow(Math.E,-r.barLevel/200))),e>=.9999?1e4:1/(1-e)},Yn=r=>zn(r)*(1-r.barEXP/r.barTNL),sr=(r,e)=>{if(r==null)return;let o=1;o+=e.coinUpgrades.barSpeed.upgradeEffect(),o*=e.barFragments.unspentBonus(),o*=Math.pow(1+e.coinUpgrades.barMomentum.upgradeEffect(),Math.sqrt(100*Math.min(1,e.barEXP/e.barTNL))),o/=Yn(e),o*=e.talents.barSpeed.talentEffect(),o*=Math.pow(1+e.coinUpgrades.barEmpowerment.upgradeEffect(),e.barLevel);let f=Math.random(),l=e.coinUpgrades.barReverberation.upgradeEffect()+e.talents.barCriticalChance.talentEffect();if(f<l){let y=!1;o*=e.coinUpgrades.barVibration.upgradeEffect(),e.talents.barCriticalChance.gainEXP(r),e.criticalHits+=1,e.criticalHitsThisRefresh+=1,Math.random()<e.coinUpgrades.barResonance.upgradeEffect()&&(o*=3,e.coins.gain(2+Math.floor(e.coinValueCache/5)-2*Math.min(1,e.coinValueCache)),y=!0),console.log(y),Se(e,y)}let x=o*r;e.barEXP+=x,Ie+=x,L("perSecCurr",{textContent:`+${b(Ie,2)} this sec`})},le=(r,e)=>Math.min(100,.1*Math.floor(1e3*r/e)),me=r=>{I("progression",{width:`${r}%`})},ue=r=>{if(r.barLevel%5===0)return console.log("testing!!!!"),r.barLevel>=320?"#FF0000":`#${(128+4*Math.floor(r.barLevel/10)).toString(16).padStart(2,"0")}0000`;if(r.barLevel>=128)return"#FFFFFF";let e=(128+r.barLevel).toString(16).padStart(2,"0"),o=(2*r.barLevel).toString(16).padStart(2,"0"),f=(128+r.barLevel).toString(16).padStart(2,"0");return`#${e}${o}${f}`},cr=r=>{r.coins.gain(r.coinValueCache),r.coinValueCache=Qe(r),r.barEXP-=r.barTNL,r.barLevel+=1,r.barLevel>r.highestBarLevel&&(r.highestBarLevel=r.barLevel);let e=ue(r);I("progression",{backgroundColor:e}),r.barTNL=ge(r),r.barEXP/=10,r.barEXP=Math.min(r.barEXP,Math.floor(r.barTNL/10));let o=le(r.barEXP,r.barTNL);me(o),L("coinWorth",{textContent:`Worth ${b(r.coinValueCache)} coins`}),r.barFragments.updateHTML(),r.barLevel===20&&(r.talents.barCriticalChance.updateHTML("Level20"),r.talents.barSpeed.updateHTML("Level20"))},fr=r=>{L("level",{textContent:`Level: ${r.barLevel}`}),L("exp",{textContent:`EXP: ${b(r.barEXP)}/${b(r.barTNL)}`})},ur=r=>{Ke=Ie,Ie=0,L("perSecPrev",{textContent:`+${b(Ke,2)} prev sec`}),r.talents.barCriticalChance.updateHTML("Time"),r.talents.barSpeed.gainEXP(Ke),r.talents.barSpeed.updateHTML("Time"),r.talents.coinGain.updateHTML("Time")},Qe=r=>{let e=0,o=1+r.barLevel;o>r.highestBarLevel&&(e+=3),o%5===0&&(e+=Math.floor(o/5)+3,Math.random()<.5&&o>25&&(e=0)),o%10===0&&(e+=Math.floor(o/2)),o%50===0&&(e+=Math.floor(o/2)),o%100===0&&(e+=Math.floor(o)),e>100&&(e=10*Math.pow(e,1/2)),e*=1+r.talents.coinGain.talentEffect();let f=e-Math.floor(e);Math.random()<f&&(e+=1),e=Math.floor(e);let l=U("coinWorth");return l.style.color=e>0?"gold":"grey",e};var ye=class{constructor(e=0,o){this.amount=e;this.player=o;this.amount=e,this.updateHTML()}spend(e){this.amount>=e&&(this.amount-=e,this.updateHTML())}gain(e){this.amount+=e,this.updateHTML(),this.updateOnGain(e)}set(e){this.amount=e,this.updateHTML()}valueOf(){return{amount:this.amount}}};var qe=class extends ye{updateHTML(){L("gold-amount",{textContent:b(this.amount)})}updateOnGain(e){e>0&&this.player.talents.coinGain.gainEXP(e)}};var lr="coins",Je=(r,e)=>{var f,l;let o=(f=T(r,lr))!=null?f:T(e,lr);return new qe((l=o==null?void 0:o.amount)!=null?l:0,e)};var Ze=class extends ye{updateHTML(){L("fragment-amount",{textContent:b(this.amount)}),L("fragment-bonus",{textContent:b(this.amount)}),L("fragment-gain",{textContent:b(this.getAmountOnRefresh())})}getAmountOnRefresh(){let e=this.player.barLevel,o=100*Math.pow(1.07,-5);return o*=Math.pow(1.07,e),o*=Math.pow(3,Math.floor(e/100)),o*=1+this.player.criticalHitsThisRefresh*this.player.coinUpgrades.barAgitation.upgradeEffect(),o*=1+this.player.coinUpgrades.barReinforcement.upgradeEffect()*this.player.barLevel,Math.floor(o)}unspentBonus(){return 1+1/100*this.amount}updateOnGain(){}};var mr="barFragments",je=(r,e)=>{var f,l;let o=(f=T(r,mr))!=null?f:T(e,mr);return new Ze((l=o==null?void 0:o.amount)!=null?l:0,e)};var Ee=class{constructor(e,o,f){this.level=e;this.cost=o;this.player=f}};var j=class extends Ee{constructor(e,o,f){super(e,o,f);this.updateHTML()}capLevel(){this.maxLevel!==-1&&(this.level=Math.min(this.maxLevel,this.level))}purchaseLevels(e,o){o.shiftKey&&(e=-1,e=Math.floor(this.player.coins.amount/this.cost)),this.maxLevel!==-1&&(e=Math.min(e,this.maxLevel-this.level)),this.cost*e<=this.player.coins.amount&&(this.player.coins.spend(this.cost*e),this.level+=e,this.updateHTML())}valueOf(){return{level:this.level,cost:this.cost,maxLevel:this.maxLevel}}},W={barSpeed:1,barMomentum:10,barReverberation:25,barVibration:50,barAgitation:1e4,barAdoption:250,barEmpowerment:1e4,barReinforcement:2e4,barResonance:2e3},et=class extends j{constructor(){super(...arguments);this.maxLevel=-1}upgradeEffect(){return 4*this.level/100+.06*Math.min(90,this.level)}updateHTML(){L("coin-bar-speed-effect",{textContent:`+${b(this.upgradeEffect(),2)} Progress Per Second`}),L("coin-bar-speed-name",{textContent:`Bar Speed ${b(this.level)}`})}},tt=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=400;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.maxLevel===this.level?Math.pow(100,1/10)-1:(.45*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+1/200*Math.min(10,this.level))*((Math.pow(100,1/10)-1)/.5)}updateHTML(){L("coin-bar-momentum-effect",{textContent:`Up to ${b(Math.pow(1+this.upgradeEffect(),10),2)}x Progress Speed based on fill%`}),this.level===this.maxLevel?(L("coin-bar-momentum-name",{textContent:"Bar Momentum [MAX LEVEL]"}),I("coin-bar-momentum-name",{color:"orchid"})):L("coin-bar-momentum-name",{textContent:`Bar Momentum ${b(this.level)}/${b(this.maxLevel)}`})}},rt=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=100;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?.01:.009*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+2e-4*Math.min(5,this.level)}updateHTML(){L("coin-bar-reverberation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% chance to have a CRITICAL TICK`}),this.level===this.maxLevel?(L("coin-bar-reverberation-name",{textContent:"Bar Reverberation [MAX LEVEL]"}),I("coin-bar-reverberation-name",{color:"orchid"})):L("coin-bar-reverberation-name",{textContent:`Bar Reverberation ${b(this.level)}/${b(this.maxLevel)}`})}},nt=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=170;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?2e3:100+1700*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+20*Math.min(10,this.level)}updateHTML(){L("coin-bar-vibration-effect",{textContent:`CRITICAL TICKS fill up the bar ${b(this.upgradeEffect(),2)}x faster`}),this.level===this.maxLevel?(L("coin-bar-vibration-name",{textContent:"Bar Vibration [MAX LEVEL]"}),I("coin-bar-vibration-name",{color:"orchid"})):L("coin-bar-vibration-name",{textContent:`Bar Vibration ${b(this.level)}/${b(this.maxLevel)}`})}},ot=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/500}updateHTML(){L("coin-bar-agitation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per CRIT`}),L("coin-bar-agitation-name",{textContent:`Bar Agitation ${b(this.level)}`})}},at=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=200;this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level/100}updateHTML(){L("coin-bar-adoption-effect",{textContent:`+${b(100*this.upgradeEffect())}% Talent EXP`}),this.level===this.maxLevel?(L("coin-bar-adoption-name",{textContent:"Bar Adoption [MAX LEVEL]"}),I("coin-bar-adoption-name",{color:"orchid"})):L("coin-bar-adoption-name",{textContent:`Bar Adoption ${b(this.level)}/${b(this.maxLevel)}`})}},it=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=20;this.capLevel(),this.updateHTML()}upgradeEffect(){return .02*this.level/200}updateHTML(){L("coin-bar-empowerment-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Progress Speed per bar level: (1+x)^(level)`}),this.level===this.maxLevel?(L("coin-bar-empowerment-name",{textContent:"Bar Empowerment [MAX LEVEL]"}),I("coin-bar-empowerment-name",{color:"orchid"})):L("coin-bar-empowerment-name",{textContent:`Bar Empowerment ${b(this.level)}/${b(this.maxLevel)}`})}},st=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/1e3}updateHTML(){L("coin-bar-reinforcement-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per bar level (1 + x * level)`}),L("coin-bar-reinforcement-name",{textContent:`Bar Reinforcement ${b(this.level)}`})}},ct=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=500;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?1:1-Math.pow(Math.E,-this.level/this.expoDivisor)}updateHTML(){L("coin-bar-resonance-effect",{textContent:`On CRIT, ${b(100*this.upgradeEffect(),2)}% chance of SUPER
                             CRIT (3x damage and earn coins)`}),this.level===this.maxLevel?(L("coin-bar-resonance-name",{textContent:"Bar Resonance [MAX LEVEL]"}),I("coin-bar-resonance-name",{color:"orchid"})):L("coin-bar-resonance-name",{textContent:`Bar Resonance ${b(this.level)}/${b(this.maxLevel)}`})}};var dr="coinUpgrades.barSpeed",ft=(r,e)=>{var f,l;let o=(f=T(r,dr))!=null?f:T(e,dr);return new et((l=o==null?void 0:o.level)!=null?l:0,W.barSpeed,e)};var pr="coinUpgrades.barMomentum",ut=(r,e)=>{var f,l;let o=(f=T(r,pr))!=null?f:T(e,pr);return new tt((l=o==null?void 0:o.level)!=null?l:0,W.barMomentum,e)};var hr="coinUpgrades.barReverberation",lt=(r,e)=>{var f,l;let o=(f=T(r,hr))!=null?f:T(e,hr);return new rt((l=o==null?void 0:o.level)!=null?l:0,W.barReverberation,e)};var vr="coinUpgrades.barVibration",mt=(r,e)=>{var f,l;let o=(f=T(r,vr))!=null?f:T(e,vr);return new nt((l=o==null?void 0:o.level)!=null?l:0,W.barVibration,e)};var br="coinUpgrades.barAgitation",dt=(r,e)=>{var f,l;let o=(f=T(r,br))!=null?f:T(e,br);return new ot((l=o==null?void 0:o.level)!=null?l:0,W.barAgitation,e)};var gr="coinUpgrades.barAdoption",pt=(r,e)=>{var f,l;let o=(f=T(r,gr))!=null?f:T(e,gr);return new at((l=o==null?void 0:o.level)!=null?l:0,W.barAdoption,e)};var yr="coinUpgrades.barEmpowerment",ht=(r,e)=>{var f,l;let o=(f=T(r,yr))!=null?f:T(e,yr);return new it((l=o==null?void 0:o.level)!=null?l:0,W.barEmpowerment,e)};var Er="coinUpgrades.barReinforcement",vt=(r,e)=>{var f,l;let o=(f=T(r,Er))!=null?f:T(e,Er);return new st((l=o==null?void 0:o.level)!=null?l:0,W.barReinforcement,e)};var Lr="coinUpgrades.barResonance",bt=(r,e)=>{var f,l;let o=(f=T(r,Lr))!=null?f:T(e,Lr);return new ct((l=o==null?void 0:o.level)!=null?l:0,W.barResonance,e)};var xr=(r,e,o,f=1)=>Math.ceil(r*(Math.pow(o,f)-Math.pow(e,f)));var Re=(r,e)=>{if(r==="Refresh"&&e.barLevel>=5){if(e.refreshTime<Le)return void Z(`Currently, refreshes have a ${b(Le)} second cooldown. Sorry!`);e.barFragments.set(e.barFragments.getAmountOnRefresh()),e.barEXP=0,e.barLevel=0,e.barTNL=ge(e),me(le(e.barEXP,e.barTNL)),e.barFragments.updateHTML(),e.talents.barCriticalChance.convertToPerm(),e.talents.barCriticalChance.updateHTML("Initialize"),e.talents.barSpeed.convertToPerm(),e.talents.barSpeed.updateHTML("Initialize"),e.talents.coinGain.convertToPerm(),e.talents.coinGain.updateHTML("Initialize"),e.refreshCount+=1,e.refreshTime=0,e.criticalHitsThisRefresh=0,e.coinValueCache=Qe(e),Se(e,!1),_e(e)}else return void Z("You cannot refresh yet. Get to level 5 lol")};var gt=r=>r.barLevel>=20,Be=class extends Ee{constructor(e,o,f,l,x,y){super(e,o,y);this.investedFragments=f,this.permLevel=l,this.currEXP=x,this.currTNL=this.calculateTNL()}calculateTNL(){let e=xr(this.cost,this.level,this.level+1,2),o=[50,100,200,500,1e3,2e3,5e3,1e4];for(let f of o)this.level>=f&&(e*=2);return e}setEXP(e){this.currEXP=e,this.updateHTML("GainEXP")}globalTalentEXPMultipliers(){let e=1;return e*=this.sacrificeBoost(),e*=1+this.player.coinUpgrades.barAdoption.upgradeEffect(),e}gainEXP(e){if(!gt(this.player))return;let o=this.calculateEXPGain(e);this.currEXP+=o,this.currEXP>=this.currTNL&&this.levelUp(),this.updateHTML("GainEXP")}subEXP(e){!gt(this.player)||(this.currEXP-=e)}levelUp(){let e=0;for(;this.currEXP>=this.currTNL&&!(e>=10);)this.level+=1,this.subEXP(this.currTNL),this.currTNL=this.calculateTNL(),e++;this.updateHTML("LevelUp")}computePermLevelGain(e){let o=0;return o+=Math.sqrt(e),o*=Math.min(4,Math.pow(this.player.refreshTime/300,2)),o=Math.min(e,o),Math.floor(o)}convertToPerm(){this.permLevel+=this.computePermLevelGain(this.level),this.level=0,this.setEXP(0),this.currTNL=this.calculateTNL(),this.updateHTML("PermLevelUp")}getBarWidth(){return Math.min(100,100*this.currEXP/this.currTNL)}sacrificeBoost(){return 1+1/100*Math.pow(Math.log2(1+this.investedFragments/4),2)}async sacrificeFragments(){if(this.player.barFragments.amount<1e3)return void Z("You cannot sacrifice your bar fragments until you have at least 1,000 of them.");if(this.player.barFragments.amount<=this.investedFragments)return void Z(`This bar needs more fragments than you can invest. You need ${b(this.investedFragments)}.`);await Me(`You will sacrifice ${b(this.player.barFragments.amount-this.investedFragments)} Bar Fragments to increase EXP gain for this bar. Will you? (automatically performs a refresh, setting your fragments to 0)`)&&(this.investedFragments=this.player.barFragments.amount,this.player.refreshTime+=Le,Re("Refresh",this.player),this.player.barFragments.set(0),this.updateHTML("Sacrifice"))}updateHTML(e){if(this.idHTML!==void 0){if(e==="Initialize"||e==="GainEXP"||e==="LevelUp"||e==="PermLevelUp"){L(`talent${this.idHTML}EXP`,{textContent:`EXP: ${b(this.currEXP)}/${b(this.currTNL)}`});let o=`${this.getBarWidth()}%`;I(`talent${this.idHTML}Progression`,{width:o})}(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp")&&L(`talent${this.idHTML}TempLevel`,{textContent:`Level this run: ${b(this.level)}`}),(e==="Initialize"||e==="PermLevelUp")&&L(`talent${this.idHTML}PermLevel`,{textContent:`Banked levels: ${b(this.permLevel)}`}),(e==="Initialize"||e==="Time"||e==="LevelUp")&&L(`talent${this.idHTML}PermGain`,{textContent:`Banked on reset: +${b(this.computePermLevelGain(this.level))}`}),(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp"||e==="Level20")&&L(`talent${this.idHTML}Effect`,{textContent:this.displayEffect()}),(e==="Initialize"||e==="Sacrifice")&&(L(`talent${this.idHTML}SacrificeAmount`,{textContent:b(this.investedFragments)}),L(`talent${this.idHTML}SacrificeMultiplier`,{textContent:b(this.sacrificeBoost(),3)}))}}valueOf(){return{level:this.level,cost:this.cost,investedFragments:this.investedFragments,permLevel:this.permLevel,currEXP:this.currEXP,idHTML:this.idHTML}}},de={talentCriticalChance:10,talentProgressSpeed:10,talentCoinGain:1e3},yt=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="CriticalChance";this.updateHTML("Initialize")}calculateEXPGain(e){let o=5;return o*=e*1e3/xt,o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return gt(this.player)?.0025*(1-Math.pow(Math.E,-this.level/2500))+.0025*Math.min(250,this.level)/250+.0025*(1-Math.pow(Math.E,-this.permLevel/4e3))+.0025*Math.min(500,this.level)/500:0}displayEffect(){return`+${b(100*this.talentEffect(),3)}% chance of CRITICAL TICK`}},Et=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="ProgressSpeed";this.updateHTML("Initialize")}calculateEXPGain(e){let o=Math.log10(1+e);return o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return(1+this.level/25)*(1+this.permLevel/50)}displayEffect(){return`Progress Speed +${b(100*(this.talentEffect()-1),2)}%`}},Lt=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="CoinGain";this.updateHTML("Initialize")}calculateEXPGain(e){let o=2+Math.floor(Math.pow(e,2)/100+4*e);return o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Math.min(.4,this.level/1e3)+Math.min(.4,this.permLevel/2e3)+.2*(this.level*25+this.permLevel)/(2500+this.level*25+this.permLevel)+1*(this.level*25+this.permLevel)/(5e4+this.level*25+this.permLevel)}displayEffect(){return`Progress bar grants +${b(100*this.talentEffect(),2)}% coins!`}};var Pr="talents.barCriticalChance",Pt=(r,e)=>{var f,l,x,y,_;let o=(f=T(r,Pr))!=null?f:T(e,Pr);return new yt((l=o==null?void 0:o.level)!=null?l:0,de.talentCriticalChance,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var Tr="talents.barSpeed",Tt=(r,e)=>{var f,l,x,y,_;let o=(f=T(r,Tr))!=null?f:T(e,Tr);return new Et((l=o==null?void 0:o.level)!=null?l:0,de.talentProgressSpeed,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var wr="talents.coinGain",wt=(r,e)=>{var f,l,x,y,_;let o=(f=T(r,wr))!=null?f:T(e,wr);return new Lt((l=o==null?void 0:o.level)!=null?l:0,de.talentCoinGain,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var w={firstPlayed:new Date,barEXP:0,barTNL:0,totalEXP:0,barLevel:0,highestBarLevel:0,refreshCount:0,refreshTime:0,criticalHits:0,criticalHitsThisRefresh:0,coinValueCache:0},Mr=Object.assign({},w),Qn=async r=>{let e=er(jt({},r),{coins:r.coins.valueOf(),coinUpgrades:{barSpeed:r.coinUpgrades.barSpeed.valueOf(),barMomentum:r.coinUpgrades.barMomentum.valueOf(),barReverberation:r.coinUpgrades.barReverberation.valueOf(),barVibration:r.coinUpgrades.barVibration.valueOf(),barAgitation:r.coinUpgrades.barAgitation.valueOf(),barAdoption:r.coinUpgrades.barAdoption.valueOf(),barEmpowerment:r.coinUpgrades.barEmpowerment.valueOf(),barReinforcement:r.coinUpgrades.barReinforcement.valueOf(),barResonance:r.coinUpgrades.barResonance.valueOf()},talents:{barCriticalChance:r.talents.barCriticalChance.valueOf(),barSpeed:r.talents.barSpeed.valueOf(),coinGain:r.talents.coinGain.valueOf()},barFragments:r.barFragments.valueOf()}),o=btoa(JSON.stringify(e));o!==null&&await Ae.default.setItem("UPBSave",o)},Cr=new Map([["coins",Je],["coinUpgrades.barSpeed",ft],["coinUpgrades.barMomentum",ut],["coinUpgrades.barReverberation",lt],["coinUpgrades.barVibration",mt],["coinUpgrades.barAgitation",dt],["coinUpgrades.barAdoption",pt],["coinUpgrades.barEmpowerment",ht],["coinUpgrades.barReinforcement",vt],["coinUpgrades.barResonance",bt],["talents.barCriticalChance",Pt],["talents.barSpeed",Tt],["talents.coinGain",wt],["barFragments",je]]),qn=async()=>{let r=await Ae.default.getItem("UPBSave"),e=r?JSON.parse(atob(r)):null;if(e!==null){let o=Object.keys(e);for(let f of o)f in Mr&&(Cr.has(f)||Object.defineProperty(w,f,{value:e[f]}))}for(let[o,f]of Cr)nr(w,o,f(e!=null?e:w,w))},xe=new Set,Ct=new Proxy(setInterval,{apply(r,e,o){let f=r.apply(e,o);return xe.add(f),f}}),Jn=new Proxy(clearInterval,{apply(r,e,o){let f=o[0];return xe.has(f)&&xe.delete(f),r.apply(e,o)}});window.addEventListener("pagehide",()=>{window.scrollTo(0,0)});var Mt=0,xt=24,Zn=5e3,St=async()=>{for(let r of xe)Jn(r);xe.clear(),await qn(),w.barTNL=ge(w),Object.defineProperty(window,"player",{value:w}),me(le(w.barEXP,w.barTNL)),w.barFragments.updateHTML(),fe("Main"),I("progression",{backgroundColor:ue(w)}),L("coinWorth",{textContent:`Worth ${b(w.coinValueCache)} coins`}),w.coinValueCache&&I("coinWorth",{color:"gold"}),Mt=performance.now(),Ct(jn,1e3/xt),Ct(ur,1e3,w),Ct(Qn,Zn,w)},Sr=async()=>{if(await Me("Are you SURE you want to reset the game?")===!1)return Z("OK, the game hasn't been reset!");await Ae.default.removeItem("UPBSave");let e=Object.keys(w);for(let o of e){if(typeof w[o]=="object"){delete w[o];continue}Object.defineProperty(w,o,{value:Mr[o]})}await St()},jn=()=>{let e=performance.now()-Mt;eo(e/1e3),Mt+=e},eo=r=>{sr(r,w),w.refreshTime+=r,L("refresh-timer",{textContent:`${b(w.refreshTime,2)}s`});let e=le(w.barEXP,w.barTNL);e<100?me(e):cr(w),fr(w)},Le=60;var _r=r=>{U("main-tab-nav").addEventListener("click",()=>fe("Main")),U("upgrade-tab-nav").addEventListener("click",()=>fe("Upgrades")),U("talent-tab-nav").addEventListener("click",()=>fe("Talents")),U("buy-coin-bar-speed").addEventListener("click",e=>r.coinUpgrades.barSpeed.purchaseLevels(1,e)),U("buy-coin-bar-momentum").addEventListener("click",e=>r.coinUpgrades.barMomentum.purchaseLevels(1,e)),U("buy-coin-bar-reverberation").addEventListener("click",e=>r.coinUpgrades.barReverberation.purchaseLevels(1,e)),U("buy-coin-bar-vibration").addEventListener("click",e=>r.coinUpgrades.barVibration.purchaseLevels(1,e)),U("buy-coin-bar-agitation").addEventListener("click",e=>r.coinUpgrades.barAgitation.purchaseLevels(1,e)),U("buy-coin-bar-adoption").addEventListener("click",e=>r.coinUpgrades.barAdoption.purchaseLevels(1,e)),U("buy-coin-bar-empowerment").addEventListener("click",e=>r.coinUpgrades.barEmpowerment.purchaseLevels(1,e)),U("buy-coin-bar-reinforcement").addEventListener("click",e=>r.coinUpgrades.barReinforcement.purchaseLevels(1,e)),U("buy-coin-bar-resonance").addEventListener("click",e=>r.coinUpgrades.barResonance.purchaseLevels(1,e)),U("buy-reset").addEventListener("click",()=>Re("Refresh",r)),U("reset-game").addEventListener("click",()=>void Sr()),U("talentCriticalChanceSacrifice").addEventListener("click",()=>void r.talents.barCriticalChance.sacrificeFragments()),U("talentProgressSpeedSacrifice").addEventListener("click",()=>void r.talents.barSpeed.sacrificeFragments()),U("talentCoinGainSacrifice").addEventListener("click",()=>void r.talents.coinGain.sacrificeFragments())};window.addEventListener("load",async()=>{var r,e;if(_r(w),await St(),_e(w),typeof((r=navigator.storage)==null?void 0:r.persist)=="function"&&typeof((e=navigator.storage)==null?void 0:e.persisted)=="function"){let o=await navigator.storage.persisted();o?console.log(`Storage is persistent! (persistent = ${o})`):await navigator.storage.persist()&&Z("Data on this page is now persistent! If you do not know what this means, you can safely ignore it.")}});document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&(w.coins.updateHTML(),w.coinUpgrades.barMomentum.updateHTML(),w.coinUpgrades.barSpeed.updateHTML(),w.coinUpgrades.barReverberation.updateHTML(),w.coinUpgrades.barVibration.updateHTML(),w.coinUpgrades.barAgitation.updateHTML(),w.barFragments.updateHTML(),w.talents.barCriticalChance.updateHTML("Initialize"),w.talents.barSpeed.updateHTML("Initialize"),L("coinWorth",{textContent:`Worth ${b(w.coinValueCache)} coins`}),w.coinValueCache>0?I("coinWorth",{color:"gold"}):I("coinWorth",{color:"grey"}))});})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
//# sourceMappingURL=out.js.map
