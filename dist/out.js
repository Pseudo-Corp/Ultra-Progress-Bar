(()=>{var Bn=Object.create;var Ce=Object.defineProperty,An=Object.defineProperties,Nn=Object.getOwnPropertyDescriptor,Un=Object.getOwnPropertyDescriptors,Hn=Object.getOwnPropertyNames,tr=Object.getOwnPropertySymbols,Dn=Object.getPrototypeOf,nr=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable;var rr=(r,e,o)=>e in r?Ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,or=(r,e)=>{for(var o in e||(e={}))nr.call(e,o)&&rr(r,o,e[o]);if(tr)for(var o of tr(e))kn.call(e,o)&&rr(r,o,e[o]);return r},ar=(r,e)=>An(r,Un(e)),On=r=>Ce(r,"__esModule",{value:!0});var be=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Fn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var $n=(r,e,o,f)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Hn(e))!nr.call(r,l)&&(o||l!=="default")&&Ce(r,l,{get:()=>e[l],enumerable:!(f=Nn(e,l))||f.enumerable});return r},Xn=(r,e)=>$n(On(Ce(r!=null?Bn(Dn(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var ur=Fn((fr,Ke)=>{(function(r){if(typeof fr=="object"&&typeof Ke<"u")Ke.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,o;return function f(l,L,y){function S(D,z){if(!L[D]){if(!l[D]){var b=typeof be=="function"&&be;if(!z&&b)return b(D,!0);if(T)return T(D,!0);var w=new Error("Cannot find module '"+D+"'");throw w.code="MODULE_NOT_FOUND",w}var k=L[D]={exports:{}};l[D][0].call(k.exports,function(O){var K=l[D][1][O];return S(K||O)},k,k.exports,f,l,L,y)}return L[D].exports}for(var T=typeof be=="function"&&be,U=0;U<y.length;U++)S(y[U]);return S}({1:[function(f,l,L){(function(y){"use strict";var S=y.MutationObserver||y.WebKitMutationObserver,T;if(S){var U=0,D=new S(O),z=y.document.createTextNode("");D.observe(z,{characterData:!0}),T=function(){z.data=U=++U%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var b=new y.MessageChannel;b.port1.onmessage=O,T=function(){b.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?T=function(){var X=y.document.createElement("script");X.onreadystatechange=function(){O(),X.onreadystatechange=null,X.parentNode.removeChild(X),X=null},y.document.documentElement.appendChild(X)}:T=function(){setTimeout(O,0)};var w,k=[];function O(){w=!0;for(var X,ee,G=k.length;G;){for(ee=k,k=[],X=-1;++X<G;)ee[X]();G=k.length}w=!1}l.exports=K;function K(X){k.push(X)===1&&!w&&T()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,l,L){"use strict";var y=f(1);function S(){}var T={},U=["REJECTED"],D=["FULFILLED"],z=["PENDING"];l.exports=b;function b(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,v!==S&&K(this,v)}b.prototype.catch=function(v){return this.then(null,v)},b.prototype.then=function(v,I){if(typeof v!="function"&&this.state===D||typeof I!="function"&&this.state===U)return this;var _=new this.constructor(S);if(this.state!==z){var H=this.state===D?v:I;k(_,H,this.outcome)}else this.queue.push(new w(_,v,I));return _};function w(v,I,_){this.promise=v,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(v){T.resolve(this.promise,v)},w.prototype.otherCallFulfilled=function(v){k(this.promise,this.onFulfilled,v)},w.prototype.callRejected=function(v){T.reject(this.promise,v)},w.prototype.otherCallRejected=function(v){k(this.promise,this.onRejected,v)};function k(v,I,_){y(function(){var H;try{H=I(_)}catch(V){return T.reject(v,V)}H===v?T.reject(v,new TypeError("Cannot resolve promise with itself")):T.resolve(v,H)})}T.resolve=function(v,I){var _=X(O,I);if(_.status==="error")return T.reject(v,_.value);var H=_.value;if(H)K(v,H);else{v.state=D,v.outcome=I;for(var V=-1,Y=v.queue.length;++V<Y;)v.queue[V].callFulfilled(I)}return v},T.reject=function(v,I){v.state=U,v.outcome=I;for(var _=-1,H=v.queue.length;++_<H;)v.queue[_].callRejected(I);return v};function O(v){var I=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof I=="function")return function(){I.apply(v,arguments)}}function K(v,I){var _=!1;function H(q){_||(_=!0,T.reject(v,q))}function V(q){_||(_=!0,T.resolve(v,q))}function Y(){I(V,H)}var Q=X(Y);Q.status==="error"&&H(Q.value)}function X(v,I){var _={};try{_.value=v(I),_.status="success"}catch(H){_.status="error",_.value=H}return _}b.resolve=ee;function ee(v){return v instanceof this?v:T.resolve(new this(S),v)}b.reject=G;function G(v){var I=new this(S);return T.reject(I,v)}b.all=Ue;function Ue(v){var I=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,H=!1;if(!_)return this.resolve([]);for(var V=new Array(_),Y=0,Q=-1,q=new this(S);++Q<_;)te(v[Q],Q);return q;function te(pe,Pe){I.resolve(pe).then(He,function(ce){H||(H=!0,T.reject(q,ce))});function He(ce){V[Pe]=ce,++Y===_&&!H&&(H=!0,T.resolve(q,V))}}}b.race=ie;function ie(v){var I=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=v.length,H=!1;if(!_)return this.resolve([]);for(var V=-1,Y=new this(S);++V<_;)Q(v[V]);return Y;function Q(q){I.resolve(q).then(function(te){H||(H=!0,T.resolve(Y,te))},function(te){H||(H=!0,T.reject(Y,te))})}}},{"1":1}],3:[function(f,l,L){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=f(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(f,l,L){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function S(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function T(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(t){return}}var U=T();function D(){try{if(!U||!U.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(n){return!1}}function z(t,a){t=t||[],a=a||{};try{return new Blob(t,a)}catch(i){if(i.name!=="TypeError")throw i;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,s=new n,c=0;c<t.length;c+=1)s.append(t[c]);return s.getBlob(a.type)}}typeof Promise>"u"&&f(3);var b=Promise;function w(t,a){a&&t.then(function(n){a(null,n)},function(n){a(n)})}function k(t,a,n){typeof a=="function"&&t.then(a),typeof n=="function"&&t.catch(n)}function O(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var X="local-forage-detect-blob-support",ee=void 0,G={},Ue=Object.prototype.toString,ie="readonly",v="readwrite";function I(t){for(var a=t.length,n=new ArrayBuffer(a),s=new Uint8Array(n),c=0;c<a;c++)s[c]=t.charCodeAt(c);return n}function _(t){return new b(function(a){var n=t.transaction(X,v),s=z([""]);n.objectStore(X).put(s,"key"),n.onabort=function(c){c.preventDefault(),c.stopPropagation(),a(!1)},n.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);a(i||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function H(t){return typeof ee=="boolean"?b.resolve(ee):_(t).then(function(a){return ee=a,ee})}function V(t){var a=G[t.name],n={};n.promise=new b(function(s,c){n.resolve=s,n.reject=c}),a.deferredOperations.push(n),a.dbReady?a.dbReady=a.dbReady.then(function(){return n.promise}):a.dbReady=n.promise}function Y(t){var a=G[t.name],n=a.deferredOperations.pop();if(n)return n.resolve(),n.promise}function Q(t,a){var n=G[t.name],s=n.deferredOperations.pop();if(s)return s.reject(a),s.promise}function q(t,a){return new b(function(n,s){if(G[t.name]=G[t.name]||Ut(),t.db)if(a)V(t),t.db.close();else return n(t.db);var c=[t.name];a&&c.push(t.version);var i=U.open.apply(U,c);a&&(i.onupgradeneeded=function(u){var m=i.result;try{m.createObjectStore(t.storeName),u.oldVersion<=1&&m.createObjectStore(X)}catch(d){if(d.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw d}}),i.onerror=function(u){u.preventDefault(),s(i.error)},i.onsuccess=function(){var u=i.result;u.onversionchange=function(m){m.target.close()},n(u),Y(t)}})}function te(t){return q(t,!1)}function pe(t){return q(t,!0)}function Pe(t,a){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),s=t.version<t.db.version,c=t.version>t.db.version;if(s&&(t.version!==a&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),c||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function He(t){return new b(function(a,n){var s=new FileReader;s.onerror=n,s.onloadend=function(c){var i=btoa(c.target.result||"");a({__local_forage_encoded_blob:!0,data:i,type:t.type})},s.readAsBinaryString(t)})}function ce(t){var a=I(atob(t.data));return z([a],{type:t.type})}function Nt(t){return t&&t.__local_forage_encoded_blob}function Br(t){var a=this,n=a._initReady().then(function(){var s=G[a._dbInfo.name];if(s&&s.dbReady)return s.dbReady});return k(n,t,t),n}function Ar(t){V(t);for(var a=G[t.name],n=a.forages,s=0;s<n.length;s++){var c=n[s];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return t.db=null,te(t).then(function(i){return t.db=i,Pe(t)?pe(t):i}).then(function(i){t.db=a.db=i;for(var u=0;u<n.length;u++)n[u]._dbInfo.db=i}).catch(function(i){throw Q(t,i),i})}function re(t,a,n,s){s===void 0&&(s=1);try{var c=t.db.transaction(t.storeName,a);n(null,c)}catch(i){if(s>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError"))return b.resolve().then(function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),pe(t)}).then(function(){return Ar(t).then(function(){re(t,a,n,s-1)})}).catch(n);n(i)}}function Ut(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Nr(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=t[s];var c=G[n.name];c||(c=Ut(),G[n.name]=c),c.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=Br);var i=[];function u(){return b.resolve()}for(var m=0;m<c.forages.length;m++){var d=c.forages[m];d!==a&&i.push(d._initReady().catch(u))}var p=c.forages.slice(0);return b.all(i).then(function(){return n.db=c.db,te(n)}).then(function(h){return n.db=h,Pe(n,a._defaultConfig.version)?pe(n):h}).then(function(h){n.db=c.db=h,a._dbInfo=n;for(var E=0;E<p.length;E++){var M=p[E];M!==a&&(M._dbInfo.db=n.db,M._dbInfo.version=n.version)}})}function Ur(t,a){var n=this;t=O(t);var s=new b(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.get(t);p.onsuccess=function(){var h=p.result;h===void 0&&(h=null),Nt(h)&&(h=ce(h)),c(h)},p.onerror=function(){i(p.error)}}catch(h){i(h)}})}).catch(i)});return w(s,a),s}function Hr(t,a){var n=this,s=new b(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.openCursor(),h=1;p.onsuccess=function(){var E=p.result;if(E){var M=E.value;Nt(M)&&(M=ce(M));var B=t(M,E.key,h++);B!==void 0?c(B):E.continue()}else c()},p.onerror=function(){i(p.error)}}catch(E){i(E)}})}).catch(i)});return w(s,a),s}function Dr(t,a,n){var s=this;t=O(t);var c=new b(function(i,u){var m;s.ready().then(function(){return m=s._dbInfo,Ue.call(a)==="[object Blob]"?H(m.db).then(function(d){return d?a:He(a)}):a}).then(function(d){re(s._dbInfo,v,function(p,h){if(p)return u(p);try{var E=h.objectStore(s._dbInfo.storeName);d===null&&(d=void 0);var M=E.put(d,t);h.oncomplete=function(){d===void 0&&(d=null),i(d)},h.onabort=h.onerror=function(){var B=M.error?M.error:M.transaction.error;u(B)}}catch(B){u(B)}})}).catch(u)});return w(c,n),c}function kr(t,a){var n=this;t=O(t);var s=new b(function(c,i){n.ready().then(function(){re(n._dbInfo,v,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=d.delete(t);m.oncomplete=function(){c()},m.onerror=function(){i(p.error)},m.onabort=function(){var h=p.error?p.error:p.transaction.error;i(h)}}catch(h){i(h)}})}).catch(i)});return w(s,a),s}function Or(t){var a=this,n=new b(function(s,c){a.ready().then(function(){re(a._dbInfo,v,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.clear();u.oncomplete=function(){s()},u.onabort=u.onerror=function(){var p=d.error?d.error:d.transaction.error;c(p)}}catch(p){c(p)}})}).catch(c)});return w(n,t),n}function Fr(t){var a=this,n=new b(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.count();d.onsuccess=function(){s(d.result)},d.onerror=function(){c(d.error)}}catch(p){c(p)}})}).catch(c)});return w(n,t),n}function $r(t,a){var n=this,s=new b(function(c,i){if(t<0){c(null);return}n.ready().then(function(){re(n._dbInfo,ie,function(u,m){if(u)return i(u);try{var d=m.objectStore(n._dbInfo.storeName),p=!1,h=d.openKeyCursor();h.onsuccess=function(){var E=h.result;if(!E){c(null);return}t===0||p?c(E.key):(p=!0,E.advance(t))},h.onerror=function(){i(h.error)}}catch(E){i(E)}})}).catch(i)});return w(s,a),s}function Xr(t){var a=this,n=new b(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var m=u.objectStore(a._dbInfo.storeName),d=m.openKeyCursor(),p=[];d.onsuccess=function(){var h=d.result;if(!h){s(p);return}p.push(h.key),h.continue()},d.onerror=function(){c(d.error)}}catch(h){c(h)}})}).catch(c)});return w(n,t),n}function Gr(t,a){a=K.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;if(!t.name)c=b.reject("Invalid arguments");else{var i=t.name===n.name&&s._dbInfo.db,u=i?b.resolve(s._dbInfo.db):te(t).then(function(m){var d=G[t.name],p=d.forages;d.db=m;for(var h=0;h<p.length;h++)p[h]._dbInfo.db=m;return m});t.storeName?c=u.then(function(m){if(!!m.objectStoreNames.contains(t.storeName)){var d=m.version+1;V(t);var p=G[t.name],h=p.forages;m.close();for(var E=0;E<h.length;E++){var M=h[E];M._dbInfo.db=null,M._dbInfo.version=d}var B=new b(function(A,$){var F=U.open(t.name,d);F.onerror=function(J){var ve=F.result;ve.close(),$(J)},F.onupgradeneeded=function(){var J=F.result;J.deleteObjectStore(t.storeName)},F.onsuccess=function(){var J=F.result;J.close(),A(J)}});return B.then(function(A){p.db=A;for(var $=0;$<h.length;$++){var F=h[$];F._dbInfo.db=A,Y(F._dbInfo)}}).catch(function(A){throw(Q(t,A)||b.resolve()).catch(function(){}),A})}}):c=u.then(function(m){V(t);var d=G[t.name],p=d.forages;m.close();for(var h=0;h<p.length;h++){var E=p[h];E._dbInfo.db=null}var M=new b(function(B,A){var $=U.deleteDatabase(t.name);$.onerror=function(){var F=$.result;F&&F.close(),A($.error)},$.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},$.onsuccess=function(){var F=$.result;F&&F.close(),B(F)}});return M.then(function(B){d.db=B;for(var A=0;A<p.length;A++){var $=p[A];Y($._dbInfo)}}).catch(function(B){throw(Q(t,B)||b.resolve()).catch(function(){}),B})})}return w(c,a),c}var Wr={_driver:"asyncStorage",_initStorage:Nr,_support:D(),iterate:Hr,getItem:Ur,setItem:Dr,removeItem:kr,clear:Or,length:Fr,key:$r,keys:Xr,dropInstance:Gr};function Vr(){return typeof openDatabase=="function"}var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zr="~~local_forage_type~",Ht=/^~~local_forage_type~([^~]+)~/,Te="__lfsc__:",De=Te.length,ke="arbf",Oe="blob",Dt="si08",kt="ui08",Ot="uic8",Ft="si16",$t="si32",Xt="ur16",Gt="ui32",Wt="fl32",Vt="fl64",zt=De+ke.length,Yt=Object.prototype.toString;function Kt(t){var a=t.length*.75,n=t.length,s,c=0,i,u,m,d;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);var p=new ArrayBuffer(a),h=new Uint8Array(p);for(s=0;s<n;s+=4)i=oe.indexOf(t[s]),u=oe.indexOf(t[s+1]),m=oe.indexOf(t[s+2]),d=oe.indexOf(t[s+3]),h[c++]=i<<2|u>>4,h[c++]=(u&15)<<4|m>>2,h[c++]=(m&3)<<6|d&63;return p}function Fe(t){var a=new Uint8Array(t),n="",s;for(s=0;s<a.length;s+=3)n+=oe[a[s]>>2],n+=oe[(a[s]&3)<<4|a[s+1]>>4],n+=oe[(a[s+1]&15)<<2|a[s+2]>>6],n+=oe[a[s+2]&63];return a.length%3===2?n=n.substring(0,n.length-1)+"=":a.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function Yr(t,a){var n="";if(t&&(n=Yt.call(t)),t&&(n==="[object ArrayBuffer]"||t.buffer&&Yt.call(t.buffer)==="[object ArrayBuffer]")){var s,c=Te;t instanceof ArrayBuffer?(s=t,c+=ke):(s=t.buffer,n==="[object Int8Array]"?c+=Dt:n==="[object Uint8Array]"?c+=kt:n==="[object Uint8ClampedArray]"?c+=Ot:n==="[object Int16Array]"?c+=Ft:n==="[object Uint16Array]"?c+=Xt:n==="[object Int32Array]"?c+=$t:n==="[object Uint32Array]"?c+=Gt:n==="[object Float32Array]"?c+=Wt:n==="[object Float64Array]"?c+=Vt:a(new Error("Failed to get type for BinaryArray"))),a(c+Fe(s))}else if(n==="[object Blob]"){var i=new FileReader;i.onload=function(){var u=zr+t.type+"~"+Fe(this.result);a(Te+Oe+u)},i.readAsArrayBuffer(t)}else try{a(JSON.stringify(t))}catch(u){console.error("Couldn't convert value into a JSON string: ",t),a(null,u)}}function Kr(t){if(t.substring(0,De)!==Te)return JSON.parse(t);var a=t.substring(zt),n=t.substring(De,zt),s;if(n===Oe&&Ht.test(a)){var c=a.match(Ht);s=c[1],a=a.substring(c[0].length)}var i=Kt(a);switch(n){case ke:return i;case Oe:return z([i],{type:s});case Dt:return new Int8Array(i);case kt:return new Uint8Array(i);case Ot:return new Uint8ClampedArray(i);case Ft:return new Int16Array(i);case Xt:return new Uint16Array(i);case $t:return new Int32Array(i);case Gt:return new Uint32Array(i);case Wt:return new Float32Array(i);case Vt:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var $e={serialize:Yr,deserialize:Kr,stringToBuffer:Kt,bufferToString:Fe};function Qt(t,a,n,s){t.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,s)}function Qr(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=typeof t[s]!="string"?t[s].toString():t[s];var c=new b(function(i,u){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(m){return u(m)}n.db.transaction(function(m){Qt(m,n,function(){a._dbInfo=n,i()},function(d,p){u(p)})},u)});return n.serializer=$e,c}function ae(t,a,n,s,c,i){t.executeSql(n,s,c,function(u,m){m.code===m.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(d,p){p.rows.length?i(d,m):Qt(d,a,function(){d.executeSql(n,s,c,i)},i)},i):i(u,m)},i)}function qr(t,a){var n=this;t=O(t);var s=new b(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[t],function(d,p){var h=p.rows.length?p.rows.item(0).value:null;h&&(h=u.serializer.deserialize(h)),c(h)},function(d,p){i(p)})})}).catch(i)});return w(s,a),s}function Jr(t,a){var n=this,s=new b(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT * FROM "+u.storeName,[],function(d,p){for(var h=p.rows,E=h.length,M=0;M<E;M++){var B=h.item(M),A=B.value;if(A&&(A=u.serializer.deserialize(A)),A=t(A,B.key,M+1),A!==void 0){c(A);return}}c()},function(d,p){i(p)})})}).catch(i)});return w(s,a),s}function qt(t,a,n,s){var c=this;t=O(t);var i=new b(function(u,m){c.ready().then(function(){a===void 0&&(a=null);var d=a,p=c._dbInfo;p.serializer.serialize(a,function(h,E){E?m(E):p.db.transaction(function(M){ae(M,p,"INSERT OR REPLACE INTO "+p.storeName+" (key, value) VALUES (?, ?)",[t,h],function(){u(d)},function(B,A){m(A)})},function(M){if(M.code===M.QUOTA_ERR){if(s>0){u(qt.apply(c,[t,d,n,s-1]));return}m(M)}})})}).catch(m)});return w(i,n),i}function Zr(t,a,n){return qt.apply(this,[t,a,n,1])}function jr(t,a){var n=this;t=O(t);var s=new b(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[t],function(){c()},function(d,p){i(p)})})}).catch(i)});return w(s,a),s}function en(t){var a=this,n=new b(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"DELETE FROM "+i.storeName,[],function(){s()},function(m,d){c(d)})})}).catch(c)});return w(n,t),n}function tn(t){var a=this,n=new b(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(m,d){var p=d.rows.item(0).c;s(p)},function(m,d){c(d)})})}).catch(c)});return w(n,t),n}function rn(t,a){var n=this,s=new b(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(m){ae(m,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[t+1],function(d,p){var h=p.rows.length?p.rows.item(0).key:null;c(h)},function(d,p){i(p)})})}).catch(i)});return w(s,a),s}function nn(t){var a=this,n=new b(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT key FROM "+i.storeName,[],function(m,d){for(var p=[],h=0;h<d.rows.length;h++)p.push(d.rows.item(h).key);s(p)},function(m,d){c(d)})})}).catch(c)});return w(n,t),n}function on(t){return new b(function(a,n){t.transaction(function(s){s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,i){for(var u=[],m=0;m<i.rows.length;m++)u.push(i.rows.item(m).name);a({db:t,storeNames:u})},function(c,i){n(i)})},function(s){n(s)})})}function an(t,a){a=K.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;return t.name?c=new b(function(i){var u;t.name===n.name?u=s._dbInfo.db:u=openDatabase(t.name,"","",0),t.storeName?i({db:u,storeNames:[t.storeName]}):i(on(u))}).then(function(i){return new b(function(u,m){i.db.transaction(function(d){function p(B){return new b(function(A,$){d.executeSql("DROP TABLE IF EXISTS "+B,[],function(){A()},function(F,J){$(J)})})}for(var h=[],E=0,M=i.storeNames.length;E<M;E++)h.push(p(i.storeNames[E]));b.all(h).then(function(){u()}).catch(function(B){m(B)})},function(d){m(d)})})}):c=b.reject("Invalid arguments"),w(c,a),c}var sn={_driver:"webSQLStorage",_initStorage:Qr,_support:Vr(),iterate:Jr,getItem:qr,setItem:Zr,removeItem:jr,clear:en,length:tn,key:rn,keys:nn,dropInstance:an};function cn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Jt(t,a){var n=t.name+"/";return t.storeName!==a.storeName&&(n+=t.storeName+"/"),n}function fn(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(a){return!0}}function un(){return!fn()||localStorage.length>0}function ln(t){var a=this,n={};if(t)for(var s in t)n[s]=t[s];return n.keyPrefix=Jt(t,a._defaultConfig),un()?(a._dbInfo=n,n.serializer=$e,b.resolve()):b.reject()}function mn(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var i=localStorage.key(c);i.indexOf(s)===0&&localStorage.removeItem(i)}});return w(n,t),n}function dn(t,a){var n=this;t=O(t);var s=n.ready().then(function(){var c=n._dbInfo,i=localStorage.getItem(c.keyPrefix+t);return i&&(i=c.serializer.deserialize(i)),i});return w(s,a),s}function pn(t,a){var n=this,s=n.ready().then(function(){for(var c=n._dbInfo,i=c.keyPrefix,u=i.length,m=localStorage.length,d=1,p=0;p<m;p++){var h=localStorage.key(p);if(h.indexOf(i)===0){var E=localStorage.getItem(h);if(E&&(E=c.serializer.deserialize(E)),E=t(E,h.substring(u),d++),E!==void 0)return E}}});return w(s,a),s}function hn(t,a){var n=this,s=n.ready().then(function(){var c=n._dbInfo,i;try{i=localStorage.key(t)}catch(u){i=null}return i&&(i=i.substring(c.keyPrefix.length)),i});return w(s,a),s}function vn(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo,c=localStorage.length,i=[],u=0;u<c;u++){var m=localStorage.key(u);m.indexOf(s.keyPrefix)===0&&i.push(m.substring(s.keyPrefix.length))}return i});return w(n,t),n}function bn(t){var a=this,n=a.keys().then(function(s){return s.length});return w(n,t),n}function gn(t,a){var n=this;t=O(t);var s=n.ready().then(function(){var c=n._dbInfo;localStorage.removeItem(c.keyPrefix+t)});return w(s,a),s}function yn(t,a,n){var s=this;t=O(t);var c=s.ready().then(function(){a===void 0&&(a=null);var i=a;return new b(function(u,m){var d=s._dbInfo;d.serializer.serialize(a,function(p,h){if(h)m(h);else try{localStorage.setItem(d.keyPrefix+t,p),u(i)}catch(E){(E.name==="QuotaExceededError"||E.name==="NS_ERROR_DOM_QUOTA_REACHED")&&m(E),m(E)}})})});return w(c,n),c}function En(t,a){if(a=K.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var s=this,c;return t.name?c=new b(function(i){t.storeName?i(Jt(t,s._defaultConfig)):i(t.name+"/")}).then(function(i){for(var u=localStorage.length-1;u>=0;u--){var m=localStorage.key(u);m.indexOf(i)===0&&localStorage.removeItem(m)}}):c=b.reject("Invalid arguments"),w(c,a),c}var Ln={_driver:"localStorageWrapper",_initStorage:ln,_support:cn(),iterate:pn,getItem:dn,setItem:yn,removeItem:gn,clear:mn,length:bn,key:hn,keys:vn,dropInstance:En},xn=function(a,n){return a===n||typeof a=="number"&&typeof n=="number"&&isNaN(a)&&isNaN(n)},Pn=function(a,n){for(var s=a.length,c=0;c<s;){if(xn(a[c],n))return!0;c++}return!1},Zt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},he={},jt={},fe={INDEXEDDB:Wr,WEBSQL:sn,LOCALSTORAGE:Ln},Tn=[fe.INDEXEDDB._driver,fe.WEBSQL._driver,fe.LOCALSTORAGE._driver],we=["dropInstance"],Xe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(we),wn={description:"",driver:Tn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cn(t,a){t[a]=function(){var n=arguments;return t.ready().then(function(){return t[a].apply(t,n)})}}function Ge(){for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var n in a)a.hasOwnProperty(n)&&(Zt(a[n])?arguments[0][n]=a[n].slice():arguments[0][n]=a[n])}return arguments[0]}var Mn=function(){function t(a){S(this,t);for(var n in fe)if(fe.hasOwnProperty(n)){var s=fe[n],c=s._driver;this[n]=c,he[c]||this.defineDriver(s)}this._defaultConfig=Ge({},wn),this._config=Ge({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(n){if((typeof n>"u"?"undefined":y(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in n){if(s==="storeName"&&(n[s]=n[s].replace(/\W/g,"_")),s==="version"&&typeof n[s]!="number")return new Error("Database version must be a number.");this._config[s]=n[s]}return"driver"in n&&n.driver?this.setDriver(this._config.driver):!0}else return typeof n=="string"?this._config[n]:this._config},t.prototype.defineDriver=function(n,s,c){var i=new b(function(u,m){try{var d=n._driver,p=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){m(p);return}for(var h=Xe.concat("_initStorage"),E=0,M=h.length;E<M;E++){var B=h[E],A=!Pn(we,B);if((A||n[B])&&typeof n[B]!="function"){m(p);return}}var $=function(){for(var ve=function(Rn){return function(){var In=new Error("Method "+Rn+" is not implemented by the current driver"),er=b.reject(In);return w(er,arguments[arguments.length-1]),er}},We=0,_n=we.length;We<_n;We++){var Ve=we[We];n[Ve]||(n[Ve]=ve(Ve))}};$();var F=function(ve){he[d]&&console.info("Redefining LocalForage driver: "+d),he[d]=n,jt[d]=ve,u()};"_support"in n?n._support&&typeof n._support=="function"?n._support().then(F,m):F(!!n._support):F(!0)}catch(J){m(J)}});return k(i,s,c),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(n,s,c){var i=he[n]?b.resolve(he[n]):b.reject(new Error("Driver not found."));return k(i,s,c),i},t.prototype.getSerializer=function(n){var s=b.resolve($e);return k(s,n),s},t.prototype.ready=function(n){var s=this,c=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return k(c,n,n),c},t.prototype.setDriver=function(n,s,c){var i=this;Zt(n)||(n=[n]);var u=this._getSupportedDrivers(n);function m(){i._config.driver=i.driver()}function d(E){return i._extend(E),m(),i._ready=i._initStorage(i._config),i._ready}function p(E){return function(){var M=0;function B(){for(;M<E.length;){var A=E[M];return M++,i._dbInfo=null,i._ready=null,i.getDriver(A).then(d).catch(B)}m();var $=new Error("No available storage method found.");return i._driverSet=b.reject($),i._driverSet}return B()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return b.resolve()}):b.resolve();return this._driverSet=h.then(function(){var E=u[0];return i._dbInfo=null,i._ready=null,i.getDriver(E).then(function(M){i._driver=M._driver,m(),i._wrapLibraryMethodsWithReady(),i._initDriver=p(u)})}).catch(function(){m();var E=new Error("No available storage method found.");return i._driverSet=b.reject(E),i._driverSet}),k(this._driverSet,s,c),this._driverSet},t.prototype.supports=function(n){return!!jt[n]},t.prototype._extend=function(n){Ge(this,n)},t.prototype._getSupportedDrivers=function(n){for(var s=[],c=0,i=n.length;c<i;c++){var u=n[c];this.supports(u)&&s.push(u)}return s},t.prototype._wrapLibraryMethodsWithReady=function(){for(var n=0,s=Xe.length;n<s;n++)Cn(this,Xe[n])},t.prototype.createInstance=function(n){return new t(n)},t}(),Sn=new Mn;l.exports=Sn},{"3":3}]},{},[4])(4)})});var Ye=r=>{let e=typeof r;return r!==null&&(e==="object"||e==="function")},ze=new Set(["__proto__","prototype","constructor"]),Gn=new Set("0123456789");function ir(r){let e=[],o="",f="start",l=!1;for(let L of r)switch(L){case"\\":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");l&&(o+=L),f="property",l=!l;break;case".":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="property";break}if(l){l=!1,o+=L;break}if(ze.has(o))return[];e.push(o),o="",f="property";break;case"[":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="index";break}if(l){l=!1,o+=L;break}if(f==="property"){if(ze.has(o))return[];e.push(o),o=""}f="index";break;case"]":if(f==="index"){e.push(Number.parseInt(o,10)),o="",f="indexEnd";break}if(f==="indexEnd")throw new Error("Invalid character after an index");default:if(f==="index"&&!Gn.has(L))throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");f==="start"&&(f="property"),l&&(l=!1,o+="\\"),o+=L}switch(l&&(o+="\\"),f){case"property":{if(ze.has(o))return[];e.push(o);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function sr(r,e){if(typeof e!="number"&&Array.isArray(r)){let o=Number.parseInt(e,10);return Number.isInteger(o)&&r[o]===r[e]}return!1}function Wn(r,e){if(sr(r,e))throw new Error("Cannot use string index")}function C(r,e,o){if(!Ye(r)||typeof e!="string")return o===void 0?r:o;let f=ir(e);if(f.length===0)return o;for(let l=0;l<f.length;l++){let L=f[l];if(sr(r,L)?r=l===f.length-1?void 0:null:r=r[L],r==null){if(l!==f.length-1)return o;break}}return r===void 0?o:r}function cr(r,e,o){if(!Ye(r)||typeof e!="string")return r;let f=r,l=ir(e);for(let L=0;L<l.length;L++){let y=l[L];Wn(r,y),L===l.length-1?r[y]=o:Ye(r[y])||(r[y]=typeof l[L+1]=="number"?[]:{}),r=r[y]}return f}var Ne=Xn(ur());var N=r=>document.getElementById(r),lr=(r,e)=>{if(document.visibilityState==="hidden")return!1;let o=Object.entries(e);for(let[f,l]of o)r[f]=l;return!0},x=(r,e)=>document.visibilityState==="hidden"?!1:lr(N(r),e),R=(r,e)=>document.visibilityState==="hidden"?!1:lr(N(r).style,e);var ne=(r,e)=>r.querySelector(e),Vn=(r,e)=>{let o=N("confirmationBox"),f=N("confirmWrapper"),l=ne(document,"#confirm"),L=ne(document,"#transparentBG"),y=ne(l,"#okConfirm"),S=ne(l,"#cancelConfirm");o.style.display="block",f.style.display="block",L.style.display="block",ne(l,"p").textContent=r,l.focus();let T=({target:D})=>{let z=D;return y.removeEventListener("click",T),S.removeEventListener("click",T),l.removeEventListener("keyup",U),o.style.display="none",f.style.display="none",L.style.display="none",e(z===y)},U=D=>D.key==="Enter"||D.key===" "?T({target:y}):D.key==="Escape"?T({target:S}):D.preventDefault();y.addEventListener("click",T),S.addEventListener("click",T),l.addEventListener("keyup",U)},zn=(r,e)=>{let o=N("confirmationBox"),f=N("alertWrapper"),l=ne(document,"#transparentBG"),L=ne(document,"#alert"),y=ne(L,"#okAlert");o.style.display="block",f.style.display="block",l.style.display="block",ne(L,"p").textContent=r,L.focus();let S=()=>{y.removeEventListener("click",S),L.removeEventListener("keyup",T),o.style.display="none",f.style.display="none",l.style.display="none",e(void 0)},T=U=>(U.key==="Enter"||U.key===" ")&&S();y.addEventListener("click",S),L.addEventListener("keyup",T)};var Z=r=>new Promise(e=>zn(r,e));var Me=r=>new Promise(e=>Vn(r,e));var g=(r,e=0)=>{if(r<0)return"-"+g(-r,e);if(r>=1e6){let U=Math.floor(Math.log10(r));return r/=Math.pow(10,U),g(r,2)+"e"+g(U)}let o=Math.floor(r),f=r-o,l=o.toLocaleString(),L=e>0&&r!==0,y=Math.pow(10,e)*f,S=1e-6;Math.ceil(y)-y<S&&(y=Math.ceil(y));let T=L?Math.floor(y).toString():"";if(T!==""){for(;T.length<e;)T="0"+T;T="."+T}return l+T};var ue=r=>{R("mainTab",{display:"none"}),R("upgradeTab",{display:"none"}),R("talentsTab",{display:"none"}),r==="Main"?R("mainTab",{display:"block"}):r==="Upgrades"?R("upgradeTab",{display:"block"}):r==="Talents"&&R("talentsTab",{display:"block"})},Se=(r,e)=>{e?R("progression",{backgroundColor:"gold"}):R("progression",{backgroundColor:"turquoise"}),setTimeout(()=>{R("progression",{backgroundColor:le(r)})},500),x("refresh-crit-counter",{textContent:g(r.criticalHitsThisRefresh)}),x("refresh-crit-fragments",{textContent:g(100*r.criticalHitsThisRefresh*r.coinUpgrades.barAgitation.upgradeEffect(),2)}),r.barFragments.updateHTML()},_e=r=>{R("progression",{backgroundColor:"cyan"}),setTimeout(()=>{R("progression",{backgroundColor:le(r)})},1e3),x("coinWorth",{textContent:`Worth ${g(r.coinValueCache)} coins`}),r.coinValueCache>0?R("coinWorth",{color:"gold"}):R("coinWorth",{color:"grey"}),x("refresh-crit-counter",{textContent:g(r.criticalHitsThisRefresh)}),x("refresh-counter",{textContent:g(r.refreshCount)})};var Yn=10,Re=0,Qe=0,ge=r=>{let e=0;return e+=Yn*Math.pow(r.barLevel+1,2),e*=Math.min(1,(r.barLevel+20)/40),e*=Math.max(1,1+(r.barLevel-20)/10),r.barLevel>40&&(e*=Math.pow(2,1/10*(r.barLevel-40))),r.barLevel>100&&(e*=Math.pow(2,1/10*(r.barLevel-100))),r.barLevel>200&&(e*=Math.pow(2,1/10*(r.barLevel-200))),r.barLevel%5===0&&(e*=Math.max(1,1/2*r.barLevel/10)),e},Kn=r=>{let e=0;return r.barLevel>=5&&(e=.1),r.barLevel>=10&&(e+=.9*(1-Math.pow(Math.E,-r.barLevel/200))),e>=.9999?1e4:1/(1-e)},Qn=r=>Kn(r)*(1-r.barEXP/r.barTNL),qe=(r,e)=>{if(r==null)return;let o=1;if(o+=e.coinUpgrades.barSpeed.upgradeEffect(),o*=e.barFragments.unspentBonus(),o*=Math.pow(1+e.coinUpgrades.barMomentum.upgradeEffect(),Math.sqrt(100*Math.min(1,e.barEXP/e.barTNL))),o/=Qn(e),o*=e.talents.barSpeed.talentEffect(),o*=Math.pow(1+e.coinUpgrades.barEmpowerment.upgradeEffect(),e.barLevel),Math.random()<et(e)){let L=!1;o*=e.coinUpgrades.barVibration.upgradeEffect(),e.talents.barCriticalChance.gainEXP(r),e.criticalHits+=1,e.criticalHitsThisRefresh+=1,Math.random()<e.coinUpgrades.barResonance.upgradeEffect()&&(o*=3,e.coins.gain(Math.floor(e.barLevel/5)+3),L=!0),Se(e,L)}let l=o*r;e.barEXP+=l,Re+=l,x("perSecCurr",{textContent:`+${g(Re,2)} this sec`})},se=(r,e)=>Math.min(100,.1*Math.floor(1e3*r/e)),me=r=>{R("progression",{width:`${r}%`})},le=r=>{if(r.barLevel%5===0)return r.barLevel>=320?"#FF0000":`#${(128+4*Math.floor(r.barLevel/10)).toString(16).padStart(2,"0")}0000`;if(r.barLevel>=128)return"#FFFFFF";let e=(128+r.barLevel).toString(16).padStart(2,"0"),o=(2*r.barLevel).toString(16).padStart(2,"0"),f=(128+r.barLevel).toString(16).padStart(2,"0");return`#${e}${o}${f}`},Je=r=>{r.coins.gain(r.coinValueCache),r.coinValueCache=je(r),r.barEXP-=r.barTNL,r.barLevel+=1,r.barLevel>r.highestBarLevel&&(r.highestBarLevel=r.barLevel);let e=le(r);R("progression",{backgroundColor:e}),r.barTNL=ge(r),r.barEXP/=10,r.barEXP=Math.min(r.barEXP,Math.floor(r.barTNL/10));let o=se(r.barEXP,r.barTNL);me(o),x("coinWorth",{textContent:`Worth ${g(r.coinValueCache)} coins`}),r.barFragments.updateHTML(),r.barLevel===20&&(r.talents.barCriticalChance.updateHTML("Level20"),r.talents.barSpeed.updateHTML("Level20"))},Ze=r=>{x("level",{textContent:`Level: ${r.barLevel}`}),x("exp",{textContent:`EXP: ${g(r.barEXP)}/${g(r.barTNL)}`})},mr=r=>{Qe=Re,Re=0,x("perSecPrev",{textContent:`+${g(Qe,2)} prev sec`}),r.talents.barCriticalChance.updateHTML("Time"),r.talents.barSpeed.gainEXP(Qe),r.talents.barSpeed.updateHTML("Time"),r.talents.coinGain.updateHTML("Time")},je=r=>{let e=0,o=1+r.barLevel;o>r.highestBarLevel&&(e+=3),o%5===0&&(e+=Math.floor(o/5)+3,Math.random()<.5&&o>25&&(e=0)),o%10===0&&(e+=Math.floor(o/2)),o%50===0&&(e+=Math.floor(o/2)),o%100===0&&(e+=Math.floor(o)),e>100&&(e=10*Math.pow(e,1/2)),e*=1+r.talents.coinGain.talentEffect();let f=e-Math.floor(e);Math.random()<f&&(e+=1),e=Math.floor(e);let l=N("coinWorth");return l.style.color=e>0?"gold":"grey",e},et=r=>r.coinUpgrades.barReverberation.upgradeEffect()+r.talents.barCriticalChance.talentEffect();var ye=class{constructor(e=0,o){this.amount=e;this.player=o;this.amount=e,this.updateHTML()}spend(e){this.amount>=e&&(this.amount-=e,this.updateHTML())}gain(e){this.amount+=e,this.updateHTML(),this.updateOnGain(e)}set(e){this.amount=e,this.updateHTML()}valueOf(){return{amount:this.amount}}};var tt=class extends ye{updateHTML(){x("gold-amount",{textContent:g(this.amount)})}updateOnGain(e){e>0&&this.player.talents.coinGain.gainEXP(e)}};var dr="coins",rt=(r,e)=>{var f,l;let o=(f=C(r,dr))!=null?f:C(e,dr);return new tt((l=o==null?void 0:o.amount)!=null?l:0,e)};var nt=class extends ye{updateHTML(){x("fragment-amount",{textContent:g(this.amount)}),x("fragment-bonus",{textContent:g(this.amount)}),x("fragment-gain",{textContent:g(this.getAmountOnRefresh())})}getAmountOnRefresh(){let e=this.player.barLevel,o=100*Math.pow(1.07,-5);return o*=Math.pow(1.07,e),o*=Math.pow(3,Math.floor(e/100)),o*=1+this.player.criticalHitsThisRefresh*this.player.coinUpgrades.barAgitation.upgradeEffect(),o*=1+this.player.coinUpgrades.barReinforcement.upgradeEffect()*this.player.barLevel,Math.floor(o)}unspentBonus(){return 1+1/100*this.amount}updateOnGain(){}};var pr="barFragments",ot=(r,e)=>{var f,l;let o=(f=C(r,pr))!=null?f:C(e,pr);return new nt((l=o==null?void 0:o.amount)!=null?l:0,e)};var Ee=class{constructor(e,o,f){this.level=e;this.cost=o;this.player=f}};var j=class extends Ee{constructor(e,o,f){super(e,o,f);this.updateHTML()}capLevel(){this.maxLevel!==-1&&(this.level=Math.min(this.maxLevel,this.level))}purchaseLevels(e,o){o.shiftKey&&(e=-1,e=Math.floor(this.player.coins.amount/this.cost)),this.maxLevel!==-1&&(e=Math.min(e,this.maxLevel-this.level)),this.cost*e<=this.player.coins.amount&&(this.player.coins.spend(this.cost*e),this.level+=e,this.updateHTML())}valueOf(){return{level:this.level,cost:this.cost,maxLevel:this.maxLevel}}},W={barSpeed:1,barMomentum:10,barReverberation:25,barVibration:50,barAgitation:1e4,barAdoption:250,barEmpowerment:1e4,barReinforcement:2e4,barResonance:2e3},at=class extends j{constructor(){super(...arguments);this.maxLevel=-1}upgradeEffect(){return 4*this.level/100+.06*Math.min(90,this.level)}updateHTML(){x("coin-bar-speed-effect",{textContent:`+${g(this.upgradeEffect(),2)} Progress Per Second`}),x("coin-bar-speed-name",{textContent:`Bar Speed ${g(this.level)}`})}},it=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=400;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.maxLevel===this.level?Math.pow(100,1/10)-1:(.45*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+1/200*Math.min(10,this.level))*((Math.pow(100,1/10)-1)/.5)}updateHTML(){x("coin-bar-momentum-effect",{textContent:`Up to ${g(Math.pow(1+this.upgradeEffect(),10),2)}x Progress Speed based on fill%`}),this.level===this.maxLevel?(x("coin-bar-momentum-name",{textContent:"Bar Momentum [MAX LEVEL]"}),R("coin-bar-momentum-name",{color:"orchid"})):x("coin-bar-momentum-name",{textContent:`Bar Momentum ${g(this.level)}/${g(this.maxLevel)}`})}},st=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=100;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?.01:.009*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+2e-4*Math.min(5,this.level)}updateHTML(){x("coin-bar-reverberation-effect",{textContent:`+${g(100*this.upgradeEffect(),2)}% chance to have a CRITICAL TICK`}),this.level===this.maxLevel?(x("coin-bar-reverberation-name",{textContent:"Bar Reverberation [MAX LEVEL]"}),R("coin-bar-reverberation-name",{color:"orchid"})):x("coin-bar-reverberation-name",{textContent:`Bar Reverberation ${g(this.level)}/${g(this.maxLevel)}`})}},ct=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=170;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?2e3:100+1700*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+20*Math.min(10,this.level)}updateHTML(){x("coin-bar-vibration-effect",{textContent:`CRITICAL TICKS fill up the bar ${g(this.upgradeEffect(),2)}x faster`}),this.level===this.maxLevel?(x("coin-bar-vibration-name",{textContent:"Bar Vibration [MAX LEVEL]"}),R("coin-bar-vibration-name",{color:"orchid"})):x("coin-bar-vibration-name",{textContent:`Bar Vibration ${g(this.level)}/${g(this.maxLevel)}`})}},ft=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/500}updateHTML(){x("coin-bar-agitation-effect",{textContent:`+${g(100*this.upgradeEffect(),2)}% Bar Fragments per CRIT.`}),x("coin-bar-agitation-name",{textContent:`Bar Agitation ${g(this.level)}`})}},ut=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=200;this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level/100}updateHTML(){x("coin-bar-adoption-effect",{textContent:`+${g(100*this.upgradeEffect())}% Talent EXP`}),this.level===this.maxLevel?(x("coin-bar-adoption-name",{textContent:"Bar Adoption [MAX LEVEL]"}),R("coin-bar-adoption-name",{color:"orchid"})):x("coin-bar-adoption-name",{textContent:`Bar Adoption ${g(this.level)}/${g(this.maxLevel)}`})}},lt=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=100;this.capLevel(),this.updateHTML()}upgradeEffect(){return .02*this.level/100}updateHTML(){x("coin-bar-empowerment-effect",{textContent:`+${g(100*this.upgradeEffect(),2)}% Progress Speed per bar level: (1+x)^(level)`}),this.level===this.maxLevel?(x("coin-bar-empowerment-name",{textContent:"Bar Empowerment [MAX LEVEL]"}),R("coin-bar-empowerment-name",{color:"orchid"})):x("coin-bar-empowerment-name",{textContent:`Bar Empowerment ${g(this.level)}/${g(this.maxLevel)}`})}},mt=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/1e3}updateHTML(){x("coin-bar-reinforcement-effect",{textContent:`+${g(100*this.upgradeEffect(),2)}% Bar Fragments per bar level (1 + x * level)`}),x("coin-bar-reinforcement-name",{textContent:`Bar Reinforcement ${g(this.level)}`})}},dt=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=500;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?1:1-Math.pow(Math.E,-this.level/this.expoDivisor)}updateHTML(){x("coin-bar-resonance-effect",{textContent:`On CRIT, ${g(100*this.upgradeEffect(),2)}% chance of SUPER
                             CRIT (3x damage and earn coins)`}),this.level===this.maxLevel?(x("coin-bar-resonance-name",{textContent:"Bar Resonance [MAX LEVEL]"}),R("coin-bar-resonance-name",{color:"orchid"})):x("coin-bar-resonance-name",{textContent:`Bar Resonance ${g(this.level)}/${g(this.maxLevel)}`})}};var hr="coinUpgrades.barSpeed",pt=(r,e)=>{var f,l;let o=(f=C(r,hr))!=null?f:C(e,hr);return new at((l=o==null?void 0:o.level)!=null?l:0,W.barSpeed,e)};var vr="coinUpgrades.barMomentum",ht=(r,e)=>{var f,l;let o=(f=C(r,vr))!=null?f:C(e,vr);return new it((l=o==null?void 0:o.level)!=null?l:0,W.barMomentum,e)};var br="coinUpgrades.barReverberation",vt=(r,e)=>{var f,l;let o=(f=C(r,br))!=null?f:C(e,br);return new st((l=o==null?void 0:o.level)!=null?l:0,W.barReverberation,e)};var gr="coinUpgrades.barVibration",bt=(r,e)=>{var f,l;let o=(f=C(r,gr))!=null?f:C(e,gr);return new ct((l=o==null?void 0:o.level)!=null?l:0,W.barVibration,e)};var yr="coinUpgrades.barAgitation",gt=(r,e)=>{var f,l;let o=(f=C(r,yr))!=null?f:C(e,yr);return new ft((l=o==null?void 0:o.level)!=null?l:0,W.barAgitation,e)};var Er="coinUpgrades.barAdoption",yt=(r,e)=>{var f,l;let o=(f=C(r,Er))!=null?f:C(e,Er);return new ut((l=o==null?void 0:o.level)!=null?l:0,W.barAdoption,e)};var Lr="coinUpgrades.barEmpowerment",Et=(r,e)=>{var f,l;let o=(f=C(r,Lr))!=null?f:C(e,Lr);return new lt((l=o==null?void 0:o.level)!=null?l:0,W.barEmpowerment,e)};var xr="coinUpgrades.barReinforcement",Lt=(r,e)=>{var f,l;let o=(f=C(r,xr))!=null?f:C(e,xr);return new mt((l=o==null?void 0:o.level)!=null?l:0,W.barReinforcement,e)};var Pr="coinUpgrades.barResonance",xt=(r,e)=>{var f,l;let o=(f=C(r,Pr))!=null?f:C(e,Pr);return new dt((l=o==null?void 0:o.level)!=null?l:0,W.barResonance,e)};var Tr=(r,e,o,f=1)=>Math.ceil(r*(Math.pow(o,f)-Math.pow(e,f)));var Ie=(r,e)=>{if(r==="Refresh"&&e.barLevel>=5){if(e.refreshTime<Le)return void Z(`Currently, refreshes have a ${g(Le)} second cooldown. Sorry!`);e.barFragments.set(e.barFragments.getAmountOnRefresh()),e.barEXP=0,e.barLevel=0,e.barTNL=ge(e),me(se(e.barEXP,e.barTNL)),e.barFragments.updateHTML(),e.talents.barCriticalChance.convertToPerm(),e.talents.barCriticalChance.updateHTML("Initialize"),e.talents.barSpeed.convertToPerm(),e.talents.barSpeed.updateHTML("Initialize"),e.talents.coinGain.convertToPerm(),e.talents.coinGain.updateHTML("Initialize"),e.refreshCount+=1,e.refreshTime=0,e.criticalHitsThisRefresh=0,e.coinValueCache=je(e),Se(e,!1),_e(e)}else return void Z("You cannot refresh yet. Get to level 5 lol")};var Pt=r=>r.barLevel>=20,Be=class extends Ee{constructor(e,o,f,l,L,y){super(e,o,y);this.investedFragments=f,this.permLevel=l,this.currEXP=L,this.currTNL=this.calculateTNL()}calculateTNL(){let e=Tr(this.cost,this.level,this.level+1,2),o=[50,100,200,500,1e3,2e3,5e3,1e4];for(let f of o)this.level>=f&&(e*=2);return e}setEXP(e){this.currEXP=e,this.updateHTML("GainEXP")}globalTalentEXPMultipliers(){let e=1;return e*=this.sacrificeBoost(),e*=1+this.player.coinUpgrades.barAdoption.upgradeEffect(),e}gainEXP(e){if(!Pt(this.player))return;let o=this.calculateEXPGain(e);this.currEXP+=o,this.currEXP>=this.currTNL&&this.levelUp(),this.updateHTML("GainEXP")}subEXP(e){!Pt(this.player)||(this.currEXP-=e)}levelUp(){let e=0;for(;this.currEXP>=this.currTNL&&!(e>=10);)this.level+=1,this.subEXP(this.currTNL),this.currTNL=this.calculateTNL(),e++;this.updateHTML("LevelUp")}computePermLevelGain(e){let o=0;return o+=Math.sqrt(e),o*=Math.min(4,Math.pow(this.player.refreshTime/300,2)),o=Math.min(e,o),Math.floor(o)}convertToPerm(){this.permLevel+=this.computePermLevelGain(this.level),this.level=0,this.setEXP(0),this.currTNL=this.calculateTNL(),this.updateHTML("PermLevelUp")}getBarWidth(){return Math.min(100,100*this.currEXP/this.currTNL)}sacrificeBoost(){return 1+1/100*Math.pow(Math.log2(1+this.investedFragments/4),2)}async sacrificeFragments(){if(this.player.barFragments.amount<1e3)return void Z("You cannot sacrifice your bar fragments until you have at least 1,000 of them.");if(this.player.barFragments.amount<=this.investedFragments)return void Z(`This bar needs more fragments than you can invest. You need ${g(this.investedFragments)}.`);await Me(`You will sacrifice ${g(this.player.barFragments.amount-this.investedFragments)} Bar Fragments to increase EXP gain for this bar. Will you? (automatically performs a refresh, setting your fragments to 0)`)&&(this.investedFragments=this.player.barFragments.amount,this.player.refreshTime+=Le,Ie("Refresh",this.player),this.player.barFragments.set(0),this.updateHTML("Sacrifice"))}updateHTML(e){if(this.idHTML!==void 0){if(e==="Initialize"||e==="GainEXP"||e==="LevelUp"||e==="PermLevelUp"){x(`talent${this.idHTML}EXP`,{textContent:`EXP: ${g(this.currEXP)}/${g(this.currTNL)}`});let o=`${this.getBarWidth()}%`;R(`talent${this.idHTML}Progression`,{width:o})}(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp")&&x(`talent${this.idHTML}TempLevel`,{textContent:`Level this run: ${g(this.level)}`}),(e==="Initialize"||e==="PermLevelUp")&&x(`talent${this.idHTML}PermLevel`,{textContent:`Banked levels: ${g(this.permLevel)}`}),(e==="Initialize"||e==="Time"||e==="LevelUp")&&x(`talent${this.idHTML}PermGain`,{textContent:`Banked on reset: +${g(this.computePermLevelGain(this.level))}`}),(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp"||e==="Level20")&&x(`talent${this.idHTML}Effect`,{textContent:this.displayEffect()}),(e==="Initialize"||e==="Sacrifice")&&(x(`talent${this.idHTML}SacrificeAmount`,{textContent:g(this.investedFragments)}),x(`talent${this.idHTML}SacrificeMultiplier`,{textContent:g(this.sacrificeBoost(),3)}))}}valueOf(){return{level:this.level,cost:this.cost,investedFragments:this.investedFragments,permLevel:this.permLevel,currEXP:this.currEXP,idHTML:this.idHTML}}},de={talentCriticalChance:10,talentProgressSpeed:10,talentCoinGain:1e3},Tt=class extends Be{constructor(e,o,f,l,L,y){super(e,o,f,l,L,y);this.idHTML="CriticalChance";this.updateHTML("Initialize")}calculateEXPGain(e){let o=5;return o*=e*1e3/Ae,o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Pt(this.player)?.0025*(1-Math.pow(Math.E,-this.level/2500))+.0025*Math.min(250,this.level)/250+.0025*(1-Math.pow(Math.E,-this.permLevel/4e3))+.0025*Math.min(500,this.level)/500:0}displayEffect(){return`+${g(100*this.talentEffect(),3)}% chance of CRITICAL TICK`}},wt=class extends Be{constructor(e,o,f,l,L,y){super(e,o,f,l,L,y);this.idHTML="ProgressSpeed";this.updateHTML("Initialize")}calculateEXPGain(e){let o=Math.log10(1+e);return o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return(1+this.level/25)*(1+this.permLevel/50)}displayEffect(){return`Progress Speed +${g(100*(this.talentEffect()-1),2)}%`}},Ct=class extends Be{constructor(e,o,f,l,L,y){super(e,o,f,l,L,y);this.idHTML="CoinGain";this.updateHTML("Initialize")}calculateEXPGain(e){let o=2+Math.floor(Math.pow(e,2)/100+4*e);return o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Math.min(.4,this.level/1e3)+Math.min(.4,this.permLevel/2e3)+.2*(this.level*25+this.permLevel)/(2500+this.level*25+this.permLevel)+1*(this.level*25+this.permLevel)/(5e4+this.level*25+this.permLevel)}displayEffect(){return`Progress bar grants +${g(100*this.talentEffect(),2)}% coins!`}};var wr="talents.barCriticalChance",Mt=(r,e)=>{var f,l,L,y,S;let o=(f=C(r,wr))!=null?f:C(e,wr);return new Tt((l=o==null?void 0:o.level)!=null?l:0,de.talentCriticalChance,(L=o==null?void 0:o.investedFragments)!=null?L:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(S=o==null?void 0:o.currEXP)!=null?S:0,e)};var Cr="talents.barSpeed",St=(r,e)=>{var f,l,L,y,S;let o=(f=C(r,Cr))!=null?f:C(e,Cr);return new wt((l=o==null?void 0:o.level)!=null?l:0,de.talentProgressSpeed,(L=o==null?void 0:o.investedFragments)!=null?L:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(S=o==null?void 0:o.currEXP)!=null?S:0,e)};var Mr="talents.coinGain",_t=(r,e)=>{var f,l,L,y,S;let o=(f=C(r,Mr))!=null?f:C(e,Mr);return new Ct((l=o==null?void 0:o.level)!=null?l:0,de.talentCoinGain,(L=o==null?void 0:o.investedFragments)!=null?L:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(S=o==null?void 0:o.currEXP)!=null?S:0,e)};var P={firstPlayed:new Date,barEXP:0,barTNL:0,totalEXP:0,barLevel:0,highestBarLevel:0,refreshCount:0,refreshTime:0,criticalHits:0,criticalHitsThisRefresh:0,coinValueCache:0},_r=Object.assign({},P),Jn=async r=>{let e=ar(or({},r),{coins:r.coins.valueOf(),coinUpgrades:{barSpeed:r.coinUpgrades.barSpeed.valueOf(),barMomentum:r.coinUpgrades.barMomentum.valueOf(),barReverberation:r.coinUpgrades.barReverberation.valueOf(),barVibration:r.coinUpgrades.barVibration.valueOf(),barAgitation:r.coinUpgrades.barAgitation.valueOf(),barAdoption:r.coinUpgrades.barAdoption.valueOf(),barEmpowerment:r.coinUpgrades.barEmpowerment.valueOf(),barReinforcement:r.coinUpgrades.barReinforcement.valueOf(),barResonance:r.coinUpgrades.barResonance.valueOf()},talents:{barCriticalChance:r.talents.barCriticalChance.valueOf(),barSpeed:r.talents.barSpeed.valueOf(),coinGain:r.talents.coinGain.valueOf()},barFragments:r.barFragments.valueOf()}),o=btoa(JSON.stringify(e));o!==null&&await Ne.default.setItem("UPBSave",o)},Sr=new Map([["coins",rt],["coinUpgrades.barSpeed",pt],["coinUpgrades.barMomentum",ht],["coinUpgrades.barReverberation",vt],["coinUpgrades.barVibration",bt],["coinUpgrades.barAgitation",gt],["coinUpgrades.barAdoption",yt],["coinUpgrades.barEmpowerment",Et],["coinUpgrades.barReinforcement",Lt],["coinUpgrades.barResonance",xt],["talents.barCriticalChance",Mt],["talents.barSpeed",St],["talents.coinGain",_t],["barFragments",ot]]),Zn=async()=>{let r=await Ne.default.getItem("UPBSave"),e=r?JSON.parse(atob(r)):null;if(e!==null){let o=Object.keys(e);for(let f of o)f in _r&&(Sr.has(f)||Object.defineProperty(P,f,{value:e[f]}))}for(let[o,f]of Sr)cr(P,o,f(e!=null?e:P,P))},xe=new Set,Rt=new Proxy(setInterval,{apply(r,e,o){let f=r.apply(e,o);return xe.add(f),f}}),jn=new Proxy(clearInterval,{apply(r,e,o){let f=o[0];return xe.has(f)&&xe.delete(f),r.apply(e,o)}});window.addEventListener("pagehide",()=>{window.scrollTo(0,0)});var It=0,Ae=24,eo=5e3,Bt=async()=>{for(let r of xe)jn(r);xe.clear(),await Zn(),P.barTNL=ge(P),Object.defineProperty(window,"player",{value:P}),me(se(P.barEXP,P.barTNL)),P.barFragments.updateHTML(),ue("Main"),R("progression",{backgroundColor:le(P)}),x("coinWorth",{textContent:`Worth ${g(P.coinValueCache)} coins`}),P.coinValueCache&&R("coinWorth",{color:"gold"}),It=performance.now(),Rt(to,1e3/Ae),Rt(mr,1e3,P),Rt(Jn,eo,P)},Rr=async()=>{if(await Me("Are you SURE you want to reset the game?")===!1)return Z("OK, the game hasn't been reset!");await Ne.default.removeItem("UPBSave");let e=Object.keys(P);for(let o of e){if(typeof P[o]=="object"){delete P[o];continue}Object.defineProperty(P,o,{value:_r[o]})}await Bt()},to=()=>{let e=performance.now()-It;At(e/1e3),It+=e},At=r=>{let e=r;if(e>5){let f=et(P),l=Ae*f*5,L=Math.floor(l),y=l-L,S=l*P.coinUpgrades.barResonance.upgradeEffect(),T=Math.floor(S),U=S-T;for(;e>5;){let D=Math.random(),z=0;D<y&&(z=1);let b=L+z;P.criticalHitsThisRefresh+=b;let w=Math.random(),k=0;w<U&&(k+=1);let O=T+k;for(;O>0;)P.coins.gain(Math.floor(P.barLevel/5)+3),O-=1;qe(5,P),e-=5,se(P.barEXP,P.barTNL)>=100&&Je(P),Ze(P)}}qe(e,P),P.refreshTime+=r,x("refresh-timer",{textContent:`${g(P.refreshTime,2)}s`});let o=se(P.barEXP,P.barTNL);o<100?me(o):Je(P),Ze(P)},Le=60;var Ir=r=>{N("main-tab-nav").addEventListener("click",()=>ue("Main")),N("upgrade-tab-nav").addEventListener("click",()=>ue("Upgrades")),N("talent-tab-nav").addEventListener("click",()=>ue("Talents")),N("buy-coin-bar-speed").addEventListener("click",e=>r.coinUpgrades.barSpeed.purchaseLevels(1,e)),N("buy-coin-bar-momentum").addEventListener("click",e=>r.coinUpgrades.barMomentum.purchaseLevels(1,e)),N("buy-coin-bar-reverberation").addEventListener("click",e=>r.coinUpgrades.barReverberation.purchaseLevels(1,e)),N("buy-coin-bar-vibration").addEventListener("click",e=>r.coinUpgrades.barVibration.purchaseLevels(1,e)),N("buy-coin-bar-agitation").addEventListener("click",e=>r.coinUpgrades.barAgitation.purchaseLevels(1,e)),N("buy-coin-bar-adoption").addEventListener("click",e=>r.coinUpgrades.barAdoption.purchaseLevels(1,e)),N("buy-coin-bar-empowerment").addEventListener("click",e=>r.coinUpgrades.barEmpowerment.purchaseLevels(1,e)),N("buy-coin-bar-reinforcement").addEventListener("click",e=>r.coinUpgrades.barReinforcement.purchaseLevels(1,e)),N("buy-coin-bar-resonance").addEventListener("click",e=>r.coinUpgrades.barResonance.purchaseLevels(1,e)),N("buy-reset").addEventListener("click",()=>Ie("Refresh",r)),N("reset-game").addEventListener("click",()=>void Rr()),N("simulate-time").addEventListener("click",()=>void At(3600)),N("talentCriticalChanceSacrifice").addEventListener("click",()=>void r.talents.barCriticalChance.sacrificeFragments()),N("talentProgressSpeedSacrifice").addEventListener("click",()=>void r.talents.barSpeed.sacrificeFragments()),N("talentCoinGainSacrifice").addEventListener("click",()=>void r.talents.coinGain.sacrificeFragments())};window.addEventListener("load",async()=>{var r,e;if(Ir(P),await Bt(),_e(P),typeof((r=navigator.storage)==null?void 0:r.persist)=="function"&&typeof((e=navigator.storage)==null?void 0:e.persisted)=="function"){let o=await navigator.storage.persisted();o?console.log(`Storage is persistent! (persistent = ${o})`):await navigator.storage.persist()&&Z("Data on this page is now persistent! If you do not know what this means, you can safely ignore it.")}});document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&(P.coins.updateHTML(),P.coinUpgrades.barMomentum.updateHTML(),P.coinUpgrades.barSpeed.updateHTML(),P.coinUpgrades.barReverberation.updateHTML(),P.coinUpgrades.barVibration.updateHTML(),P.coinUpgrades.barAgitation.updateHTML(),P.barFragments.updateHTML(),P.talents.barCriticalChance.updateHTML("Initialize"),P.talents.barSpeed.updateHTML("Initialize"),x("coinWorth",{textContent:`Worth ${g(P.coinValueCache)} coins`}),P.coinValueCache>0?R("coinWorth",{color:"gold"}):R("coinWorth",{color:"grey"}))});})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
//# sourceMappingURL=out.js.map
