(()=>{var Mn=Object.create;var Me=Object.defineProperty,Cn=Object.defineProperties,Sn=Object.getOwnPropertyDescriptor,_n=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertyNames,Kt=Object.getOwnPropertySymbols,Rn=Object.getPrototypeOf,qt=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable;var Qt=(r,e,o)=>e in r?Me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,Jt=(r,e)=>{for(var o in e||(e={}))qt.call(e,o)&&Qt(r,o,e[o]);if(Kt)for(var o of Kt(e))Bn.call(e,o)&&Qt(r,o,e[o]);return r},Zt=(r,e)=>Cn(r,_n(e)),An=r=>Me(r,"__esModule",{value:!0});var be=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Nn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Un=(r,e,o,f)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of In(e))!qt.call(r,l)&&(o||l!=="default")&&Me(r,l,{get:()=>e[l],enumerable:!(f=Sn(e,l))||f.enumerable});return r},Dn=(r,e)=>Un(An(Me(r!=null?Mn(Rn(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var nr=Nn((rr,Ye)=>{(function(r){if(typeof rr=="object"&&typeof Ye<"u")Ye.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,o;return function f(l,x,y){function _(H,z){if(!x[H]){if(!l[H]){var g=typeof be=="function"&&be;if(!z&&g)return g(H,!0);if(T)return T(H,!0);var w=new Error("Cannot find module '"+H+"'");throw w.code="MODULE_NOT_FOUND",w}var O=x[H]={exports:{}};l[H][0].call(O.exports,function($){var J=l[H][1][$];return _(J||$)},O,O.exports,f,l,x,y)}return x[H].exports}for(var T=typeof be=="function"&&be,D=0;D<y.length;D++)_(y[D]);return _}({1:[function(f,l,x){(function(y){"use strict";var _=y.MutationObserver||y.WebKitMutationObserver,T;if(_){var D=0,H=new _($),z=y.document.createTextNode("");H.observe(z,{characterData:!0}),T=function(){z.data=D=++D%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var g=new y.MessageChannel;g.port1.onmessage=$,T=function(){g.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?T=function(){var X=y.document.createElement("script");X.onreadystatechange=function(){$(),X.onreadystatechange=null,X.parentNode.removeChild(X),X=null},y.document.documentElement.appendChild(X)}:T=function(){setTimeout($,0)};var w,O=[];function $(){w=!0;for(var X,ee,G=O.length;G;){for(ee=O,O=[],X=-1;++X<G;)ee[X]();G=O.length}w=!1}l.exports=J;function J(X){O.push(X)===1&&!w&&T()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,l,x){"use strict";var y=f(1);function _(){}var T={},D=["REJECTED"],H=["FULFILLED"],z=["PENDING"];l.exports=g;function g(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,v!==_&&J(this,v)}g.prototype.catch=function(v){return this.then(null,v)},g.prototype.then=function(v,R){if(typeof v!="function"&&this.state===H||typeof R!="function"&&this.state===D)return this;var C=new this.constructor(_);if(this.state!==z){var N=this.state===H?v:R;O(C,N,this.outcome)}else this.queue.push(new w(C,v,R));return C};function w(v,R,C){this.promise=v,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(v){T.resolve(this.promise,v)},w.prototype.otherCallFulfilled=function(v){O(this.promise,this.onFulfilled,v)},w.prototype.callRejected=function(v){T.reject(this.promise,v)},w.prototype.otherCallRejected=function(v){O(this.promise,this.onRejected,v)};function O(v,R,C){y(function(){var N;try{N=R(C)}catch(V){return T.reject(v,V)}N===v?T.reject(v,new TypeError("Cannot resolve promise with itself")):T.resolve(v,N)})}T.resolve=function(v,R){var C=X($,R);if(C.status==="error")return T.reject(v,C.value);var N=C.value;if(N)J(v,N);else{v.state=H,v.outcome=R;for(var V=-1,Y=v.queue.length;++V<Y;)v.queue[V].callFulfilled(R)}return v},T.reject=function(v,R){v.state=D,v.outcome=R;for(var C=-1,N=v.queue.length;++C<N;)v.queue[C].callRejected(R);return v};function $(v){var R=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof R=="function")return function(){R.apply(v,arguments)}}function J(v,R){var C=!1;function N(Q){C||(C=!0,T.reject(v,Q))}function V(Q){C||(C=!0,T.resolve(v,Q))}function Y(){R(V,N)}var K=X(Y);K.status==="error"&&N(K.value)}function X(v,R){var C={};try{C.value=v(R),C.status="success"}catch(N){C.status="error",C.value=N}return C}g.resolve=ee;function ee(v){return v instanceof this?v:T.resolve(new this(_),v)}g.reject=G;function G(v){var R=new this(_);return T.reject(R,v)}g.all=Ne;function Ne(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,N=!1;if(!C)return this.resolve([]);for(var V=new Array(C),Y=0,K=-1,Q=new this(_);++K<C;)te(v[K],K);return Q;function te(pe,Te){R.resolve(pe).then(Ue,function(se){N||(N=!0,T.reject(Q,se))});function Ue(se){V[Te]=se,++Y===C&&!N&&(N=!0,T.resolve(Q,V))}}}g.race=ie;function ie(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,N=!1;if(!C)return this.resolve([]);for(var V=-1,Y=new this(_);++V<C;)K(v[V]);return Y;function K(Q){R.resolve(Q).then(function(te){N||(N=!0,T.resolve(Y,te))},function(te){N||(N=!0,T.reject(Y,te))})}}},{"1":1}],3:[function(f,l,x){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=f(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(f,l,x){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function T(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(t){return}}var D=T();function H(){try{if(!D||!D.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(n){return!1}}function z(t,a){t=t||[],a=a||{};try{return new Blob(t,a)}catch(i){if(i.name!=="TypeError")throw i;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,s=new n,c=0;c<t.length;c+=1)s.append(t[c]);return s.getBlob(a.type)}}typeof Promise>"u"&&f(3);var g=Promise;function w(t,a){a&&t.then(function(n){a(null,n)},function(n){a(n)})}function O(t,a,n){typeof a=="function"&&t.then(a),typeof n=="function"&&t.catch(n)}function $(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function J(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var X="local-forage-detect-blob-support",ee=void 0,G={},Ne=Object.prototype.toString,ie="readonly",v="readwrite";function R(t){for(var a=t.length,n=new ArrayBuffer(a),s=new Uint8Array(n),c=0;c<a;c++)s[c]=t.charCodeAt(c);return n}function C(t){return new g(function(a){var n=t.transaction(X,v),s=z([""]);n.objectStore(X).put(s,"key"),n.onabort=function(c){c.preventDefault(),c.stopPropagation(),a(!1)},n.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);a(i||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function N(t){return typeof ee=="boolean"?g.resolve(ee):C(t).then(function(a){return ee=a,ee})}function V(t){var a=G[t.name],n={};n.promise=new g(function(s,c){n.resolve=s,n.reject=c}),a.deferredOperations.push(n),a.dbReady?a.dbReady=a.dbReady.then(function(){return n.promise}):a.dbReady=n.promise}function Y(t){var a=G[t.name],n=a.deferredOperations.pop();if(n)return n.resolve(),n.promise}function K(t,a){var n=G[t.name],s=n.deferredOperations.pop();if(s)return s.reject(a),s.promise}function Q(t,a){return new g(function(n,s){if(G[t.name]=G[t.name]||St(),t.db)if(a)V(t),t.db.close();else return n(t.db);var c=[t.name];a&&c.push(t.version);var i=D.open.apply(D,c);a&&(i.onupgradeneeded=function(u){var d=i.result;try{d.createObjectStore(t.storeName),u.oldVersion<=1&&d.createObjectStore(X)}catch(m){if(m.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw m}}),i.onerror=function(u){u.preventDefault(),s(i.error)},i.onsuccess=function(){var u=i.result;u.onversionchange=function(d){d.target.close()},n(u),Y(t)}})}function te(t){return Q(t,!1)}function pe(t){return Q(t,!0)}function Te(t,a){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),s=t.version<t.db.version,c=t.version>t.db.version;if(s&&(t.version!==a&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),c||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function Ue(t){return new g(function(a,n){var s=new FileReader;s.onerror=n,s.onloadend=function(c){var i=btoa(c.target.result||"");a({__local_forage_encoded_blob:!0,data:i,type:t.type})},s.readAsBinaryString(t)})}function se(t){var a=R(atob(t.data));return z([a],{type:t.type})}function Ct(t){return t&&t.__local_forage_encoded_blob}function Mr(t){var a=this,n=a._initReady().then(function(){var s=G[a._dbInfo.name];if(s&&s.dbReady)return s.dbReady});return O(n,t,t),n}function Cr(t){V(t);for(var a=G[t.name],n=a.forages,s=0;s<n.length;s++){var c=n[s];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return t.db=null,te(t).then(function(i){return t.db=i,Te(t)?pe(t):i}).then(function(i){t.db=a.db=i;for(var u=0;u<n.length;u++)n[u]._dbInfo.db=i}).catch(function(i){throw K(t,i),i})}function re(t,a,n,s){s===void 0&&(s=1);try{var c=t.db.transaction(t.storeName,a);n(null,c)}catch(i){if(s>0&&(!t.db||i.name==="InvalidStateError"||i.name==="NotFoundError"))return g.resolve().then(function(){if(!t.db||i.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),pe(t)}).then(function(){return Cr(t).then(function(){re(t,a,n,s-1)})}).catch(n);n(i)}}function St(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Sr(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=t[s];var c=G[n.name];c||(c=St(),G[n.name]=c),c.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=Mr);var i=[];function u(){return g.resolve()}for(var d=0;d<c.forages.length;d++){var m=c.forages[d];m!==a&&i.push(m._initReady().catch(u))}var p=c.forages.slice(0);return g.all(i).then(function(){return n.db=c.db,te(n)}).then(function(h){return n.db=h,Te(n,a._defaultConfig.version)?pe(n):h}).then(function(h){n.db=c.db=h,a._dbInfo=n;for(var E=0;E<p.length;E++){var M=p[E];M!==a&&(M._dbInfo.db=n.db,M._dbInfo.version=n.version)}})}function _r(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,d){if(u)return i(u);try{var m=d.objectStore(n._dbInfo.storeName),p=m.get(t);p.onsuccess=function(){var h=p.result;h===void 0&&(h=null),Ct(h)&&(h=se(h)),c(h)},p.onerror=function(){i(p.error)}}catch(h){i(h)}})}).catch(i)});return w(s,a),s}function Ir(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,ie,function(u,d){if(u)return i(u);try{var m=d.objectStore(n._dbInfo.storeName),p=m.openCursor(),h=1;p.onsuccess=function(){var E=p.result;if(E){var M=E.value;Ct(M)&&(M=se(M));var B=t(M,E.key,h++);B!==void 0?c(B):E.continue()}else c()},p.onerror=function(){i(p.error)}}catch(E){i(E)}})}).catch(i)});return w(s,a),s}function Rr(t,a,n){var s=this;t=$(t);var c=new g(function(i,u){var d;s.ready().then(function(){return d=s._dbInfo,Ne.call(a)==="[object Blob]"?N(d.db).then(function(m){return m?a:Ue(a)}):a}).then(function(m){re(s._dbInfo,v,function(p,h){if(p)return u(p);try{var E=h.objectStore(s._dbInfo.storeName);m===null&&(m=void 0);var M=E.put(m,t);h.oncomplete=function(){m===void 0&&(m=null),i(m)},h.onabort=h.onerror=function(){var B=M.error?M.error:M.transaction.error;u(B)}}catch(B){u(B)}})}).catch(u)});return w(c,n),c}function Br(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){re(n._dbInfo,v,function(u,d){if(u)return i(u);try{var m=d.objectStore(n._dbInfo.storeName),p=m.delete(t);d.oncomplete=function(){c()},d.onerror=function(){i(p.error)},d.onabort=function(){var h=p.error?p.error:p.transaction.error;i(h)}}catch(h){i(h)}})}).catch(i)});return w(s,a),s}function Ar(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,v,function(i,u){if(i)return c(i);try{var d=u.objectStore(a._dbInfo.storeName),m=d.clear();u.oncomplete=function(){s()},u.onabort=u.onerror=function(){var p=m.error?m.error:m.transaction.error;c(p)}}catch(p){c(p)}})}).catch(c)});return w(n,t),n}function Nr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var d=u.objectStore(a._dbInfo.storeName),m=d.count();m.onsuccess=function(){s(m.result)},m.onerror=function(){c(m.error)}}catch(p){c(p)}})}).catch(c)});return w(n,t),n}function Ur(t,a){var n=this,s=new g(function(c,i){if(t<0){c(null);return}n.ready().then(function(){re(n._dbInfo,ie,function(u,d){if(u)return i(u);try{var m=d.objectStore(n._dbInfo.storeName),p=!1,h=m.openKeyCursor();h.onsuccess=function(){var E=h.result;if(!E){c(null);return}t===0||p?c(E.key):(p=!0,E.advance(t))},h.onerror=function(){i(h.error)}}catch(E){i(E)}})}).catch(i)});return w(s,a),s}function Dr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){re(a._dbInfo,ie,function(i,u){if(i)return c(i);try{var d=u.objectStore(a._dbInfo.storeName),m=d.openKeyCursor(),p=[];m.onsuccess=function(){var h=m.result;if(!h){s(p);return}p.push(h.key),h.continue()},m.onerror=function(){c(m.error)}}catch(h){c(h)}})}).catch(c)});return w(n,t),n}function Hr(t,a){a=J.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;if(!t.name)c=g.reject("Invalid arguments");else{var i=t.name===n.name&&s._dbInfo.db,u=i?g.resolve(s._dbInfo.db):te(t).then(function(d){var m=G[t.name],p=m.forages;m.db=d;for(var h=0;h<p.length;h++)p[h]._dbInfo.db=d;return d});t.storeName?c=u.then(function(d){if(!!d.objectStoreNames.contains(t.storeName)){var m=d.version+1;V(t);var p=G[t.name],h=p.forages;d.close();for(var E=0;E<h.length;E++){var M=h[E];M._dbInfo.db=null,M._dbInfo.version=m}var B=new g(function(A,F){var k=D.open(t.name,m);k.onerror=function(q){var ve=k.result;ve.close(),F(q)},k.onupgradeneeded=function(){var q=k.result;q.deleteObjectStore(t.storeName)},k.onsuccess=function(){var q=k.result;q.close(),A(q)}});return B.then(function(A){p.db=A;for(var F=0;F<h.length;F++){var k=h[F];k._dbInfo.db=A,Y(k._dbInfo)}}).catch(function(A){throw(K(t,A)||g.resolve()).catch(function(){}),A})}}):c=u.then(function(d){V(t);var m=G[t.name],p=m.forages;d.close();for(var h=0;h<p.length;h++){var E=p[h];E._dbInfo.db=null}var M=new g(function(B,A){var F=D.deleteDatabase(t.name);F.onerror=function(){var k=F.result;k&&k.close(),A(F.error)},F.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},F.onsuccess=function(){var k=F.result;k&&k.close(),B(k)}});return M.then(function(B){m.db=B;for(var A=0;A<p.length;A++){var F=p[A];Y(F._dbInfo)}}).catch(function(B){throw(K(t,B)||g.resolve()).catch(function(){}),B})})}return w(c,a),c}var kr={_driver:"asyncStorage",_initStorage:Sr,_support:H(),iterate:Ir,getItem:_r,setItem:Rr,removeItem:Br,clear:Ar,length:Nr,key:Ur,keys:Dr,dropInstance:Hr};function Or(){return typeof openDatabase=="function"}var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fr="~~local_forage_type~",_t=/^~~local_forage_type~([^~]+)~/,Pe="__lfsc__:",De=Pe.length,He="arbf",ke="blob",It="si08",Rt="ui08",Bt="uic8",At="si16",Nt="si32",Ut="ur16",Dt="ui32",Ht="fl32",kt="fl64",Ot=De+He.length,Ft=Object.prototype.toString;function $t(t){var a=t.length*.75,n=t.length,s,c=0,i,u,d,m;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);var p=new ArrayBuffer(a),h=new Uint8Array(p);for(s=0;s<n;s+=4)i=oe.indexOf(t[s]),u=oe.indexOf(t[s+1]),d=oe.indexOf(t[s+2]),m=oe.indexOf(t[s+3]),h[c++]=i<<2|u>>4,h[c++]=(u&15)<<4|d>>2,h[c++]=(d&3)<<6|m&63;return p}function Oe(t){var a=new Uint8Array(t),n="",s;for(s=0;s<a.length;s+=3)n+=oe[a[s]>>2],n+=oe[(a[s]&3)<<4|a[s+1]>>4],n+=oe[(a[s+1]&15)<<2|a[s+2]>>6],n+=oe[a[s+2]&63];return a.length%3===2?n=n.substring(0,n.length-1)+"=":a.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function $r(t,a){var n="";if(t&&(n=Ft.call(t)),t&&(n==="[object ArrayBuffer]"||t.buffer&&Ft.call(t.buffer)==="[object ArrayBuffer]")){var s,c=Pe;t instanceof ArrayBuffer?(s=t,c+=He):(s=t.buffer,n==="[object Int8Array]"?c+=It:n==="[object Uint8Array]"?c+=Rt:n==="[object Uint8ClampedArray]"?c+=Bt:n==="[object Int16Array]"?c+=At:n==="[object Uint16Array]"?c+=Ut:n==="[object Int32Array]"?c+=Nt:n==="[object Uint32Array]"?c+=Dt:n==="[object Float32Array]"?c+=Ht:n==="[object Float64Array]"?c+=kt:a(new Error("Failed to get type for BinaryArray"))),a(c+Oe(s))}else if(n==="[object Blob]"){var i=new FileReader;i.onload=function(){var u=Fr+t.type+"~"+Oe(this.result);a(Pe+ke+u)},i.readAsArrayBuffer(t)}else try{a(JSON.stringify(t))}catch(u){console.error("Couldn't convert value into a JSON string: ",t),a(null,u)}}function Xr(t){if(t.substring(0,De)!==Pe)return JSON.parse(t);var a=t.substring(Ot),n=t.substring(De,Ot),s;if(n===ke&&_t.test(a)){var c=a.match(_t);s=c[1],a=a.substring(c[0].length)}var i=$t(a);switch(n){case He:return i;case ke:return z([i],{type:s});case It:return new Int8Array(i);case Rt:return new Uint8Array(i);case Bt:return new Uint8ClampedArray(i);case At:return new Int16Array(i);case Ut:return new Uint16Array(i);case Nt:return new Int32Array(i);case Dt:return new Uint32Array(i);case Ht:return new Float32Array(i);case kt:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var Fe={serialize:$r,deserialize:Xr,stringToBuffer:$t,bufferToString:Oe};function Xt(t,a,n,s){t.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,s)}function Gr(t){var a=this,n={db:null};if(t)for(var s in t)n[s]=typeof t[s]!="string"?t[s].toString():t[s];var c=new g(function(i,u){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(d){return u(d)}n.db.transaction(function(d){Xt(d,n,function(){a._dbInfo=n,i()},function(m,p){u(p)})},u)});return n.serializer=Fe,c}function ae(t,a,n,s,c,i){t.executeSql(n,s,c,function(u,d){d.code===d.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(m,p){p.rows.length?i(m,d):Xt(m,a,function(){m.executeSql(n,s,c,i)},i)},i):i(u,d)},i)}function Wr(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(d){ae(d,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[t],function(m,p){var h=p.rows.length?p.rows.item(0).value:null;h&&(h=u.serializer.deserialize(h)),c(h)},function(m,p){i(p)})})}).catch(i)});return w(s,a),s}function Vr(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(d){ae(d,u,"SELECT * FROM "+u.storeName,[],function(m,p){for(var h=p.rows,E=h.length,M=0;M<E;M++){var B=h.item(M),A=B.value;if(A&&(A=u.serializer.deserialize(A)),A=t(A,B.key,M+1),A!==void 0){c(A);return}}c()},function(m,p){i(p)})})}).catch(i)});return w(s,a),s}function Gt(t,a,n,s){var c=this;t=$(t);var i=new g(function(u,d){c.ready().then(function(){a===void 0&&(a=null);var m=a,p=c._dbInfo;p.serializer.serialize(a,function(h,E){E?d(E):p.db.transaction(function(M){ae(M,p,"INSERT OR REPLACE INTO "+p.storeName+" (key, value) VALUES (?, ?)",[t,h],function(){u(m)},function(B,A){d(A)})},function(M){if(M.code===M.QUOTA_ERR){if(s>0){u(Gt.apply(c,[t,m,n,s-1]));return}d(M)}})})}).catch(d)});return w(i,n),i}function zr(t,a,n){return Gt.apply(this,[t,a,n,1])}function Yr(t,a){var n=this;t=$(t);var s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(d){ae(d,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[t],function(){c()},function(m,p){i(p)})})}).catch(i)});return w(s,a),s}function Kr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"DELETE FROM "+i.storeName,[],function(){s()},function(d,m){c(m)})})}).catch(c)});return w(n,t),n}function Qr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(d,m){var p=m.rows.item(0).c;s(p)},function(d,m){c(m)})})}).catch(c)});return w(n,t),n}function qr(t,a){var n=this,s=new g(function(c,i){n.ready().then(function(){var u=n._dbInfo;u.db.transaction(function(d){ae(d,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[t+1],function(m,p){var h=p.rows.length?p.rows.item(0).key:null;c(h)},function(m,p){i(p)})})}).catch(i)});return w(s,a),s}function Jr(t){var a=this,n=new g(function(s,c){a.ready().then(function(){var i=a._dbInfo;i.db.transaction(function(u){ae(u,i,"SELECT key FROM "+i.storeName,[],function(d,m){for(var p=[],h=0;h<m.rows.length;h++)p.push(m.rows.item(h).key);s(p)},function(d,m){c(m)})})}).catch(c)});return w(n,t),n}function Zr(t){return new g(function(a,n){t.transaction(function(s){s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,i){for(var u=[],d=0;d<i.rows.length;d++)u.push(i.rows.item(d).name);a({db:t,storeNames:u})},function(c,i){n(i)})},function(s){n(s)})})}function jr(t,a){a=J.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;return t.name?c=new g(function(i){var u;t.name===n.name?u=s._dbInfo.db:u=openDatabase(t.name,"","",0),t.storeName?i({db:u,storeNames:[t.storeName]}):i(Zr(u))}).then(function(i){return new g(function(u,d){i.db.transaction(function(m){function p(B){return new g(function(A,F){m.executeSql("DROP TABLE IF EXISTS "+B,[],function(){A()},function(k,q){F(q)})})}for(var h=[],E=0,M=i.storeNames.length;E<M;E++)h.push(p(i.storeNames[E]));g.all(h).then(function(){u()}).catch(function(B){d(B)})},function(m){d(m)})})}):c=g.reject("Invalid arguments"),w(c,a),c}var en={_driver:"webSQLStorage",_initStorage:Gr,_support:Or(),iterate:Vr,getItem:Wr,setItem:zr,removeItem:Yr,clear:Kr,length:Qr,key:qr,keys:Jr,dropInstance:jr};function tn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Wt(t,a){var n=t.name+"/";return t.storeName!==a.storeName&&(n+=t.storeName+"/"),n}function rn(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(a){return!0}}function nn(){return!rn()||localStorage.length>0}function on(t){var a=this,n={};if(t)for(var s in t)n[s]=t[s];return n.keyPrefix=Wt(t,a._defaultConfig),nn()?(a._dbInfo=n,n.serializer=Fe,g.resolve()):g.reject()}function an(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var i=localStorage.key(c);i.indexOf(s)===0&&localStorage.removeItem(i)}});return w(n,t),n}function sn(t,a){var n=this;t=$(t);var s=n.ready().then(function(){var c=n._dbInfo,i=localStorage.getItem(c.keyPrefix+t);return i&&(i=c.serializer.deserialize(i)),i});return w(s,a),s}function cn(t,a){var n=this,s=n.ready().then(function(){for(var c=n._dbInfo,i=c.keyPrefix,u=i.length,d=localStorage.length,m=1,p=0;p<d;p++){var h=localStorage.key(p);if(h.indexOf(i)===0){var E=localStorage.getItem(h);if(E&&(E=c.serializer.deserialize(E)),E=t(E,h.substring(u),m++),E!==void 0)return E}}});return w(s,a),s}function fn(t,a){var n=this,s=n.ready().then(function(){var c=n._dbInfo,i;try{i=localStorage.key(t)}catch(u){i=null}return i&&(i=i.substring(c.keyPrefix.length)),i});return w(s,a),s}function un(t){var a=this,n=a.ready().then(function(){for(var s=a._dbInfo,c=localStorage.length,i=[],u=0;u<c;u++){var d=localStorage.key(u);d.indexOf(s.keyPrefix)===0&&i.push(d.substring(s.keyPrefix.length))}return i});return w(n,t),n}function ln(t){var a=this,n=a.keys().then(function(s){return s.length});return w(n,t),n}function dn(t,a){var n=this;t=$(t);var s=n.ready().then(function(){var c=n._dbInfo;localStorage.removeItem(c.keyPrefix+t)});return w(s,a),s}function mn(t,a,n){var s=this;t=$(t);var c=s.ready().then(function(){a===void 0&&(a=null);var i=a;return new g(function(u,d){var m=s._dbInfo;m.serializer.serialize(a,function(p,h){if(h)d(h);else try{localStorage.setItem(m.keyPrefix+t,p),u(i)}catch(E){(E.name==="QuotaExceededError"||E.name==="NS_ERROR_DOM_QUOTA_REACHED")&&d(E),d(E)}})})});return w(c,n),c}function pn(t,a){if(a=J.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var s=this,c;return t.name?c=new g(function(i){t.storeName?i(Wt(t,s._defaultConfig)):i(t.name+"/")}).then(function(i){for(var u=localStorage.length-1;u>=0;u--){var d=localStorage.key(u);d.indexOf(i)===0&&localStorage.removeItem(d)}}):c=g.reject("Invalid arguments"),w(c,a),c}var hn={_driver:"localStorageWrapper",_initStorage:on,_support:tn(),iterate:cn,getItem:sn,setItem:mn,removeItem:dn,clear:an,length:ln,key:fn,keys:un,dropInstance:pn},vn=function(a,n){return a===n||typeof a=="number"&&typeof n=="number"&&isNaN(a)&&isNaN(n)},bn=function(a,n){for(var s=a.length,c=0;c<s;){if(vn(a[c],n))return!0;c++}return!1},Vt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},he={},zt={},ce={INDEXEDDB:kr,WEBSQL:en,LOCALSTORAGE:hn},gn=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],we=["dropInstance"],$e=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(we),yn={description:"",driver:gn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function En(t,a){t[a]=function(){var n=arguments;return t.ready().then(function(){return t[a].apply(t,n)})}}function Xe(){for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var n in a)a.hasOwnProperty(n)&&(Vt(a[n])?arguments[0][n]=a[n].slice():arguments[0][n]=a[n])}return arguments[0]}var Ln=function(){function t(a){_(this,t);for(var n in ce)if(ce.hasOwnProperty(n)){var s=ce[n],c=s._driver;this[n]=c,he[c]||this.defineDriver(s)}this._defaultConfig=Xe({},yn),this._config=Xe({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(n){if((typeof n>"u"?"undefined":y(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in n){if(s==="storeName"&&(n[s]=n[s].replace(/\W/g,"_")),s==="version"&&typeof n[s]!="number")return new Error("Database version must be a number.");this._config[s]=n[s]}return"driver"in n&&n.driver?this.setDriver(this._config.driver):!0}else return typeof n=="string"?this._config[n]:this._config},t.prototype.defineDriver=function(n,s,c){var i=new g(function(u,d){try{var m=n._driver,p=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){d(p);return}for(var h=$e.concat("_initStorage"),E=0,M=h.length;E<M;E++){var B=h[E],A=!bn(we,B);if((A||n[B])&&typeof n[B]!="function"){d(p);return}}var F=function(){for(var ve=function(Pn){return function(){var wn=new Error("Method "+Pn+" is not implemented by the current driver"),Yt=g.reject(wn);return w(Yt,arguments[arguments.length-1]),Yt}},Ge=0,Tn=we.length;Ge<Tn;Ge++){var We=we[Ge];n[We]||(n[We]=ve(We))}};F();var k=function(ve){he[m]&&console.info("Redefining LocalForage driver: "+m),he[m]=n,zt[m]=ve,u()};"_support"in n?n._support&&typeof n._support=="function"?n._support().then(k,d):k(!!n._support):k(!0)}catch(q){d(q)}});return O(i,s,c),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(n,s,c){var i=he[n]?g.resolve(he[n]):g.reject(new Error("Driver not found."));return O(i,s,c),i},t.prototype.getSerializer=function(n){var s=g.resolve(Fe);return O(s,n),s},t.prototype.ready=function(n){var s=this,c=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return O(c,n,n),c},t.prototype.setDriver=function(n,s,c){var i=this;Vt(n)||(n=[n]);var u=this._getSupportedDrivers(n);function d(){i._config.driver=i.driver()}function m(E){return i._extend(E),d(),i._ready=i._initStorage(i._config),i._ready}function p(E){return function(){var M=0;function B(){for(;M<E.length;){var A=E[M];return M++,i._dbInfo=null,i._ready=null,i.getDriver(A).then(m).catch(B)}d();var F=new Error("No available storage method found.");return i._driverSet=g.reject(F),i._driverSet}return B()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=h.then(function(){var E=u[0];return i._dbInfo=null,i._ready=null,i.getDriver(E).then(function(M){i._driver=M._driver,d(),i._wrapLibraryMethodsWithReady(),i._initDriver=p(u)})}).catch(function(){d();var E=new Error("No available storage method found.");return i._driverSet=g.reject(E),i._driverSet}),O(this._driverSet,s,c),this._driverSet},t.prototype.supports=function(n){return!!zt[n]},t.prototype._extend=function(n){Xe(this,n)},t.prototype._getSupportedDrivers=function(n){for(var s=[],c=0,i=n.length;c<i;c++){var u=n[c];this.supports(u)&&s.push(u)}return s},t.prototype._wrapLibraryMethodsWithReady=function(){for(var n=0,s=$e.length;n<s;n++)En(this,$e[n])},t.prototype.createInstance=function(n){return new t(n)},t}(),xn=new Ln;l.exports=xn},{"3":3}]},{},[4])(4)})});var ze=r=>{let e=typeof r;return r!==null&&(e==="object"||e==="function")},Ve=new Set(["__proto__","prototype","constructor"]),Hn=new Set("0123456789");function jt(r){let e=[],o="",f="start",l=!1;for(let x of r)switch(x){case"\\":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");l&&(o+=x),f="property",l=!l;break;case".":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="property";break}if(l){l=!1,o+=x;break}if(Ve.has(o))return[];e.push(o),o="",f="property";break;case"[":if(f==="index")throw new Error("Invalid character in an index");if(f==="indexEnd"){f="index";break}if(l){l=!1,o+=x;break}if(f==="property"){if(Ve.has(o))return[];e.push(o),o=""}f="index";break;case"]":if(f==="index"){e.push(Number.parseInt(o,10)),o="",f="indexEnd";break}if(f==="indexEnd")throw new Error("Invalid character after an index");default:if(f==="index"&&!Hn.has(x))throw new Error("Invalid character in an index");if(f==="indexEnd")throw new Error("Invalid character after an index");f==="start"&&(f="property"),l&&(l=!1,o+="\\"),o+=x}switch(l&&(o+="\\"),f){case"property":{if(Ve.has(o))return[];e.push(o);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function er(r,e){if(typeof e!="number"&&Array.isArray(r)){let o=Number.parseInt(e,10);return Number.isInteger(o)&&r[o]===r[e]}return!1}function kn(r,e){if(er(r,e))throw new Error("Cannot use string index")}function S(r,e,o){if(!ze(r)||typeof e!="string")return o===void 0?r:o;let f=jt(e);if(f.length===0)return o;for(let l=0;l<f.length;l++){let x=f[l];if(er(r,x)?r=l===f.length-1?void 0:null:r=r[x],r==null){if(l!==f.length-1)return o;break}}return r===void 0?o:r}function tr(r,e,o){if(!ze(r)||typeof e!="string")return r;let f=r,l=jt(e);for(let x=0;x<l.length;x++){let y=l[x];kn(r,y),x===l.length-1?r[y]=o:ze(r[y])||(r[y]=typeof l[x+1]=="number"?[]:{}),r=r[y]}return f}var Ae=Dn(nr());var U=r=>document.getElementById(r),or=(r,e)=>{if(document.visibilityState==="hidden")return!1;let o=Object.entries(e);for(let[f,l]of o)r[f]=l;return!0},L=(r,e)=>document.visibilityState==="hidden"?!1:or(U(r),e),I=(r,e)=>document.visibilityState==="hidden"?!1:or(U(r).style,e);var ne=(r,e)=>r.querySelector(e),On=(r,e)=>{let o=U("confirmationBox"),f=U("confirmWrapper"),l=ne(document,"#confirm"),x=ne(document,"#transparentBG"),y=ne(l,"#okConfirm"),_=ne(l,"#cancelConfirm");o.style.display="block",f.style.display="block",x.style.display="block",ne(l,"p").textContent=r,l.focus();let T=({target:H})=>{let z=H;return y.removeEventListener("click",T),_.removeEventListener("click",T),l.removeEventListener("keyup",D),o.style.display="none",f.style.display="none",x.style.display="none",e(z===y)},D=H=>H.key==="Enter"||H.key===" "?T({target:y}):H.key==="Escape"?T({target:_}):H.preventDefault();y.addEventListener("click",T),_.addEventListener("click",T),l.addEventListener("keyup",D)},Fn=(r,e)=>{let o=U("confirmationBox"),f=U("alertWrapper"),l=ne(document,"#transparentBG"),x=ne(document,"#alert"),y=ne(x,"#okAlert");o.style.display="block",f.style.display="block",l.style.display="block",ne(x,"p").textContent=r,x.focus();let _=()=>{y.removeEventListener("click",_),x.removeEventListener("keyup",T),o.style.display="none",f.style.display="none",l.style.display="none",e(void 0)},T=D=>(D.key==="Enter"||D.key===" ")&&_();y.addEventListener("click",_),x.addEventListener("keyup",T)};var Z=r=>new Promise(e=>Fn(r,e));var Ce=r=>new Promise(e=>On(r,e));var b=(r,e=0)=>{if(r<0)return"-"+b(-r,e);if(r>=1e6){let D=Math.floor(Math.log10(r));return r/=Math.pow(10,D),b(r,2)+"e"+b(D)}let o=Math.floor(r),f=r-o,l=o.toLocaleString(),x=e>0&&r!==0,y=Math.pow(10,e)*f,_=1e-6;Math.ceil(y)-y<_&&(y=Math.ceil(y));let T=x?Math.floor(y).toString():"";if(T!==""){for(;T.length<e;)T="0"+T;T="."+T}return l+T};var ge=class{constructor(e=0,o){this.amount=e;this.player=o;this.amount=e,this.updateHTML()}spend(e){this.amount>=e&&(this.amount-=e,this.updateHTML())}gain(e){this.amount+=e,this.updateHTML(),this.updateOnGain(e)}set(e){this.amount=e,this.updateHTML()}valueOf(){return{amount:this.amount}}};var Ke=class extends ge{updateHTML(){L("gold-amount",{textContent:b(this.amount)})}updateOnGain(e){e>0&&this.player.talents.coinGain.gainEXP(e)}};var Qe=class extends ge{updateHTML(){L("fragment-amount",{textContent:b(this.amount)}),L("fragment-bonus",{textContent:b(this.amount)}),L("fragment-gain",{textContent:b(this.getAmountOnRefresh())})}getAmountOnRefresh(){let e=this.player.barLevel,o=100*Math.pow(1.07,-5);return o*=Math.pow(1.07,e),o*=Math.pow(3,Math.floor(e/100)),o*=1+this.player.criticalHitsThisRefresh*this.player.coinUpgrades.barAgitation.upgradeEffect(),o*=1+this.player.coinUpgrades.barReinforcement.upgradeEffect()*this.player.barLevel,Math.floor(o)}unspentBonus(){return 1+1/100*this.amount}updateOnGain(){}};var fe=r=>{I("mainTab",{display:"none"}),I("upgradeTab",{display:"none"}),I("talentsTab",{display:"none"}),r==="Main"?I("mainTab",{display:"block"}):r==="Upgrades"?I("upgradeTab",{display:"block"}):r==="Talents"&&I("talentsTab",{display:"block"})},Se=(r,e)=>{e?I("progression",{backgroundColor:"gold"}):I("progression",{backgroundColor:"turquoise"}),setTimeout(()=>{I("progression",{backgroundColor:ue(r)})},500),L("refresh-crit-counter",{textContent:b(r.criticalHitsThisRefresh)}),L("refresh-crit-fragments",{textContent:b(100*r.criticalHitsThisRefresh*r.coinUpgrades.barAgitation.upgradeEffect(),2)}),r.barFragments.updateHTML()},_e=r=>{I("progression",{backgroundColor:"cyan"}),setTimeout(()=>{I("progression",{backgroundColor:ue(r)})},1e3),L("coinWorth",{textContent:`Worth ${b(r.coinValueCache)} coins`}),r.coinValueCache>0?I("coinWorth",{color:"gold"}):I("coinWorth",{color:"grey"}),L("refresh-crit-counter",{textContent:b(r.criticalHitsThisRefresh)}),L("refresh-counter",{textContent:b(r.refreshCount)})};var $n=10,Ie=0,qe=0,ye=r=>{let e=0;return e+=$n*Math.pow(r.barLevel+1,2),e*=Math.min(1,(r.barLevel+20)/40),e*=Math.max(1,1+(r.barLevel-20)/10),r.barLevel>40&&(e*=Math.pow(2,1/10*(r.barLevel-40))),r.barLevel>100&&(e*=Math.pow(2,1/10*(r.barLevel-100))),r.barLevel>200&&(e*=Math.pow(2,1/10*(r.barLevel-200))),r.barLevel%5===0&&(e*=Math.max(1,1/2*r.barLevel/10)),e},Xn=r=>{let e=0;return r.barLevel>=5&&(e=.1),r.barLevel>=10&&(e+=.9*(1-Math.pow(Math.E,-r.barLevel/200))),e>=.9999?1e4:1/(1-e)},Gn=r=>Xn(r)*(1-r.barEXP/r.barTNL),ar=(r,e)=>{if(r==null)return;let o=1;o+=e.coinUpgrades.barSpeed.upgradeEffect(),o*=e.barFragments.unspentBonus(),o*=Math.pow(1+e.coinUpgrades.barMomentum.upgradeEffect(),Math.sqrt(100*Math.min(1,e.barEXP/e.barTNL))),o/=Gn(e),o*=e.talents.barSpeed.talentEffect(),o*=Math.pow(1+e.coinUpgrades.barEmpowerment.upgradeEffect(),e.barLevel);let f=Math.random(),l=e.coinUpgrades.barReverberation.upgradeEffect()+e.talents.barCriticalChance.talentEffect();if(f<l){let y=!1;o*=e.coinUpgrades.barVibration.upgradeEffect(),e.talents.barCriticalChance.gainEXP(r),e.criticalHits+=1,e.criticalHitsThisRefresh+=1,Math.random()<e.coinUpgrades.barResonance.upgradeEffect()&&(o*=3,e.coins.gain(2+Math.floor(e.coinValueCache/5)-2*Math.min(1,e.coinValueCache)),y=!0),console.log(y),Se(e,y)}let x=o*r;e.barEXP+=x,Ie+=x,L("perSecCurr",{textContent:`+${b(Ie,2)} this sec`})},le=(r,e)=>Math.min(100,.1*Math.floor(1e3*r/e)),de=r=>{I("progression",{width:`${r}%`})},ue=r=>{if(r.barLevel%5===0)return console.log("testing!!!!"),r.barLevel>=320?"#FF0000":`#${(128+4*Math.floor(r.barLevel/10)).toString(16).padStart(2,"0")}0000`;if(r.barLevel>=128)return"#FFFFFF";let e=(128+r.barLevel).toString(16).padStart(2,"0"),o=(2*r.barLevel).toString(16).padStart(2,"0"),f=(128+r.barLevel).toString(16).padStart(2,"0");return`#${e}${o}${f}`},ir=r=>{r.coins.gain(r.coinValueCache),r.coinValueCache=Je(r),r.barEXP-=r.barTNL,r.barLevel+=1,r.barLevel>r.highestBarLevel&&(r.highestBarLevel=r.barLevel);let e=ue(r);I("progression",{backgroundColor:e}),r.barTNL=ye(r),r.barEXP/=10,r.barEXP=Math.min(r.barEXP,Math.floor(r.barTNL/10));let o=le(r.barEXP,r.barTNL);de(o),L("coinWorth",{textContent:`Worth ${b(r.coinValueCache)} coins`}),r.barFragments.updateHTML(),r.barLevel===20&&(r.talents.barCriticalChance.updateHTML("Level20"),r.talents.barSpeed.updateHTML("Level20"))},sr=r=>{L("level",{textContent:`Level: ${r.barLevel}`}),L("exp",{textContent:`EXP: ${b(r.barEXP)}/${b(r.barTNL)}`})},cr=r=>{qe=Ie,Ie=0,L("perSecPrev",{textContent:`+${b(qe,2)} prev sec`}),r.talents.barCriticalChance.updateHTML("Time"),r.talents.barSpeed.gainEXP(qe),r.talents.barSpeed.updateHTML("Time"),r.talents.coinGain.updateHTML("Time")},Je=r=>{let e=0,o=1+r.barLevel;o>r.highestBarLevel&&(e+=3),o%5===0&&(e+=Math.floor(o/5)+3,Math.random()<.5&&o>25&&(e=0)),o%10===0&&(e+=Math.floor(o/2)),o%50===0&&(e+=Math.floor(o/2)),o%100===0&&(e+=Math.floor(o)),e>100&&(e=10*Math.pow(e,1/2)),e*=1+r.talents.coinGain.talentEffect();let f=e-Math.floor(e);Math.random()<f&&(e+=1),e=Math.floor(e);let l=U("coinWorth");return l.style.color=e>0?"gold":"grey",e};var Ee=class{constructor(e,o,f){this.level=e;this.cost=o;this.player=f}};var j=class extends Ee{constructor(e,o,f){super(e,o,f);this.updateHTML()}capLevel(){this.maxLevel!==-1&&(this.level=Math.min(this.maxLevel,this.level))}purchaseLevels(e,o){o.shiftKey&&(e=-1,e=Math.floor(this.player.coins.amount/this.cost)),this.maxLevel!==-1&&(e=Math.min(e,this.maxLevel-this.level)),this.cost*e<=this.player.coins.amount&&(this.player.coins.spend(this.cost*e),this.level+=e,this.updateHTML())}valueOf(){return{level:this.level,cost:this.cost,maxLevel:this.maxLevel}}},W={barSpeed:1,barMomentum:10,barReverberation:25,barVibration:50,barAgitation:1e4,barAdoption:250,barEmpowerment:1e4,barReinforcement:2e4,barResonance:2e3},Ze=class extends j{constructor(){super(...arguments);this.maxLevel=-1}upgradeEffect(){return 4*this.level/100+.06*Math.min(90,this.level)}updateHTML(){L("coin-bar-speed-effect",{textContent:`+${b(this.upgradeEffect(),2)} Progress Per Second`}),L("coin-bar-speed-name",{textContent:`Bar Speed ${b(this.level)}`})}},je=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=400;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.maxLevel===this.level?Math.pow(100,1/10)-1:(.45*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+1/200*Math.min(10,this.level))*((Math.pow(100,1/10)-1)/.5)}updateHTML(){L("coin-bar-momentum-effect",{textContent:`Up to ${b(Math.pow(1+this.upgradeEffect(),10),2)}x Progress Speed based on fill%`}),this.level===this.maxLevel?(L("coin-bar-momentum-name",{textContent:"Bar Momentum [MAX LEVEL]"}),I("coin-bar-momentum-name",{color:"orchid"})):L("coin-bar-momentum-name",{textContent:`Bar Momentum ${b(this.level)}/${b(this.maxLevel)}`})}},et=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=100;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?.01:.009*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+2e-4*Math.min(5,this.level)}updateHTML(){L("coin-bar-reverberation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% chance to have a CRITICAL TICK`}),this.level===this.maxLevel?(L("coin-bar-reverberation-name",{textContent:"Bar Reverberation [MAX LEVEL]"}),I("coin-bar-reverberation-name",{color:"orchid"})):L("coin-bar-reverberation-name",{textContent:`Bar Reverberation ${b(this.level)}/${b(this.maxLevel)}`})}},tt=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=170;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?2e3:100+1700*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+20*Math.min(10,this.level)}updateHTML(){L("coin-bar-vibration-effect",{textContent:`CRITICAL TICKS fill up the bar ${b(this.upgradeEffect(),2)}x faster`}),this.level===this.maxLevel?(L("coin-bar-vibration-name",{textContent:"Bar Vibration [MAX LEVEL]"}),I("coin-bar-vibration-name",{color:"orchid"})):L("coin-bar-vibration-name",{textContent:`Bar Vibration ${b(this.level)}/${b(this.maxLevel)}`})}},rt=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/500}updateHTML(){L("coin-bar-agitation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per CRIT`}),L("coin-bar-agitation-name",{textContent:`Bar Agitation ${b(this.level)}`})}},nt=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=200;this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level/100}updateHTML(){L("coin-bar-adoption-effect",{textContent:`+${b(100*this.upgradeEffect())}% Talent EXP`}),this.level===this.maxLevel?(L("coin-bar-adoption-name",{textContent:"Bar Adoption [MAX LEVEL]"}),I("coin-bar-adoption-name",{color:"orchid"})):L("coin-bar-adoption-name",{textContent:`Bar Adoption ${b(this.level)}/${b(this.maxLevel)}`})}},ot=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=20;this.capLevel(),this.updateHTML()}upgradeEffect(){return .02*this.level/200}updateHTML(){L("coin-bar-empowerment-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Progress Speed per bar level: (1+x)^(level)`}),this.level===this.maxLevel?(L("coin-bar-empowerment-name",{textContent:"Bar Empowerment [MAX LEVEL]"}),I("coin-bar-empowerment-name",{color:"orchid"})):L("coin-bar-empowerment-name",{textContent:`Bar Empowerment ${b(this.level)}/${b(this.maxLevel)}`})}},at=class extends j{constructor(e,o,f){super(e,o,f);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.level/1e3}updateHTML(){L("coin-bar-reinforcement-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per bar level (1 + x * level)`}),L("coin-bar-reinforcement-name",{textContent:`Bar Reinforcement ${b(this.level)}`})}},it=class extends j{constructor(e,o,f){super(e,o,f);this.expoDivisor=500;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?1:1-Math.pow(Math.E,-this.level/this.expoDivisor)}updateHTML(){L("coin-bar-resonance-effect",{textContent:`On CRIT, ${b(100*this.upgradeEffect(),2)}% chance of SUPER
                             CRIT (3x damage and earn coins)`}),this.level===this.maxLevel?(L("coin-bar-resonance-name",{textContent:"Bar Resonance [MAX LEVEL]"}),I("coin-bar-resonance-name",{color:"orchid"})):L("coin-bar-resonance-name",{textContent:`Bar Resonance ${b(this.level)}/${b(this.maxLevel)}`})}};var fr="coinUpgrades.barSpeed",st=(r,e)=>{var f,l;let o=(f=S(r,fr))!=null?f:S(e,fr);return new Ze((l=o==null?void 0:o.level)!=null?l:0,W.barSpeed,e)};var ur="coinUpgrades.barMomentum",ct=(r,e)=>{var f,l;let o=(f=S(r,ur))!=null?f:S(e,ur);return new je((l=o==null?void 0:o.level)!=null?l:0,W.barMomentum,e)};var lr="coinUpgrades.barReverberation",ft=(r,e)=>{var f,l;let o=(f=S(r,lr))!=null?f:S(e,lr);return new et((l=o==null?void 0:o.level)!=null?l:0,W.barReverberation,e)};var dr="coinUpgrades.barVibration",ut=(r,e)=>{var f,l;let o=(f=S(r,dr))!=null?f:S(e,dr);return new tt((l=o==null?void 0:o.level)!=null?l:0,W.barVibration,e)};var mr="coinUpgrades.barAgitation",lt=(r,e)=>{var f,l;let o=(f=S(r,mr))!=null?f:S(e,mr);return new rt((l=o==null?void 0:o.level)!=null?l:0,W.barAgitation,e)};var pr="coinUpgrades.barAdoption",dt=(r,e)=>{var f,l;let o=(f=S(r,pr))!=null?f:S(e,pr);return new nt((l=o==null?void 0:o.level)!=null?l:0,W.barAdoption,e)};var hr="coinUpgrades.barEmpowerment",mt=(r,e)=>{var f,l;let o=(f=S(r,hr))!=null?f:S(e,hr);return new ot((l=o==null?void 0:o.level)!=null?l:0,W.barEmpowerment,e)};var vr="coinUpgrades.barReinforcement",pt=(r,e)=>{var f,l;let o=(f=S(r,vr))!=null?f:S(e,vr);return new at((l=o==null?void 0:o.level)!=null?l:0,W.barReinforcement,e)};var br="coinUpgrades.barResonance",ht=(r,e)=>{var f,l;let o=(f=S(r,br))!=null?f:S(e,br);return new it((l=o==null?void 0:o.level)!=null?l:0,W.barResonance,e)};var gr=(r,e,o,f=1)=>Math.ceil(r*(Math.pow(o,f)-Math.pow(e,f)));var Re=(r,e)=>{if(r==="Refresh"&&e.barLevel>=5){if(e.refreshTime<Le)return void Z(`Currently, refreshes have a ${b(Le)} second cooldown. Sorry!`);e.barFragments.set(e.barFragments.getAmountOnRefresh()),e.barEXP=0,e.barLevel=0,e.barTNL=ye(e),de(le(e.barEXP,e.barTNL)),e.barFragments.updateHTML(),e.talents.barCriticalChance.convertToPerm(),e.talents.barCriticalChance.updateHTML("Initialize"),e.talents.barSpeed.convertToPerm(),e.talents.barSpeed.updateHTML("Initialize"),e.talents.coinGain.convertToPerm(),e.talents.coinGain.updateHTML("Initialize"),e.refreshCount+=1,e.refreshTime=0,e.criticalHitsThisRefresh=0,e.coinValueCache=Je(e),Se(e,!1),_e(e)}else return void Z("You cannot refresh yet. Get to level 5 lol")};var vt=r=>r.barLevel>=20,Be=class extends Ee{constructor(e,o,f,l,x,y){super(e,o,y);this.investedFragments=f,this.permLevel=l,this.currEXP=x,this.currTNL=this.calculateTNL()}calculateTNL(){let e=gr(this.cost,this.level,this.level+1,2),o=[50,100,200,500,1e3,2e3,5e3,1e4];for(let f of o)this.level>=f&&(e*=2);return e}setEXP(e){this.currEXP=e,this.updateHTML("GainEXP")}globalTalentEXPMultipliers(){let e=1;return e*=this.sacrificeBoost(),e*=1+this.player.coinUpgrades.barAdoption.upgradeEffect(),e}gainEXP(e){if(!vt(this.player))return;let o=this.calculateEXPGain(e);this.currEXP+=o,this.currEXP>=this.currTNL&&this.levelUp(),this.updateHTML("GainEXP")}subEXP(e){!vt(this.player)||(this.currEXP-=e)}levelUp(){let e=0;for(;this.currEXP>=this.currTNL&&!(e>=10);)this.level+=1,this.subEXP(this.currTNL),this.currTNL=this.calculateTNL(),e++;this.updateHTML("LevelUp")}computePermLevelGain(e){let o=0;return o+=Math.sqrt(e),o*=Math.min(4,Math.pow(this.player.refreshTime/300,2)),o=Math.min(e,o),Math.floor(o)}convertToPerm(){this.permLevel+=this.computePermLevelGain(this.level),this.level=0,this.setEXP(0),this.currTNL=this.calculateTNL(),this.updateHTML("PermLevelUp")}getBarWidth(){return Math.min(100,100*this.currEXP/this.currTNL)}sacrificeBoost(){return 1+1/100*Math.pow(Math.log2(1+this.investedFragments/4),2)}async sacrificeFragments(){if(this.player.barFragments.amount<1e3)return void Z("You cannot sacrifice your bar fragments until you have at least 1,000 of them.");if(this.player.barFragments.amount<=this.investedFragments)return void Z(`This bar needs more fragments than you can invest. You need ${b(this.investedFragments)}.`);await Ce(`You will sacrifice ${b(this.player.barFragments.amount-this.investedFragments)} Bar Fragments to increase EXP gain for this bar. Will you? (automatically performs a refresh, setting your fragments to 0)`)&&(this.investedFragments=this.player.barFragments.amount,this.player.refreshTime+=Le,Re("Refresh",this.player),this.player.barFragments.set(0),this.updateHTML("Sacrifice"))}updateHTML(e){if(this.idHTML!==void 0){if(e==="Initialize"||e==="GainEXP"||e==="LevelUp"||e==="PermLevelUp"){L(`talent${this.idHTML}EXP`,{textContent:`EXP: ${b(this.currEXP)}/${b(this.currTNL)}`});let o=`${this.getBarWidth()}%`;I(`talent${this.idHTML}Progression`,{width:o})}(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp")&&L(`talent${this.idHTML}TempLevel`,{textContent:`Level this run: ${b(this.level)}`}),(e==="Initialize"||e==="PermLevelUp")&&L(`talent${this.idHTML}PermLevel`,{textContent:`Banked levels: ${b(this.permLevel)}`}),(e==="Initialize"||e==="Time"||e==="LevelUp")&&L(`talent${this.idHTML}PermGain`,{textContent:`Banked on reset: +${b(this.computePermLevelGain(this.level))}`}),(e==="Initialize"||e==="LevelUp"||e==="PermLevelUp"||e==="Level20")&&L(`talent${this.idHTML}Effect`,{textContent:this.displayEffect()}),(e==="Initialize"||e==="Sacrifice")&&(L(`talent${this.idHTML}SacrificeAmount`,{textContent:b(this.investedFragments)}),L(`talent${this.idHTML}SacrificeMultiplier`,{textContent:b(this.sacrificeBoost(),3)}))}}valueOf(){return{level:this.level,cost:this.cost,investedFragments:this.investedFragments,permLevel:this.permLevel,currEXP:this.currEXP,idHTML:this.idHTML}}},me={talentCriticalChance:10,talentProgressSpeed:10,talentCoinGain:1e3},bt=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="CriticalChance";this.updateHTML("Initialize")}calculateEXPGain(e){let o=5;return o*=e*1e3/Et,o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return vt(this.player)?.0025*(1-Math.pow(Math.E,-this.level/2500))+.0025*Math.min(250,this.level)/250+.0025*(1-Math.pow(Math.E,-this.permLevel/4e3))+.0025*Math.min(500,this.level)/500:0}displayEffect(){return`+${b(100*this.talentEffect(),3)}% chance of CRITICAL TICK`}},gt=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="ProgressSpeed";this.updateHTML("Initialize")}calculateEXPGain(e){let o=Math.log10(1+e);return o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return(1+this.level/25)*(1+this.permLevel/50)}displayEffect(){return`Progress Speed +${b(100*(this.talentEffect()-1),2)}%`}},yt=class extends Be{constructor(e,o,f,l,x,y){super(e,o,f,l,x,y);this.idHTML="CoinGain";this.updateHTML("Initialize")}calculateEXPGain(e){let o=2+Math.floor(Math.pow(e,2)/100+4*e);return o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Math.min(.4,this.level/1e3)+Math.min(.4,this.permLevel/2e3)+.2*(this.level*25+this.permLevel)/(2500+this.level*25+this.permLevel)+1*(this.level*25+this.permLevel)/(5e4+this.level*25+this.permLevel)}displayEffect(){return`Progress bar grants +${b(100*this.talentEffect(),2)}% coins!`}};var yr="talents.barCriticalChance",Lt=(r,e)=>{var f,l,x,y,_;let o=(f=S(r,yr))!=null?f:S(e,yr);return new bt((l=o==null?void 0:o.level)!=null?l:0,me.talentCriticalChance,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var Er="talents.barSpeed",xt=(r,e)=>{var f,l,x,y,_;let o=(f=S(r,Er))!=null?f:S(e,Er);return new gt((l=o==null?void 0:o.level)!=null?l:0,me.talentProgressSpeed,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var Lr="talents.coinGain",Tt=(r,e)=>{var f,l,x,y,_;let o=(f=S(r,Lr))!=null?f:S(e,Lr);return new yt((l=o==null?void 0:o.level)!=null?l:0,me.talentCoinGain,(x=o==null?void 0:o.investedFragments)!=null?x:0,(y=o==null?void 0:o.permLevel)!=null?y:0,(_=o==null?void 0:o.currEXP)!=null?_:0,e)};var P={firstPlayed:new Date,barEXP:0,barTNL:0,totalEXP:0,barLevel:0,highestBarLevel:0,refreshCount:0,refreshTime:0,criticalHits:0,criticalHitsThisRefresh:0,coinValueCache:0},Tr=Object.assign({},P),Vn=async r=>{let e=Zt(Jt({},r),{coins:r.coins.valueOf(),coinUpgrades:{barSpeed:r.coinUpgrades.barSpeed.valueOf(),barMomentum:r.coinUpgrades.barMomentum.valueOf(),barReverberation:r.coinUpgrades.barReverberation.valueOf(),barVibration:r.coinUpgrades.barVibration.valueOf(),barAgitation:r.coinUpgrades.barAgitation.valueOf(),barAdoption:r.coinUpgrades.barAdoption.valueOf(),barEmpowerment:r.coinUpgrades.barEmpowerment.valueOf(),barReinforcement:r.coinUpgrades.barReinforcement.valueOf(),barResonance:r.coinUpgrades.barResonance.valueOf()},talents:{barCriticalChance:r.talents.barCriticalChance.valueOf(),barSpeed:r.talents.barSpeed.valueOf(),coinGain:r.talents.coinGain.valueOf()},barFragments:r.barFragments.valueOf()}),o=btoa(JSON.stringify(e));o!==null&&await Ae.default.setItem("UPBSave",o)},xr=new Map([["coins",(r,e)=>{var o,f;return new Ke(Number((f=(o=r.coins)==null?void 0:o.amount)!=null?f:0),e)}],["coinUpgrades.barSpeed",st],["coinUpgrades.barMomentum",ct],["coinUpgrades.barReverberation",ft],["coinUpgrades.barVibration",ut],["coinUpgrades.barAgitation",lt],["coinUpgrades.barAdoption",dt],["coinUpgrades.barEmpowerment",mt],["coinUpgrades.barReinforcement",pt],["coinUpgrades.barResonance",ht],["talents.barCriticalChance",Lt],["talents.barSpeed",xt],["talents.coinGain",Tt],["barFragments",(r,e)=>{var o,f;return new Qe(Number((f=(o=r.barFragments)==null?void 0:o.amount)!=null?f:0),e)}]]),zn=async()=>{let r=await Ae.default.getItem("UPBSave"),e=r?JSON.parse(atob(r)):null;if(e!==null){let o=Object.keys(e);for(let f of o)f in Tr&&(xr.has(f)||Object.defineProperty(P,f,{value:e[f]}))}for(let[o,f]of xr)tr(P,o,f(e!=null?e:P,P))},xe=new Set,Pt=new Proxy(setInterval,{apply(r,e,o){let f=r.apply(e,o);return xe.add(f),f}}),Yn=new Proxy(clearInterval,{apply(r,e,o){let f=o[0];return xe.has(f)&&xe.delete(f),r.apply(e,o)}});window.addEventListener("pagehide",()=>{window.scrollTo(0,0)});var wt=0,Et=24,Kn=5e3,Mt=async()=>{for(let r of xe)Yn(r);xe.clear(),await zn(),P.barTNL=ye(P),Object.defineProperty(window,"player",{value:P}),de(le(P.barEXP,P.barTNL)),P.barFragments.updateHTML(),fe("Main"),I("progression",{backgroundColor:ue(P)}),L("coinWorth",{textContent:`Worth ${b(P.coinValueCache)} coins`}),P.coinValueCache&&I("coinWorth",{color:"gold"}),wt=performance.now(),Pt(Qn,1e3/Et),Pt(cr,1e3,P),Pt(Vn,Kn,P)},Pr=async()=>{if(await Ce("Are you SURE you want to reset the game?")===!1)return Z("OK, the game hasn't been reset!");await Ae.default.removeItem("UPBSave");let e=Object.keys(P);for(let o of e){if(typeof P[o]=="object"){delete P[o];continue}Object.defineProperty(P,o,{value:Tr[o]})}await Mt()},Qn=()=>{let e=performance.now()-wt;qn(e/1e3),wt+=e},qn=r=>{ar(r,P),P.refreshTime+=r,L("refresh-timer",{textContent:`${b(P.refreshTime,2)}s`});let e=le(P.barEXP,P.barTNL);e<100?de(e):ir(P),sr(P)},Le=60;var wr=r=>{U("main-tab-nav").addEventListener("click",()=>fe("Main")),U("upgrade-tab-nav").addEventListener("click",()=>fe("Upgrades")),U("talent-tab-nav").addEventListener("click",()=>fe("Talents")),U("buy-coin-bar-speed").addEventListener("click",e=>r.coinUpgrades.barSpeed.purchaseLevels(1,e)),U("buy-coin-bar-momentum").addEventListener("click",e=>r.coinUpgrades.barMomentum.purchaseLevels(1,e)),U("buy-coin-bar-reverberation").addEventListener("click",e=>r.coinUpgrades.barReverberation.purchaseLevels(1,e)),U("buy-coin-bar-vibration").addEventListener("click",e=>r.coinUpgrades.barVibration.purchaseLevels(1,e)),U("buy-coin-bar-agitation").addEventListener("click",e=>r.coinUpgrades.barAgitation.purchaseLevels(1,e)),U("buy-coin-bar-adoption").addEventListener("click",e=>r.coinUpgrades.barAdoption.purchaseLevels(1,e)),U("buy-coin-bar-empowerment").addEventListener("click",e=>r.coinUpgrades.barEmpowerment.purchaseLevels(1,e)),U("buy-coin-bar-reinforcement").addEventListener("click",e=>r.coinUpgrades.barReinforcement.purchaseLevels(1,e)),U("buy-coin-bar-resonance").addEventListener("click",e=>r.coinUpgrades.barResonance.purchaseLevels(1,e)),U("buy-reset").addEventListener("click",()=>Re("Refresh",r)),U("reset-game").addEventListener("click",()=>void Pr()),U("talentCriticalChanceSacrifice").addEventListener("click",()=>void r.talents.barCriticalChance.sacrificeFragments()),U("talentProgressSpeedSacrifice").addEventListener("click",()=>void r.talents.barSpeed.sacrificeFragments()),U("talentCoinGainSacrifice").addEventListener("click",()=>void r.talents.coinGain.sacrificeFragments())};window.addEventListener("load",async()=>{var r,e;if(wr(P),await Mt(),_e(P),typeof((r=navigator.storage)==null?void 0:r.persist)=="function"&&typeof((e=navigator.storage)==null?void 0:e.persisted)=="function"){let o=await navigator.storage.persisted();o?console.log(`Storage is persistent! (persistent = ${o})`):await navigator.storage.persist()&&Z("Data on this page is now persistent! If you do not know what this means, you can safely ignore it.")}});document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&(P.coins.updateHTML(),P.coinUpgrades.barMomentum.updateHTML(),P.coinUpgrades.barSpeed.updateHTML(),P.coinUpgrades.barReverberation.updateHTML(),P.coinUpgrades.barVibration.updateHTML(),P.coinUpgrades.barAgitation.updateHTML(),P.barFragments.updateHTML(),P.talents.barCriticalChance.updateHTML("Initialize"),P.talents.barSpeed.updateHTML("Initialize"),L("coinWorth",{textContent:`Worth ${b(P.coinValueCache)} coins`}),P.coinValueCache>0?I("coinWorth",{color:"gold"}):I("coinWorth",{color:"grey"}))});})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
//# sourceMappingURL=out.js.map
