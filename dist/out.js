"use strict";(()=>{var na=Object.create;var Lt=Object.defineProperty,aa=Object.defineProperties,oa=Object.getOwnPropertyDescriptor,ia=Object.getOwnPropertyDescriptors,sa=Object.getOwnPropertyNames,Tr=Object.getOwnPropertySymbols,ca=Object.getPrototypeOf,Pr=Object.prototype.hasOwnProperty,la=Object.prototype.propertyIsEnumerable;var Sr=(r,e,t)=>e in r?Lt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,oe=(r,e)=>{for(var t in e||(e={}))Pr.call(e,t)&&Sr(r,t,e[t]);if(Tr)for(var t of Tr(e))la.call(e,t)&&Sr(r,t,e[t]);return r},Lr=(r,e)=>aa(r,ia(e));var Re=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var ua=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var fa=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of sa(e))!Pr.call(r,u)&&u!==t&&Lt(r,u,{get:()=>e[u],enumerable:!(o=oa(e,u))||o.enumerable});return r};var ma=(r,e,t)=>(t=r!=null?na(ca(r)):{},fa(e||!r||!r.__esModule?Lt(t,"default",{value:r,enumerable:!0}):t,r));var Ar=ua((wr,Rt)=>{(function(r){if(typeof wr=="object"&&typeof Rt<"u")Rt.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function o(u,b,E){function M(N,Y){if(!b[N]){if(!u[N]){var C=typeof Re=="function"&&Re;if(!Y&&C)return C(N,!0);if(P)return P(N,!0);var R=new Error("Cannot find module '"+N+"'");throw R.code="MODULE_NOT_FOUND",R}var $=b[N]={exports:{}};u[N][0].call($.exports,function(U){var J=u[N][1][U];return M(J||U)},$,$.exports,o,u,b,E)}return b[N].exports}for(var P=typeof Re=="function"&&Re,_=0;_<E.length;_++)M(E[_]);return M}({1:[function(o,u,b){(function(E){"use strict";var M=E.MutationObserver||E.WebKitMutationObserver,P;if(M){var _=0,N=new M(U),Y=E.document.createTextNode("");N.observe(Y,{characterData:!0}),P=function(){Y.data=_=++_%2}}else if(!E.setImmediate&&typeof E.MessageChannel<"u"){var C=new E.MessageChannel;C.port1.onmessage=U,P=function(){C.port2.postMessage(0)}}else"document"in E&&"onreadystatechange"in E.document.createElement("script")?P=function(){var G=E.document.createElement("script");G.onreadystatechange=function(){U(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},E.document.documentElement.appendChild(G)}:P=function(){setTimeout(U,0)};var R,$=[];function U(){R=!0;for(var G,re,X=$.length;X;){for(re=$,$=[],G=-1;++G<X;)re[G]();X=$.length}R=!1}u.exports=J;function J(G){$.push(G)===1&&!R&&P()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(o,u,b){"use strict";var E=o(1);function M(){}var P={},_=["REJECTED"],N=["FULFILLED"],Y=["PENDING"];u.exports=C;function C(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=Y,this.queue=[],this.outcome=void 0,y!==M&&J(this,y)}C.prototype.catch=function(y){return this.then(null,y)},C.prototype.then=function(y,H){if(typeof y!="function"&&this.state===N||typeof H!="function"&&this.state===_)return this;var I=new this.constructor(M);if(this.state!==Y){var k=this.state===N?y:H;$(I,k,this.outcome)}else this.queue.push(new R(I,y,H));return I};function R(y,H,I){this.promise=y,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}R.prototype.callFulfilled=function(y){P.resolve(this.promise,y)},R.prototype.otherCallFulfilled=function(y){$(this.promise,this.onFulfilled,y)},R.prototype.callRejected=function(y){P.reject(this.promise,y)},R.prototype.otherCallRejected=function(y){$(this.promise,this.onRejected,y)};function $(y,H,I){E(function(){var k;try{k=H(I)}catch(K){return P.reject(y,K)}k===y?P.reject(y,new TypeError("Cannot resolve promise with itself")):P.resolve(y,k)})}P.resolve=function(y,H){var I=G(U,H);if(I.status==="error")return P.reject(y,I.value);var k=I.value;if(k)J(y,k);else{y.state=N,y.outcome=H;for(var K=-1,q=y.queue.length;++K<q;)y.queue[K].callFulfilled(H)}return y},P.reject=function(y,H){y.state=_,y.outcome=H;for(var I=-1,k=y.queue.length;++I<k;)y.queue[I].callRejected(H);return y};function U(y){var H=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof H=="function")return function(){H.apply(y,arguments)}}function J(y,H){var I=!1;function k(j){I||(I=!0,P.reject(y,j))}function K(j){I||(I=!0,P.resolve(y,j))}function q(){H(K,k)}var Z=G(q);Z.status==="error"&&k(Z.value)}function G(y,H){var I={};try{I.value=y(H),I.status="success"}catch(k){I.status="error",I.value=k}return I}C.resolve=re;function re(y){return y instanceof this?y:P.resolve(new this(M),y)}C.reject=X;function X(y){var H=new this(M);return P.reject(H,y)}C.all=dt;function dt(y){var H=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=y.length,k=!1;if(!I)return this.resolve([]);for(var K=new Array(I),q=0,Z=-1,j=new this(M);++Z<I;)ne(y[Z],Z);return j;function ne(Le,_e){H.resolve(Le).then(pt,function(de){k||(k=!0,P.reject(j,de))});function pt(de){K[_e]=de,++q===I&&!k&&(k=!0,P.resolve(j,K))}}}C.race=fe;function fe(y){var H=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=y.length,k=!1;if(!I)return this.resolve([]);for(var K=-1,q=new this(M);++K<I;)Z(y[K]);return q;function Z(j){H.resolve(j).then(function(ne){k||(k=!0,P.resolve(q,ne))},function(ne){k||(k=!0,P.reject(q,ne))})}}},{1:1}],3:[function(o,u,b){(function(E){"use strict";typeof E.Promise!="function"&&(E.Promise=o(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(o,u,b){"use strict";var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function M(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function P(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(n){return}}var _=P();function N(){try{if(!_||!_.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(a){return!1}}function Y(n,i){n=n||[],i=i||{};try{return new Blob(n,i)}catch(s){if(s.name!=="TypeError")throw s;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,c=new a,l=0;l<n.length;l+=1)c.append(n[l]);return c.getBlob(i.type)}}typeof Promise>"u"&&o(3);var C=Promise;function R(n,i){i&&n.then(function(a){i(null,a)},function(a){i(a)})}function $(n,i,a){typeof i=="function"&&n.then(i),typeof a=="function"&&n.catch(a)}function U(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function J(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var G="local-forage-detect-blob-support",re=void 0,X={},dt=Object.prototype.toString,fe="readonly",y="readwrite";function H(n){for(var i=n.length,a=new ArrayBuffer(i),c=new Uint8Array(a),l=0;l<i;l++)c[l]=n.charCodeAt(l);return a}function I(n){return new C(function(i){var a=n.transaction(G,y),c=Y([""]);a.objectStore(G).put(c,"key"),a.onabort=function(l){l.preventDefault(),l.stopPropagation(),i(!1)},a.oncomplete=function(){var l=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);i(s||!l||parseInt(l[1],10)>=43)}}).catch(function(){return!1})}function k(n){return typeof re=="boolean"?C.resolve(re):I(n).then(function(i){return re=i,re})}function K(n){var i=X[n.name],a={};a.promise=new C(function(c,l){a.resolve=c,a.reject=l}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}function q(n){var i=X[n.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}function Z(n,i){var a=X[n.name],c=a.deferredOperations.pop();if(c)return c.reject(i),c.promise}function j(n,i){return new C(function(a,c){if(X[n.name]=X[n.name]||rr(),n.db)if(i)K(n),n.db.close();else return a(n.db);var l=[n.name];i&&l.push(n.version);var s=_.open.apply(_,l);i&&(s.onupgradeneeded=function(f){var h=s.result;try{h.createObjectStore(n.storeName),f.oldVersion<=1&&h.createObjectStore(G)}catch(p){if(p.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+f.oldVersion+" to version "+f.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw p}}),s.onerror=function(f){f.preventDefault(),c(s.error)},s.onsuccess=function(){var f=s.result;f.onversionchange=function(h){h.target.close()},a(f),q(n)}})}function ne(n){return j(n,!1)}function Le(n){return j(n,!0)}function _e(n,i){if(!n.db)return!0;var a=!n.db.objectStoreNames.contains(n.storeName),c=n.version<n.db.version,l=n.version>n.db.version;if(c&&(n.version!==i&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),l||a){if(a){var s=n.db.version+1;s>n.version&&(n.version=s)}return!0}return!1}function pt(n){return new C(function(i,a){var c=new FileReader;c.onerror=a,c.onloadend=function(l){var s=btoa(l.target.result||"");i({__local_forage_encoded_blob:!0,data:s,type:n.type})},c.readAsBinaryString(n)})}function de(n){var i=H(atob(n.data));return Y([i],{type:n.type})}function tr(n){return n&&n.__local_forage_encoded_blob}function nn(n){var i=this,a=i._initReady().then(function(){var c=X[i._dbInfo.name];if(c&&c.dbReady)return c.dbReady});return $(a,n,n),a}function an(n){K(n);for(var i=X[n.name],a=i.forages,c=0;c<a.length;c++){var l=a[c];l._dbInfo.db&&(l._dbInfo.db.close(),l._dbInfo.db=null)}return n.db=null,ne(n).then(function(s){return n.db=s,_e(n)?Le(n):s}).then(function(s){n.db=i.db=s;for(var f=0;f<a.length;f++)a[f]._dbInfo.db=s}).catch(function(s){throw Z(n,s),s})}function ae(n,i,a,c){c===void 0&&(c=1);try{var l=n.db.transaction(n.storeName,i);a(null,l)}catch(s){if(c>0&&(!n.db||s.name==="InvalidStateError"||s.name==="NotFoundError"))return C.resolve().then(function(){if(!n.db||s.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),Le(n)}).then(function(){return an(n).then(function(){ae(n,i,a,c-1)})}).catch(a);a(s)}}function rr(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function on(n){var i=this,a={db:null};if(n)for(var c in n)a[c]=n[c];var l=X[a.name];l||(l=rr(),X[a.name]=l),l.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=nn);var s=[];function f(){return C.resolve()}for(var h=0;h<l.forages.length;h++){var p=l.forages[h];p!==i&&s.push(p._initReady().catch(f))}var v=l.forages.slice(0);return C.all(s).then(function(){return a.db=l.db,ne(a)}).then(function(g){return a.db=g,_e(a,i._defaultConfig.version)?Le(a):g}).then(function(g){a.db=l.db=g,i._dbInfo=a;for(var T=0;T<v.length;T++){var A=v[T];A!==i&&(A._dbInfo.db=a.db,A._dbInfo.version=a.version)}})}function sn(n,i){var a=this;n=U(n);var c=new C(function(l,s){a.ready().then(function(){ae(a._dbInfo,fe,function(f,h){if(f)return s(f);try{var p=h.objectStore(a._dbInfo.storeName),v=p.get(n);v.onsuccess=function(){var g=v.result;g===void 0&&(g=null),tr(g)&&(g=de(g)),l(g)},v.onerror=function(){s(v.error)}}catch(g){s(g)}})}).catch(s)});return R(c,i),c}function cn(n,i){var a=this,c=new C(function(l,s){a.ready().then(function(){ae(a._dbInfo,fe,function(f,h){if(f)return s(f);try{var p=h.objectStore(a._dbInfo.storeName),v=p.openCursor(),g=1;v.onsuccess=function(){var T=v.result;if(T){var A=T.value;tr(A)&&(A=de(A));var D=n(A,T.key,g++);D!==void 0?l(D):T.continue()}else l()},v.onerror=function(){s(v.error)}}catch(T){s(T)}})}).catch(s)});return R(c,i),c}function ln(n,i,a){var c=this;n=U(n);var l=new C(function(s,f){var h;c.ready().then(function(){return h=c._dbInfo,dt.call(i)==="[object Blob]"?k(h.db).then(function(p){return p?i:pt(i)}):i}).then(function(p){ae(c._dbInfo,y,function(v,g){if(v)return f(v);try{var T=g.objectStore(c._dbInfo.storeName);p===null&&(p=void 0);var A=T.put(p,n);g.oncomplete=function(){p===void 0&&(p=null),s(p)},g.onabort=g.onerror=function(){var D=A.error?A.error:A.transaction.error;f(D)}}catch(D){f(D)}})}).catch(f)});return R(l,a),l}function un(n,i){var a=this;n=U(n);var c=new C(function(l,s){a.ready().then(function(){ae(a._dbInfo,y,function(f,h){if(f)return s(f);try{var p=h.objectStore(a._dbInfo.storeName),v=p.delete(n);h.oncomplete=function(){l()},h.onerror=function(){s(v.error)},h.onabort=function(){var g=v.error?v.error:v.transaction.error;s(g)}}catch(g){s(g)}})}).catch(s)});return R(c,i),c}function fn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){ae(i._dbInfo,y,function(s,f){if(s)return l(s);try{var h=f.objectStore(i._dbInfo.storeName),p=h.clear();f.oncomplete=function(){c()},f.onabort=f.onerror=function(){var v=p.error?p.error:p.transaction.error;l(v)}}catch(v){l(v)}})}).catch(l)});return R(a,n),a}function mn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){ae(i._dbInfo,fe,function(s,f){if(s)return l(s);try{var h=f.objectStore(i._dbInfo.storeName),p=h.count();p.onsuccess=function(){c(p.result)},p.onerror=function(){l(p.error)}}catch(v){l(v)}})}).catch(l)});return R(a,n),a}function hn(n,i){var a=this,c=new C(function(l,s){if(n<0){l(null);return}a.ready().then(function(){ae(a._dbInfo,fe,function(f,h){if(f)return s(f);try{var p=h.objectStore(a._dbInfo.storeName),v=!1,g=p.openKeyCursor();g.onsuccess=function(){var T=g.result;if(!T){l(null);return}n===0||v?l(T.key):(v=!0,T.advance(n))},g.onerror=function(){s(g.error)}}catch(T){s(T)}})}).catch(s)});return R(c,i),c}function dn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){ae(i._dbInfo,fe,function(s,f){if(s)return l(s);try{var h=f.objectStore(i._dbInfo.storeName),p=h.openKeyCursor(),v=[];p.onsuccess=function(){var g=p.result;if(!g){c(v);return}v.push(g.key),g.continue()},p.onerror=function(){l(p.error)}}catch(g){l(g)}})}).catch(l)});return R(a,n),a}function pn(n,i){i=J.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var c=this,l;if(!n.name)l=C.reject("Invalid arguments");else{var s=n.name===a.name&&c._dbInfo.db,f=s?C.resolve(c._dbInfo.db):ne(n).then(function(h){var p=X[n.name],v=p.forages;p.db=h;for(var g=0;g<v.length;g++)v[g]._dbInfo.db=h;return h});n.storeName?l=f.then(function(h){if(!!h.objectStoreNames.contains(n.storeName)){var p=h.version+1;K(n);var v=X[n.name],g=v.forages;h.close();for(var T=0;T<g.length;T++){var A=g[T];A._dbInfo.db=null,A._dbInfo.version=p}var D=new C(function(B,O){var F=_.open(n.name,p);F.onerror=function(ee){var xe=F.result;xe.close(),O(ee)},F.onupgradeneeded=function(){var ee=F.result;ee.deleteObjectStore(n.storeName)},F.onsuccess=function(){var ee=F.result;ee.close(),B(ee)}});return D.then(function(B){v.db=B;for(var O=0;O<g.length;O++){var F=g[O];F._dbInfo.db=B,q(F._dbInfo)}}).catch(function(B){throw(Z(n,B)||C.resolve()).catch(function(){}),B})}}):l=f.then(function(h){K(n);var p=X[n.name],v=p.forages;h.close();for(var g=0;g<v.length;g++){var T=v[g];T._dbInfo.db=null}var A=new C(function(D,B){var O=_.deleteDatabase(n.name);O.onerror=function(){var F=O.result;F&&F.close(),B(O.error)},O.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},O.onsuccess=function(){var F=O.result;F&&F.close(),D(F)}});return A.then(function(D){p.db=D;for(var B=0;B<v.length;B++){var O=v[B];q(O._dbInfo)}}).catch(function(D){throw(Z(n,D)||C.resolve()).catch(function(){}),D})})}return R(l,i),l}var vn={_driver:"asyncStorage",_initStorage:on,_support:N(),iterate:cn,getItem:sn,setItem:ln,removeItem:un,clear:fn,length:mn,key:hn,keys:dn,dropInstance:pn};function gn(){return typeof openDatabase=="function"}var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bn="~~local_forage_type~",nr=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",vt=ke.length,gt="arbf",bt="blob",ar="si08",or="ui08",ir="uic8",sr="si16",cr="si32",lr="ur16",ur="ui32",fr="fl32",mr="fl64",hr=vt+gt.length,dr=Object.prototype.toString;function pr(n){var i=n.length*.75,a=n.length,c,l=0,s,f,h,p;n[n.length-1]==="="&&(i--,n[n.length-2]==="="&&i--);var v=new ArrayBuffer(i),g=new Uint8Array(v);for(c=0;c<a;c+=4)s=se.indexOf(n[c]),f=se.indexOf(n[c+1]),h=se.indexOf(n[c+2]),p=se.indexOf(n[c+3]),g[l++]=s<<2|f>>4,g[l++]=(f&15)<<4|h>>2,g[l++]=(h&3)<<6|p&63;return v}function yt(n){var i=new Uint8Array(n),a="",c;for(c=0;c<i.length;c+=3)a+=se[i[c]>>2],a+=se[(i[c]&3)<<4|i[c+1]>>4],a+=se[(i[c+1]&15)<<2|i[c+2]>>6],a+=se[i[c+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function yn(n,i){var a="";if(n&&(a=dr.call(n)),n&&(a==="[object ArrayBuffer]"||n.buffer&&dr.call(n.buffer)==="[object ArrayBuffer]")){var c,l=ke;n instanceof ArrayBuffer?(c=n,l+=gt):(c=n.buffer,a==="[object Int8Array]"?l+=ar:a==="[object Uint8Array]"?l+=or:a==="[object Uint8ClampedArray]"?l+=ir:a==="[object Int16Array]"?l+=sr:a==="[object Uint16Array]"?l+=lr:a==="[object Int32Array]"?l+=cr:a==="[object Uint32Array]"?l+=ur:a==="[object Float32Array]"?l+=fr:a==="[object Float64Array]"?l+=mr:i(new Error("Failed to get type for BinaryArray"))),i(l+yt(c))}else if(a==="[object Blob]"){var s=new FileReader;s.onload=function(){var f=bn+n.type+"~"+yt(this.result);i(ke+bt+f)},s.readAsArrayBuffer(n)}else try{i(JSON.stringify(n))}catch(f){console.error("Couldn't convert value into a JSON string: ",n),i(null,f)}}function Cn(n){if(n.substring(0,vt)!==ke)return JSON.parse(n);var i=n.substring(hr),a=n.substring(vt,hr),c;if(a===bt&&nr.test(i)){var l=i.match(nr);c=l[1],i=i.substring(l[0].length)}var s=pr(i);switch(a){case gt:return s;case bt:return Y([s],{type:c});case ar:return new Int8Array(s);case or:return new Uint8Array(s);case ir:return new Uint8ClampedArray(s);case sr:return new Int16Array(s);case lr:return new Uint16Array(s);case cr:return new Int32Array(s);case ur:return new Uint32Array(s);case fr:return new Float32Array(s);case mr:return new Float64Array(s);default:throw new Error("Unkown type: "+a)}}var Ct={serialize:yn,deserialize:Cn,stringToBuffer:pr,bufferToString:yt};function vr(n,i,a,c){n.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,c)}function En(n){var i=this,a={db:null};if(n)for(var c in n)a[c]=typeof n[c]!="string"?n[c].toString():n[c];var l=new C(function(s,f){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(h){return f(h)}a.db.transaction(function(h){vr(h,a,function(){i._dbInfo=a,s()},function(p,v){f(v)})},f)});return a.serializer=Ct,l}function ce(n,i,a,c,l,s){n.executeSql(a,c,l,function(f,h){h.code===h.SYNTAX_ERR?f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(p,v){v.rows.length?s(p,h):vr(p,i,function(){p.executeSql(a,c,l,s)},s)},s):s(f,h)},s)}function Tn(n,i){var a=this;n=U(n);var c=new C(function(l,s){a.ready().then(function(){var f=a._dbInfo;f.db.transaction(function(h){ce(h,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[n],function(p,v){var g=v.rows.length?v.rows.item(0).value:null;g&&(g=f.serializer.deserialize(g)),l(g)},function(p,v){s(v)})})}).catch(s)});return R(c,i),c}function Sn(n,i){var a=this,c=new C(function(l,s){a.ready().then(function(){var f=a._dbInfo;f.db.transaction(function(h){ce(h,f,"SELECT * FROM "+f.storeName,[],function(p,v){for(var g=v.rows,T=g.length,A=0;A<T;A++){var D=g.item(A),B=D.value;if(B&&(B=f.serializer.deserialize(B)),B=n(B,D.key,A+1),B!==void 0){l(B);return}}l()},function(p,v){s(v)})})}).catch(s)});return R(c,i),c}function gr(n,i,a,c){var l=this;n=U(n);var s=new C(function(f,h){l.ready().then(function(){i===void 0&&(i=null);var p=i,v=l._dbInfo;v.serializer.serialize(i,function(g,T){T?h(T):v.db.transaction(function(A){ce(A,v,"INSERT OR REPLACE INTO "+v.storeName+" (key, value) VALUES (?, ?)",[n,g],function(){f(p)},function(D,B){h(B)})},function(A){if(A.code===A.QUOTA_ERR){if(c>0){f(gr.apply(l,[n,p,a,c-1]));return}h(A)}})})}).catch(h)});return R(s,a),s}function Pn(n,i,a){return gr.apply(this,[n,i,a,1])}function Ln(n,i){var a=this;n=U(n);var c=new C(function(l,s){a.ready().then(function(){var f=a._dbInfo;f.db.transaction(function(h){ce(h,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[n],function(){l()},function(p,v){s(v)})})}).catch(s)});return R(c,i),c}function Mn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){var s=i._dbInfo;s.db.transaction(function(f){ce(f,s,"DELETE FROM "+s.storeName,[],function(){c()},function(h,p){l(p)})})}).catch(l)});return R(a,n),a}function xn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){var s=i._dbInfo;s.db.transaction(function(f){ce(f,s,"SELECT COUNT(key) as c FROM "+s.storeName,[],function(h,p){var v=p.rows.item(0).c;c(v)},function(h,p){l(p)})})}).catch(l)});return R(a,n),a}function Rn(n,i){var a=this,c=new C(function(l,s){a.ready().then(function(){var f=a._dbInfo;f.db.transaction(function(h){ce(h,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[n+1],function(p,v){var g=v.rows.length?v.rows.item(0).key:null;l(g)},function(p,v){s(v)})})}).catch(s)});return R(c,i),c}function wn(n){var i=this,a=new C(function(c,l){i.ready().then(function(){var s=i._dbInfo;s.db.transaction(function(f){ce(f,s,"SELECT key FROM "+s.storeName,[],function(h,p){for(var v=[],g=0;g<p.rows.length;g++)v.push(p.rows.item(g).key);c(v)},function(h,p){l(p)})})}).catch(l)});return R(a,n),a}function An(n){return new C(function(i,a){n.transaction(function(c){c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(l,s){for(var f=[],h=0;h<s.rows.length;h++)f.push(s.rows.item(h).name);i({db:n,storeNames:f})},function(l,s){a(s)})},function(c){a(c)})})}function In(n,i){i=J.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var c=this,l;return n.name?l=new C(function(s){var f;n.name===a.name?f=c._dbInfo.db:f=openDatabase(n.name,"","",0),n.storeName?s({db:f,storeNames:[n.storeName]}):s(An(f))}).then(function(s){return new C(function(f,h){s.db.transaction(function(p){function v(D){return new C(function(B,O){p.executeSql("DROP TABLE IF EXISTS "+D,[],function(){B()},function(F,ee){O(ee)})})}for(var g=[],T=0,A=s.storeNames.length;T<A;T++)g.push(v(s.storeNames[T]));C.all(g).then(function(){f()}).catch(function(D){h(D)})},function(p){h(p)})})}):l=C.reject("Invalid arguments"),R(l,i),l}var Hn={_driver:"webSQLStorage",_initStorage:En,_support:gn(),iterate:Sn,getItem:Tn,setItem:Pn,removeItem:Ln,clear:Mn,length:xn,key:Rn,keys:wn,dropInstance:In};function Dn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(n){return!1}}function br(n,i){var a=n.name+"/";return n.storeName!==i.storeName&&(a+=n.storeName+"/"),a}function Bn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch(i){return!0}}function _n(){return!Bn()||localStorage.length>0}function kn(n){var i=this,a={};if(n)for(var c in n)a[c]=n[c];return a.keyPrefix=br(n,i._defaultConfig),_n()?(i._dbInfo=a,a.serializer=Ct,C.resolve()):C.reject()}function Nn(n){var i=this,a=i.ready().then(function(){for(var c=i._dbInfo.keyPrefix,l=localStorage.length-1;l>=0;l--){var s=localStorage.key(l);s.indexOf(c)===0&&localStorage.removeItem(s)}});return R(a,n),a}function $n(n,i){var a=this;n=U(n);var c=a.ready().then(function(){var l=a._dbInfo,s=localStorage.getItem(l.keyPrefix+n);return s&&(s=l.serializer.deserialize(s)),s});return R(c,i),c}function Un(n,i){var a=this,c=a.ready().then(function(){for(var l=a._dbInfo,s=l.keyPrefix,f=s.length,h=localStorage.length,p=1,v=0;v<h;v++){var g=localStorage.key(v);if(g.indexOf(s)===0){var T=localStorage.getItem(g);if(T&&(T=l.serializer.deserialize(T)),T=n(T,g.substring(f),p++),T!==void 0)return T}}});return R(c,i),c}function Fn(n,i){var a=this,c=a.ready().then(function(){var l=a._dbInfo,s;try{s=localStorage.key(n)}catch(f){s=null}return s&&(s=s.substring(l.keyPrefix.length)),s});return R(c,i),c}function On(n){var i=this,a=i.ready().then(function(){for(var c=i._dbInfo,l=localStorage.length,s=[],f=0;f<l;f++){var h=localStorage.key(f);h.indexOf(c.keyPrefix)===0&&s.push(h.substring(c.keyPrefix.length))}return s});return R(a,n),a}function Gn(n){var i=this,a=i.keys().then(function(c){return c.length});return R(a,n),a}function Xn(n,i){var a=this;n=U(n);var c=a.ready().then(function(){var l=a._dbInfo;localStorage.removeItem(l.keyPrefix+n)});return R(c,i),c}function Wn(n,i,a){var c=this;n=U(n);var l=c.ready().then(function(){i===void 0&&(i=null);var s=i;return new C(function(f,h){var p=c._dbInfo;p.serializer.serialize(i,function(v,g){if(g)h(g);else try{localStorage.setItem(p.keyPrefix+n,v),f(s)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&h(T),h(T)}})})});return R(l,a),l}function zn(n,i){if(i=J.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var a=this.config();n.name=n.name||a.name,n.storeName=n.storeName||a.storeName}var c=this,l;return n.name?l=new C(function(s){n.storeName?s(br(n,c._defaultConfig)):s(n.name+"/")}).then(function(s){for(var f=localStorage.length-1;f>=0;f--){var h=localStorage.key(f);h.indexOf(s)===0&&localStorage.removeItem(h)}}):l=C.reject("Invalid arguments"),R(l,i),l}var Kn={_driver:"localStorageWrapper",_initStorage:kn,_support:Dn(),iterate:Un,getItem:$n,setItem:Wn,removeItem:Xn,clear:Nn,length:Gn,key:Fn,keys:On,dropInstance:zn},Vn=function(i,a){return i===a||typeof i=="number"&&typeof a=="number"&&isNaN(i)&&isNaN(a)},Yn=function(i,a){for(var c=i.length,l=0;l<c;){if(Vn(i[l],a))return!0;l++}return!1},yr=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Me={},Cr={},pe={INDEXEDDB:vn,WEBSQL:Hn,LOCALSTORAGE:Kn},Qn=[pe.INDEXEDDB._driver,pe.WEBSQL._driver,pe.LOCALSTORAGE._driver],Ne=["dropInstance"],Et=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ne),qn={description:"",driver:Qn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Jn(n,i){n[i]=function(){var a=arguments;return n.ready().then(function(){return n[i].apply(n,a)})}}function Tt(){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var a in i)i.hasOwnProperty(a)&&(yr(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}var Zn=function(){function n(i){M(this,n);for(var a in pe)if(pe.hasOwnProperty(a)){var c=pe[a],l=c._driver;this[a]=l,Me[l]||this.defineDriver(c)}this._defaultConfig=Tt({},qn),this._config=Tt({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(a){if((typeof a>"u"?"undefined":E(a))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var c in a){if(c==="storeName"&&(a[c]=a[c].replace(/\W/g,"_")),c==="version"&&typeof a[c]!="number")return new Error("Database version must be a number.");this._config[c]=a[c]}return"driver"in a&&a.driver?this.setDriver(this._config.driver):!0}else return typeof a=="string"?this._config[a]:this._config},n.prototype.defineDriver=function(a,c,l){var s=new C(function(f,h){try{var p=a._driver,v=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver){h(v);return}for(var g=Et.concat("_initStorage"),T=0,A=g.length;T<A;T++){var D=g[T],B=!Yn(Ne,D);if((B||a[D])&&typeof a[D]!="function"){h(v);return}}var O=function(){for(var xe=function(ta){return function(){var ra=new Error("Method "+ta+" is not implemented by the current driver"),Er=C.reject(ra);return R(Er,arguments[arguments.length-1]),Er}},St=0,ea=Ne.length;St<ea;St++){var Pt=Ne[St];a[Pt]||(a[Pt]=xe(Pt))}};O();var F=function(xe){Me[p]&&console.info("Redefining LocalForage driver: "+p),Me[p]=a,Cr[p]=xe,f()};"_support"in a?a._support&&typeof a._support=="function"?a._support().then(F,h):F(!!a._support):F(!0)}catch(ee){h(ee)}});return $(s,c,l),s},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(a,c,l){var s=Me[a]?C.resolve(Me[a]):C.reject(new Error("Driver not found."));return $(s,c,l),s},n.prototype.getSerializer=function(a){var c=C.resolve(Ct);return $(c,a),c},n.prototype.ready=function(a){var c=this,l=c._driverSet.then(function(){return c._ready===null&&(c._ready=c._initDriver()),c._ready});return $(l,a,a),l},n.prototype.setDriver=function(a,c,l){var s=this;yr(a)||(a=[a]);var f=this._getSupportedDrivers(a);function h(){s._config.driver=s.driver()}function p(T){return s._extend(T),h(),s._ready=s._initStorage(s._config),s._ready}function v(T){return function(){var A=0;function D(){for(;A<T.length;){var B=T[A];return A++,s._dbInfo=null,s._ready=null,s.getDriver(B).then(p).catch(D)}h();var O=new Error("No available storage method found.");return s._driverSet=C.reject(O),s._driverSet}return D()}}var g=this._driverSet!==null?this._driverSet.catch(function(){return C.resolve()}):C.resolve();return this._driverSet=g.then(function(){var T=f[0];return s._dbInfo=null,s._ready=null,s.getDriver(T).then(function(A){s._driver=A._driver,h(),s._wrapLibraryMethodsWithReady(),s._initDriver=v(f)})}).catch(function(){h();var T=new Error("No available storage method found.");return s._driverSet=C.reject(T),s._driverSet}),$(this._driverSet,c,l),this._driverSet},n.prototype.supports=function(a){return!!Cr[a]},n.prototype._extend=function(a){Tt(this,a)},n.prototype._getSupportedDrivers=function(a){for(var c=[],l=0,s=a.length;l<s;l++){var f=a[l];this.supports(f)&&c.push(f)}return c},n.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,c=Et.length;a<c;a++)Jn(this,Et[a])},n.prototype.createInstance=function(a){return new n(a)},n}(),jn=new Zn;u.exports=jn},{3:3}]},{},[4])(4)})});var xt=r=>{let e=typeof r;return r!==null&&(e==="object"||e==="function")},Mt=new Set(["__proto__","prototype","constructor"]),ha=new Set("0123456789");function Mr(r){let e=[],t="",o="start",u=!1;for(let b of r)switch(b){case"\\":if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd")throw new Error("Invalid character after an index");u&&(t+=b),o="property",u=!u;break;case".":if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd"){o="property";break}if(u){u=!1,t+=b;break}if(Mt.has(t))return[];e.push(t),t="",o="property";break;case"[":if(o==="index")throw new Error("Invalid character in an index");if(o==="indexEnd"){o="index";break}if(u){u=!1,t+=b;break}if(o==="property"){if(Mt.has(t))return[];e.push(t),t=""}o="index";break;case"]":if(o==="index"){e.push(Number.parseInt(t,10)),t="",o="indexEnd";break}if(o==="indexEnd")throw new Error("Invalid character after an index");default:if(o==="index"&&!ha.has(b))throw new Error("Invalid character in an index");if(o==="indexEnd")throw new Error("Invalid character after an index");o==="start"&&(o="property"),u&&(u=!1,t+="\\"),t+=b}switch(u&&(t+="\\"),o){case"property":{if(Mt.has(t))return[];e.push(t);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function xr(r,e){if(typeof e!="number"&&Array.isArray(r)){let t=Number.parseInt(e,10);return Number.isInteger(t)&&r[t]===r[e]}return!1}function da(r,e){if(xr(r,e))throw new Error("Cannot use string index")}function x(r,e,t){if(!xt(r)||typeof e!="string")return t===void 0?r:t;let o=Mr(e);if(o.length===0)return t;for(let u=0;u<o.length;u++){let b=o[u];if(xr(r,b)?r=u===o.length-1?void 0:null:r=r[b],r==null){if(u!==o.length-1)return t;break}}return r===void 0?t:r}function Rr(r,e,t){if(!xt(r)||typeof e!="string")return r;let o=r,u=Mr(e);for(let b=0;b<u.length;b++){let E=u[b];da(r,E),b===u.length-1?r[E]=t:xt(r[E])||(r[E]=typeof u[b+1]=="number"?[]:{}),r=r[E]}return o}var ht=ma(Ar());var w=r=>document.getElementById(r),$e=(r,e)=>{if(document.visibilityState==="hidden")return!1;let t=Object.entries(e);for(let[o,u]of t)r[o]=u;return!0},m=(r,e)=>document.visibilityState==="hidden"?!1:$e(typeof r=="string"?w(r):r,e),L=(r,e)=>document.visibilityState==="hidden"?!1:$e(typeof r=="string"?w(r).style:r.style,e);var ie=(r,e)=>r.querySelector(e),pa=(r,e)=>{let t=w("confirmationBox"),o=w("confirmWrapper"),u=ie(document,"#confirm"),b=ie(document,"#transparentBG"),E=ie(u,"#okConfirm"),M=ie(u,"#cancelConfirm");t.style.display="block",o.style.display="block",b.style.display="block",ie(u,"p").textContent=r,u.focus();let P=({target:N})=>{let Y=N;return E.removeEventListener("click",P),M.removeEventListener("click",P),u.removeEventListener("keyup",_),t.style.display="none",o.style.display="none",b.style.display="none",e(Y===E)},_=N=>N.key==="Enter"||N.key===" "?P({target:E}):N.key==="Escape"?P({target:M}):N.preventDefault();E.addEventListener("click",P),M.addEventListener("click",P),u.addEventListener("keyup",_)},va=(r,e)=>{let t=w("confirmationBox"),o=w("alertWrapper"),u=ie(document,"#transparentBG"),b=ie(document,"#alert"),E=ie(b,"#okAlert");t.style.display="block",o.style.display="block",u.style.display="block",ie(b,"p").textContent=r,b.focus();let M=()=>{E.removeEventListener("click",M),b.removeEventListener("keyup",P),t.style.display="none",o.style.display="none",u.style.display="none",e(void 0)},P=_=>(_.key==="Enter"||_.key===" ")&&M();E.addEventListener("click",M),b.addEventListener("keyup",P)};var W=r=>new Promise(e=>va(r,e));var me=r=>new Promise(e=>pa(r,e));var d=(r,e=0)=>{if(r<0)return"-"+d(-r,e);if(r>=1e6){let _=Math.floor(Math.log10(r));return r/=Math.pow(10,_),d(r,2)+"e"+d(_)}let t=Math.floor(r),o=r-t,u=t.toLocaleString(),b=e>0&&r!==0,E=Math.pow(10,e)*o,M=1e-6;Math.ceil(E)-E<M&&(E=Math.ceil(E));let P=b?Math.floor(E).toString():"";if(P!==""){for(;P.length<e;)P="0"+P;P="."+P}return u+P};var le=r=>{L("innerTesting",{border:"none"}),L("mainTab",{display:"none"}),L("upgradeTab",{display:"none"}),L("talentsTab",{display:"none"}),L("duelingTab",{display:"none"}),L("challengeTab",{display:"none"}),r==="Main"?L("mainTab",{display:"block"}):r==="Upgrades"?L("upgradeTab",{display:"block"}):r==="Talents"?L("talentsTab",{display:"block"}):r==="Dueling"?(L("duelingTab",{display:"block"}),L("innerTesting",{border:"2px solid grey"})):r==="Challenges"&&L("challengeTab",{display:"block"})},Ue=r=>{let e=[[2,"upgrade-tab-nav"],[5,"coin-momentum"],[5,"reset"],[20,"talent-tab-nav"],[30,"coin-reverberation"],[40,"coin-vibration"],[50,"dueling-tab-nav"],[75,"coin-adoption"],[0,"challenge-tab-nav"],[150,"coin-resonance"],[225,"coin-agitation"],[225,"coin-empowerment"],[250,"coin-reinforcement"]];for(let t of e){let o=r.highestBarLevel>=t[0]?"block":"none",u=document.getElementById(`${String(t[1])}`);u&&(u.style.display=o)}},Fe=(r,e)=>{e?L("progression",{backgroundColor:"gold"}):L("progression",{backgroundColor:"turquoise"}),setTimeout(()=>{L("progression",{backgroundColor:ve(r)})},500),m("refresh-crit-counter",{textContent:d(r.criticalHitsThisRefresh)}),m("refresh-crit-fragments",{textContent:d(100*r.criticalHitsThisRefresh*r.coinUpgrades.barAgitation.upgradeEffect(),2)}),r.barFragments.updateHTML()},Oe=r=>{L("progression",{backgroundColor:"cyan"}),setTimeout(()=>{L("progression",{backgroundColor:ve(r)})},1e3),m("coinWorth",{textContent:`Worth ${d(r.coinValueCache)} coins`}),r.coinValueCache>0?L("coinWorth",{color:"gold"}):L("coinWorth",{color:"grey"}),m("refresh-crit-counter",{textContent:d(r.criticalHitsThisRefresh)}),m("refresh-counter",{textContent:d(r.refreshCount)})},wt=r=>{for(let e in r.coinUpgrades){let t=e;r.coinUpgrades[t].updateHTML()}};var Ir=(r,e)=>{switch(r){case"Basic Challenge":return e.barLevel>=175+25*e.completedChallenges.basicChallenge;case"No Refresh":return e.barLevel>=100+15*e.completedChallenges.noRefresh;case"No Coin Upgrades":return e.barLevel>=100+15*e.completedChallenges.noCoinUpgrades;case"Reduced Bar Fragments":return e.barLevel>=200+40*e.completedChallenges.reducedFragments;default:return!0}};var ge=(r,e)=>{if(e.currentChallenge==="No Refresh")return W("Hey, bub! You can't refresh, it'll be catastrophic, or something.");if(r==="Refresh"&&e.barLevel>=5){if(e.refreshTime<we)return void W(`Currently, refreshes have a ${d(we)} second cooldown. Sorry!`);e.barFragments.set(e.barFragments.getAmountOnRefresh()),e.barEXP=0,e.barLevel=0,e.barTNL=Ae(e),be(he(e.barEXP,e.barTNL)),e.barFragments.updateHTML(),e.talents.barCriticalChance.convertToPerm(),e.talents.barCriticalChance.updateHTML("Initialize"),e.talents.barSpeed.convertToPerm(),e.talents.barSpeed.updateHTML("Initialize"),e.talents.coinGain.convertToPerm(),e.talents.coinGain.updateHTML("Initialize"),e.refreshCount+=1,e.refreshTime=0,e.criticalHitsThisRefresh=0,e.coinValueCache=At(e),Fe(e,!1),Oe(e)}else return void W("You cannot refresh yet. Get to level 5 lol")};var Hr=r=>{ge("Refresh",r),r.barFragments.set(0)};var ue=async(r,e,t=!1)=>{let o=[["Basic Challenge","basic-challenge-icon"],["No Refresh","no-refresh-challenge-icon"],["No Coin Upgrades","no-coin-upgrade-challenge-icon"],["Reduced Bar Fragments","reduced-fragments-challenge-icon"]];if(t){e.currentChallenge="None";for(let b of o)L(b[1],{backgroundColor:r!==b[0]?"transparent":"lightgoldenrodyellow"});wt(e);return}if(e.currentChallenge!=="None"&&r!=="None")return W(`You are already in a challenge!
         Leave it using the rightmost icon if you want to start a new one.`);let u;if(e.currentChallenge==="None"?u=await me("Entering a challenge also resets your bar fragments. Continue?"):u=await me(`Would you like to exit ${e.currentChallenge}?`),u){if(e.barLevel<5&&r!=="None")return W("I cannot do this action until you are at bar level 5.");r!=="None"&&Hr(e),e.currentChallenge=r,wt(e);for(let b of o)L(b[1],{backgroundColor:r!==b[0]?"transparent":"lightgoldenrodyellow"})}else return W("Alright, enjoy your business.")};var ga=10,Ge=0,It=0,Ae=r=>{let e=0;return e+=ga*Math.pow(r.barLevel+1,2),e*=Math.min(1,(r.barLevel+20)/40),e*=Math.max(1,1+(r.barLevel-20)/10),r.barLevel>40&&(e*=Math.pow(2,1/10*(r.barLevel-40))),r.barLevel>100&&(e*=Math.pow(2,1/10*(r.barLevel-100))),r.barLevel>200&&(e*=Math.pow(2,1/10*(r.barLevel-200))),r.barLevel%5===0&&(e*=Math.max(1,1/2*r.barLevel/10)),e},ba=r=>{let e=0;return r.barLevel>=10&&(e+=1-Math.pow(Math.E,-r.barLevel/200)),e>=.9999?1e4:1/(1-e)},ya=r=>{let e=ba(r);return Math.max(1,e*(1-r.barEXP/r.barTNL))},Ie=(r,e,t=!1)=>{if(r==null)return;let o=1;if(o+=e.coinUpgrades.barSpeed.upgradeEffect(),o*=e.barFragments.unspentBonus(),o*=Math.pow(1+e.coinUpgrades.barMomentum.upgradeEffect(),Math.sqrt(100*Math.min(1,e.barEXP/e.barTNL))),o/=ya(e),o*=e.talents.barSpeed.talentEffect(),o*=Math.pow(1+e.coinUpgrades.barEmpowerment.upgradeEffect(),e.barLevel),(t?-1:Math.random())<Bt(e)){let E=!1;o*=e.coinUpgrades.barVibration.upgradeEffect(),e.talents.barCriticalChance.gainEXP(r),e.criticalHits+=1,e.criticalHitsThisRefresh+=1,Math.random()<e.coinUpgrades.barResonance.upgradeEffect()&&(o*=3,e.coins.gain(Math.floor(e.barLevel/5)+3),E=!0),Fe(e,E)}let b=o*r;e.barEXP+=b,Ge+=b,m("perSecCurr",{textContent:`+${d(Ge,2)} this sec`})},he=(r,e)=>Math.min(100,.1*Math.floor(1e3*r/e)),be=r=>{L("progression",{width:`${r}%`})},ve=r=>{if(r.currentChallenge!=="None")return"lightgoldenrodyellow";if(r.barLevel%5===0)return r.barLevel>=320?"#FF0000":`#${(128+4*Math.floor(r.barLevel/10)).toString(16).padStart(2,"0")}0000`;if(r.barLevel>=128)return"#FFFFFF";let e=(128+r.barLevel).toString(16).padStart(2,"0"),t=(2*r.barLevel).toString(16).padStart(2,"0"),o=(128+r.barLevel).toString(16).padStart(2,"0");return`#${e}${t}${o}`},Ht=r=>{r.coins.gain(r.coinValueCache),r.coinValueCache=At(r),r.barEXP-=r.barTNL,r.barLevel+=1,r.barLevel>r.highestBarLevel&&(r.highestBarLevel=r.barLevel,Ue(r));let e=ve(r);L("progression",{backgroundColor:e}),r.barTNL=Ae(r),r.barEXP/=10,r.barEXP=Math.min(r.barEXP,Math.floor(r.barTNL/10));let t=he(r.barEXP,r.barTNL);if(be(t),m("coinWorth",{textContent:`Worth ${d(r.coinValueCache)} coins`}),r.barFragments.updateHTML(),r.barLevel===20&&(r.talents.barCriticalChance.updateHTML("Level20"),r.talents.barSpeed.updateHTML("Level20")),r.currentChallenge!=="None"){let o=r.currentChallenge;if(Ir(o,r)){let b={"Basic Challenge":"basicChallenge","No Refresh":"noRefresh","No Coin Upgrades":"noCoinUpgrades","Reduced Bar Fragments":"reducedFragments",None:"reducedFragments"}[o];return r.completedChallenges[b]+=1,ue("None",r,!0),W(`Congratulations! You have completed 
            ${o} #${r.completedChallenges[b]}! 
            Ant God is satisfied.`)}}},Dt=r=>{m("level",{textContent:`Level: ${r.barLevel}`}),m("exp",{textContent:`EXP: ${d(r.barEXP)}/${d(r.barTNL)}`})},Dr=r=>{It=Ge,Ge=0,m("perSecPrev",{textContent:`+${d(It,2)} prev sec`}),r.talents.barCriticalChance.updateHTML("Time"),r.talents.barSpeed.gainEXP(It),r.talents.barSpeed.updateHTML("Time"),r.talents.coinGain.updateHTML("Time")},At=r=>{let e=0,t=1+r.barLevel;t%5===0&&(e+=Math.floor(t/5)+3,Math.random()<.5-.02*r.completedChallenges.basicChallenge&&t>25&&(e=0)),t%10===0&&(e+=Math.floor(t/2)),t%50===0&&(e+=Math.floor(t/2)),t%100===0&&(e+=Math.floor(t)),e>100&&(e=10*Math.pow(e,1/2)),t>r.highestBarLevel&&(e+=3),t>=101&&r.completedChallenges.basicChallenge>0&&(e+=1),e*=1+r.talents.coinGain.talentEffect(),e*=1+r.completedChallenges.basicChallenge/100,e*=r.completedChallenges.basicChallenge===25?1.15:1;let o=e-Math.floor(e);Math.random()<o&&(e+=1),e=Math.floor(e);let u=w("coinWorth");return u.style.color=e>0?"gold":"grey",e},Bt=r=>r.coinUpgrades.barReverberation.upgradeEffect()+r.talents.barCriticalChance.talentEffect();var ye=class{constructor(e=0,t){this.amount=e;this.player=t;this.amount=e,this.updateHTML()}spend(e){this.amount>=e&&(this.amount-=e,this.updateHTML())}gain(e){this.amount+=e,this.updateOnGain(e),this.updateHTML()}set(e){this.amount=e,this.updateHTML()}valueOf(){return{amount:this.amount}}};var Xe=class extends ye{constructor(t,o,u){super(t,o);this.totalCoins=u,this.updateHTML()}updateHTML(){let t=document.getElementsByClassName("coinCountDisplay");for(let o=0;o<t.length;o++)m(t[o],{textContent:d(this.amount)});m("gold-amount",{textContent:d(this.amount)}),m("gold-total-amount",{textContent:d(this.totalCoins)})}updateOnGain(t){t>0&&this.player.talents.coinGain.gainEXP(t),this.totalCoins+=t}valueOf(){return{amount:this.amount,totalCoins:this.totalCoins}}};var Br="coins",_t=(r,e)=>{var o,u,b;let t=(o=x(r,Br))!=null?o:x(e,Br);return new Xe((u=t==null?void 0:t.amount)!=null?u:0,e,(b=t==null?void 0:t.totalCoins)!=null?b:0)};var We=class extends ye{updateHTML(){m("fragment-amount",{textContent:d(this.amount)}),m("fragment-bonus",{textContent:d(this.amount)}),m("fragment-gain",{textContent:d(this.getAmountOnRefresh())})}getAmountOnRefresh(){let e=this.player.barLevel,t=100*Math.pow(1.07,-5);return t*=Math.pow(1.07,e),t*=Math.pow(3,Math.floor(e/(100-this.player.completedChallenges.noRefresh))),t*=1+this.player.criticalHitsThisRefresh*this.player.coinUpgrades.barAgitation.upgradeEffect(),t*=1+this.player.coinUpgrades.barReinforcement.upgradeEffect()*this.player.barLevel,this.player.completedChallenges.noRefresh>0&&(t*=Math.pow(1.03,Math.floor(e/10))),this.player.completedChallenges.noRefresh===25&&(t*=3),this.player.currentChallenge==="Reduced Bar Fragments"&&(t=Math.pow(t,1/3)),Math.floor(t)}unspentBonus(){return 1+1/100*this.amount}updateOnGain(){}};var _r="barFragments",kt=(r,e)=>{var o,u;let t=(o=x(r,_r))!=null?o:x(e,_r);return new We((u=t==null?void 0:t.amount)!=null?u:0,e)};var Ce=class{constructor(e,t,o){this.level=e;this.cost=t;this.player=o}};var te=class extends Ce{constructor(e,t,o){super(e,t,o),this.updateHTML()}capLevel(){this.maxLevel!==-1&&(this.level=Math.min(this.maxLevel,this.level))}purchaseLevels(e,t){t.shiftKey&&(e=-1,e=Math.floor(this.player.coins.amount/this.cost)),this.maxLevel!==-1&&(e=Math.min(e,this.maxLevel-this.level)),this.cost*e<=this.player.coins.amount&&(this.player.coins.spend(this.cost*e),this.level+=e,this.updateHTML())}valueOf(){return{level:this.level,cost:this.cost,maxLevel:this.maxLevel}}checkChallenge(){return this.player.currentChallenge==="No Coin Upgrades"}},z={barSpeed:1,barMomentum:10,barReverberation:25,barVibration:50,barAgitation:1e4,barAdoption:250,barEmpowerment:1e4,barReinforcement:2e4,barResonance:2e3},ze=class extends te{constructor(){super(...arguments);this.maxLevel=-1}upgradeEffect(){return this.checkChallenge()?0:4*this.level/100+.06*Math.min(90,this.level)}updateHTML(){m("coin-bar-speed-effect",{textContent:`+${d(this.upgradeEffect(),2)} Progress Per Second`}),m("coin-bar-speed-name",{textContent:`Bar Speed ${d(this.level)}`})}},Ke=class extends te{constructor(t,o,u){super(t,o,u);this.expoDivisor=400;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.maxLevel===this.level?this.checkChallenge()?0:Math.pow(100,1/10)-1:this.checkChallenge()?0:(.45*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+1/200*Math.min(10,this.level))*((Math.pow(100,1/10)-1)/.5)}updateHTML(){m("coin-bar-momentum-effect",{textContent:`Up to ${d(Math.pow(1+this.upgradeEffect(),10),2)}x Progress Speed based on fill%`}),this.level===this.maxLevel?(m("coin-bar-momentum-name",{textContent:"Bar Momentum [MAX LEVEL]"}),L("coin-bar-momentum-name",{color:"orchid"})):m("coin-bar-momentum-name",{textContent:`Bar Momentum ${d(this.level)}/${d(this.maxLevel)}`})}},Ve=class extends te{constructor(t,o,u){super(t,o,u);this.expoDivisor=100;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?0:.01:this.checkChallenge()?0:.009*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+2e-4*Math.min(5,this.level)}updateHTML(){m("coin-bar-reverberation-effect",{textContent:`+${d(100*this.upgradeEffect(),2)}% chance to have a CRITICAL TICK`}),this.level===this.maxLevel?(m("coin-bar-reverberation-name",{textContent:"Bar Reverberation [MAX LEVEL]"}),L("coin-bar-reverberation-name",{color:"orchid"})):m("coin-bar-reverberation-name",{textContent:`Bar Reverberation ${d(this.level)}/${d(this.maxLevel)}`})}},Ye=class extends te{constructor(t,o,u){super(t,o,u);this.expoDivisor=170;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?100:2e3:this.checkChallenge()?100:100+1700*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+20*Math.min(10,this.level)}updateHTML(){m("coin-bar-vibration-effect",{textContent:`CRITICAL TICKS fill up the bar ${d(this.upgradeEffect(),2)}x faster`}),this.level===this.maxLevel?(m("coin-bar-vibration-name",{textContent:"Bar Vibration [MAX LEVEL]"}),L("coin-bar-vibration-name",{color:"orchid"})):m("coin-bar-vibration-name",{textContent:`Bar Vibration ${d(this.level)}/${d(this.maxLevel)}`})}},Qe=class extends te{constructor(t,o,u){super(t,o,u);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.checkChallenge()?0:this.level/500}updateHTML(){m("coin-bar-agitation-effect",{textContent:`+${d(100*this.upgradeEffect(),2)}% Bar Fragments per CRIT.`}),m("coin-bar-agitation-name",{textContent:`Bar Agitation ${d(this.level)}`})}},qe=class extends te{constructor(t,o,u){super(t,o,u);this.maxLevel=200;this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level/100}updateHTML(){m("coin-bar-adoption-effect",{textContent:`+${d(100*this.upgradeEffect())}% Talent EXP`}),this.level===this.maxLevel?(m("coin-bar-adoption-name",{textContent:"Bar Adoption [MAX LEVEL]"}),L("coin-bar-adoption-name",{color:"orchid"})):m("coin-bar-adoption-name",{textContent:`Bar Adoption ${d(this.level)}/${d(this.maxLevel)}`})}},Je=class extends te{constructor(t,o,u){super(t,o,u);this.maxLevel=100;this.capLevel(),this.updateHTML()}upgradeEffect(){return this.checkChallenge()?0:.02*this.level/100}updateHTML(){m("coin-bar-empowerment-effect",{textContent:`+${d(100*this.upgradeEffect(),2)}% Progress Speed per bar level: (1+x)^(level)`}),this.level===this.maxLevel?(m("coin-bar-empowerment-name",{textContent:"Bar Empowerment [MAX LEVEL]"}),L("coin-bar-empowerment-name",{color:"orchid"})):m("coin-bar-empowerment-name",{textContent:`Bar Empowerment ${d(this.level)}/${d(this.maxLevel)}`})}},Ze=class extends te{constructor(t,o,u){super(t,o,u);this.maxLevel=-1;this.updateHTML()}upgradeEffect(){return this.checkChallenge()?0:this.level/1e3}updateHTML(){m("coin-bar-reinforcement-effect",{textContent:`+${d(100*this.upgradeEffect(),2)}% Bar Fragments per bar level (1 + x * level)`}),m("coin-bar-reinforcement-name",{textContent:`Bar Reinforcement ${d(this.level)}`})}},je=class extends te{constructor(t,o,u){super(t,o,u);this.expoDivisor=500;this.maxLevel=Math.ceil(this.expoDivisor*Math.log(1e3));this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?0:1:this.checkChallenge()?0:1-Math.pow(Math.E,-this.level/this.expoDivisor)}updateHTML(){m("coin-bar-resonance-effect",{textContent:`On CRIT, ${d(100*this.upgradeEffect(),2)}% chance of SUPER
                             CRIT (3x damage and earn coins)`}),this.level===this.maxLevel?(m("coin-bar-resonance-name",{textContent:"Bar Resonance [MAX LEVEL]"}),L("coin-bar-resonance-name",{color:"orchid"})):m("coin-bar-resonance-name",{textContent:`Bar Resonance ${d(this.level)}/${d(this.maxLevel)}`})}};var kr="coinUpgrades.barSpeed",Nt=(r,e)=>{var o,u;let t=(o=x(r,kr))!=null?o:x(e,kr);return new ze((u=t==null?void 0:t.level)!=null?u:0,z.barSpeed,e)};var Nr="coinUpgrades.barMomentum",$t=(r,e)=>{var o,u;let t=(o=x(r,Nr))!=null?o:x(e,Nr);return new Ke((u=t==null?void 0:t.level)!=null?u:0,z.barMomentum,e)};var $r="coinUpgrades.barReverberation",Ut=(r,e)=>{var o,u;let t=(o=x(r,$r))!=null?o:x(e,$r);return new Ve((u=t==null?void 0:t.level)!=null?u:0,z.barReverberation,e)};var Ur="coinUpgrades.barVibration",Ft=(r,e)=>{var o,u;let t=(o=x(r,Ur))!=null?o:x(e,Ur);return new Ye((u=t==null?void 0:t.level)!=null?u:0,z.barVibration,e)};var Fr="coinUpgrades.barAgitation",Ot=(r,e)=>{var o,u;let t=(o=x(r,Fr))!=null?o:x(e,Fr);return new Qe((u=t==null?void 0:t.level)!=null?u:0,z.barAgitation,e)};var Or="coinUpgrades.barAdoption",Gt=(r,e)=>{var o,u;let t=(o=x(r,Or))!=null?o:x(e,Or);return new qe((u=t==null?void 0:t.level)!=null?u:0,z.barAdoption,e)};var Gr="coinUpgrades.barEmpowerment",Xt=(r,e)=>{var o,u;let t=(o=x(r,Gr))!=null?o:x(e,Gr);return new Je((u=t==null?void 0:t.level)!=null?u:0,z.barEmpowerment,e)};var Xr="coinUpgrades.barReinforcement",Wt=(r,e)=>{var o,u;let t=(o=x(r,Xr))!=null?o:x(e,Xr);return new Ze((u=t==null?void 0:t.level)!=null?u:0,z.barReinforcement,e)};var Wr="coinUpgrades.barResonance",zt=(r,e)=>{var o,u;let t=(o=x(r,Wr))!=null?o:x(e,Wr);return new je((u=t==null?void 0:t.level)!=null?u:0,z.barResonance,e)};var zr=(r,e,t,o=1)=>Math.ceil(r*(Math.pow(t,o)-Math.pow(e,o)));var Ee=r=>new Promise(e=>setTimeout(e,r));var Kt=r=>r.barLevel>=20,He=class extends Ce{constructor(t,o,u,b,E,M){super(t,o,M);this.investedFragments=u,this.permLevel=b,this.currEXP=E,this.currTNL=this.calculateTNL()}calculateTNL(){let t=zr(this.cost,this.level,this.level+1,2),o=[50,100,200,500,1e3,2e3,5e3,1e4];for(let u of o)this.level>=u&&(t*=2);return t}setEXP(t){this.currEXP=t,this.updateHTML("GainEXP")}globalTalentEXPMultipliers(){let t=1;return t*=this.sacrificeBoost(),t*=1+this.player.coinUpgrades.barAdoption.upgradeEffect(),t}gainEXP(t){if(!Kt(this.player))return;let o=this.calculateEXPGain(t);this.currEXP+=o,this.currEXP>=this.currTNL&&this.levelUp(),this.updateHTML("GainEXP")}subEXP(t){!Kt(this.player)||(this.currEXP-=t)}levelUp(){let t=0;for(;this.currEXP>=this.currTNL&&!(t>=10);)this.level+=1,this.subEXP(this.currTNL),this.currTNL=this.calculateTNL(),t++;this.updateHTML("LevelUp")}computePermLevelGain(t){let o=0;return o+=Math.sqrt(t),o*=Math.min(4,Math.pow(this.player.refreshTime/300,2)),o=Math.min(t,o),Math.floor(o)}convertToPerm(){this.permLevel+=this.computePermLevelGain(this.level),this.level=0,this.setEXP(0),this.currTNL=this.calculateTNL(),this.updateHTML("PermLevelUp")}getBarWidth(){return Math.min(100,100*this.currEXP/this.currTNL)}sacrificeBoost(){return 1+1/100*Math.pow(Math.log2(1+this.investedFragments/4),2)}async sacrificeFragments(){if(this.player.barFragments.amount<1e3)return void W("You cannot sacrifice your bar fragments until you have at least 1,000 of them.");if(this.player.barFragments.amount<=this.investedFragments)return void W(`This bar needs more fragments than you can invest. You need ${d(this.investedFragments)}.`);await me(`You will sacrifice ${d(this.player.barFragments.amount-this.investedFragments)} Bar Fragments to increase EXP gain for this bar. Will you? (automatically performs a refresh, setting your fragments to 0)`)&&(this.investedFragments=this.player.barFragments.amount,this.player.refreshTime+=we,ge("Refresh",this.player),this.player.barFragments.set(0),this.updateHTML("Sacrifice"))}updateHTML(t){if(this.idHTML!==void 0){if(t==="Initialize"||t==="GainEXP"||t==="LevelUp"||t==="PermLevelUp"){m(`talent${this.idHTML}EXP`,{textContent:`EXP: ${d(this.currEXP)}/${d(this.currTNL)}`});let o=`${this.getBarWidth()}%`;L(`talent${this.idHTML}Progression`,{width:o})}(t==="Initialize"||t==="LevelUp"||t==="PermLevelUp")&&m(`talent${this.idHTML}TempLevel`,{textContent:`Level this run: ${d(this.level)}`}),(t==="Initialize"||t==="PermLevelUp")&&m(`talent${this.idHTML}PermLevel`,{textContent:`Banked levels: ${d(this.permLevel)}`}),(t==="Initialize"||t==="Time"||t==="LevelUp")&&m(`talent${this.idHTML}PermGain`,{textContent:`Banked on reset: +${d(this.computePermLevelGain(this.level))}`}),(t==="Initialize"||t==="LevelUp"||t==="PermLevelUp"||t==="Level20")&&m(`talent${this.idHTML}Effect`,{textContent:this.displayEffect()}),(t==="Initialize"||t==="Sacrifice")&&(m(`talent${this.idHTML}SacrificeAmount`,{textContent:d(this.investedFragments)}),m(`talent${this.idHTML}SacrificeMultiplier`,{textContent:d(this.sacrificeBoost(),3)}))}}valueOf(){return{level:this.level,cost:this.cost,investedFragments:this.investedFragments,permLevel:this.permLevel,currEXP:this.currEXP,idHTML:this.idHTML}}},Te={talentCriticalChance:10,talentProgressSpeed:10,talentCoinGain:1e3},et=class extends He{constructor(t,o,u,b,E,M){super(t,o,u,b,E,M);this.idHTML="CriticalChance";this.updateHTML("Initialize")}calculateEXPGain(t){let o=5;return o*=t*1e3/De,o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Kt(this.player)?.0025*(1-Math.pow(Math.E,-this.level/2500))+.0025*Math.min(250,this.level)/250+.0025*(1-Math.pow(Math.E,-this.permLevel/4e3))+.0025*Math.min(500,this.level)/500:0}displayEffect(){return`+${d(100*this.talentEffect(),3)}% chance of CRITICAL TICK`}},tt=class extends He{constructor(t,o,u,b,E,M){super(t,o,u,b,E,M);this.idHTML="ProgressSpeed";this.updateHTML("Initialize")}calculateEXPGain(t){let o=Math.log10(1+t);return o*=this.player.barLevel/10-1,o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return(1+this.level/25)*(1+this.permLevel/50)}displayEffect(){return`Progress Speed +${d(100*(this.talentEffect()-1),2)}%`}},rt=class extends He{constructor(t,o,u,b,E,M){super(t,o,u,b,E,M);this.idHTML="CoinGain";this.updateHTML("Initialize")}calculateEXPGain(t){let o=2+Math.floor(Math.pow(t,2)/100+4*t);return o*=this.globalTalentEXPMultipliers(),o}talentEffect(){return Math.min(.4,this.level/1e3)+Math.min(.4,this.permLevel/2e3)+.2*(this.level*25+this.permLevel)/(2500+this.level*25+this.permLevel)+1*(this.level*25+this.permLevel)/(5e4+this.level*25+this.permLevel)}displayEffect(){return`Progress bar grants +${d(100*this.talentEffect(),2)}% coins!`}};var Kr="talents.barCriticalChance",Vt=(r,e)=>{var o,u,b,E,M;let t=(o=x(r,Kr))!=null?o:x(e,Kr);return new et((u=t==null?void 0:t.level)!=null?u:0,Te.talentCriticalChance,(b=t==null?void 0:t.investedFragments)!=null?b:0,(E=t==null?void 0:t.permLevel)!=null?E:0,(M=t==null?void 0:t.currEXP)!=null?M:0,e)};var Vr="talents.barSpeed",Yt=(r,e)=>{var o,u,b,E,M;let t=(o=x(r,Vr))!=null?o:x(e,Vr);return new tt((u=t==null?void 0:t.level)!=null?u:0,Te.talentProgressSpeed,(b=t==null?void 0:t.investedFragments)!=null?b:0,(E=t==null?void 0:t.permLevel)!=null?E:0,(M=t==null?void 0:t.currEXP)!=null?M:0,e)};var Yr="talents.coinGain",Qt=(r,e)=>{var o,u,b,E,M;let t=(o=x(r,Yr))!=null?o:x(e,Yr);return new rt((u=t==null?void 0:t.level)!=null?u:0,Te.talentCoinGain,(b=t==null?void 0:t.investedFragments)!=null?b:0,(E=t==null?void 0:t.permLevel)!=null?E:0,(M=t==null?void 0:t.currEXP)!=null?M:0,e)};var Q=class{constructor(e,t,o){this.baseStats=oe({},e),this.currStats=oe({},e),this.player=o,this.attackRate=t,this.delay=this.attackRate,this.level=this.computeGeneratedLevel(),this.updateHTML("Initialize")}async generateAttacks(e){await this.checkMoveUse()&&(this.delay-=e,this.delay<0&&(this.makeMove(),this.delay=this.attackRate))}computeGeneratedLevel(){let e=1;return e+=Math.min(25,3*Math.log10(1+this.baseStats.HP)),e+=Math.min(25,3*Math.log10(1+this.baseStats.ATK)),e+=Math.min(25,3*Math.log10(1+this.baseStats.DEF)),e+=Math.min(10,this.baseStats.CRITCHANCE/10),e+=Math.min(13,4*Math.log10(this.baseStats.CRITDAMAGE/100)),e}computeArmorDamageReduction(){return this.currStats.ARMOR*(this.currStats.HP/this.baseStats.HP)}computeDefenseDamageDivisor(){let e=this.currStats.DEF;return 1+e/100}computeActualDamageReceived(e){let t=this.computeArmorDamageReduction(),o=this.computeDefenseDamageDivisor();return this.baseStats.INVINCIBLE?0:Math.max(0,e-t/o)}async takeDamage(e){if(this.currStats.HP===0)return;let t=this.computeActualDamageReceived(e);this.currStats.HP-=t,this.currStats.HP=Math.max(0,this.currStats.HP),this.updateHTML("Damage"),this.currStats.HP===0&&(Ie(this.baseStats.REWARD,this.player,this.baseStats.CRITICAL),await Ee(4e3),Se(this.player))}computeStrengthModifier(){let e=this.currStats.STR;return 1+e*(1-this.currStats.HP/this.baseStats.HP)/100}computeDamageBase(){return 1+this.currStats.ATK}computeCriticalDamage(){return this.currStats.CRITDAMAGE/100}computeBaseDamageSent(){let e=this.computeDamageBase(),t=this.computeStrengthModifier(),o=1;return Math.random()<this.currStats.CRITCHANCE&&(o=this.computeCriticalDamage()),e*t*o}computeHPBarWidth(){return 100*(this.currStats.HP/this.baseStats.HP)}computeMPBarWidth(){return 100*(this.currStats.MP/this.baseStats.MP)}makeMove(){this.enemyAI()}updateHTML(e){if((e==="Initialize"||e=="StatChange")&&(m("enemyATK",{textContent:`ATK ${this.currStats.ATK}`}),m("enemySTR",{textContent:`STR ${this.currStats.STR}`}),m("enemyDEF",{textContent:`DEF ${this.currStats.DEF}`}),m("enemyARMOR",{textContent:`ARMOR ${this.currStats.ARMOR}`}),m("enemyCritChance",{textContent:`CritChance ${this.currStats.CRITCHANCE}`}),m("enemyCritDamage",{textContent:`CritDamage ${this.currStats.CRITDAMAGE}`})),e==="Initialize"||e==="Damage"){m("enemyHPText",{textContent:`${d(this.currStats.HP,2)}/${d(this.baseStats.HP)}`});let t=this.computeHPBarWidth();L("enemyHPProgression",{width:`${t}%`})}if(e==="Initialize"||e==="Ability"){m("enemyMPText",{textContent:`${d(this.currStats.MP,2)}/${d(this.baseStats.MP)}`});let t=this.computeMPBarWidth();L("enemyMPProgression",{width:`${t}%`})}}async multiAttack(e){m("enemyMove",{textContent:`${d(e)}Hit`});for(let t=0;t<e&&(this.attack(!0),!!await this.checkMoveUse());t++)await Ee(this.attackRate/Math.min(4,1+e)*1e3)}async attack(e=!1){let t=this.computeBaseDamageSent();this.player.fighter.takeDamage(t),e||m("enemyMove",{textContent:"Attack"})}async doNothing(){m("enemyMove",{textContent:"Nothing"})}async heal(){this.currStats.HP+=this.baseStats.HP*(.5+.5*this.level/99),this.currStats.HP=Math.min(this.currStats.HP,this.baseStats.HP),m("enemyMove",{textContent:"Heal"}),this.updateHTML("Damage")}async checkMoveUse(){return this.player.fighter.currStats.HP>0&&this.currStats.HP>0}};var nt=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Aggressive";this.variantSpecificHTML("Initialize")}async enemyAI(){let t=Math.random();t<.25&&this.currStats.HP/this.baseStats.HP<.22&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):t<.33&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):t<.5&&this.currStats.MP>=2?(this.currStats.MP-=2,this.updateHTML("Ability"),await this.multiAttack(5)):await this.attack()}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Testing Dummy Lv${d(this.level)}`})}};var at=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="BOSS";this.firstAttack=!0,this.usedRage=!1,this.usedEmpowerment=!1,this.variantSpecificHTML("Initialize")}async enemyAI(){let t=Math.random();if(this.firstAttack){this.empower(),this.updateHTML("StatChange"),this.updateHTML("Ability"),m("enemyMove",{textContent:"EMPOWER"}),this.firstAttack=!1,this.usedEmpowerment=!0;return}if(!this.usedRage&&this.currStats.HP/this.baseStats.HP<.5){this.rage(),this.updateHTML("StatChange"),this.updateHTML("Ability"),m("enemyMove",{textContent:"RAGE"}),this.usedRage=!0;return}(t<.05||t<.3&&this.currStats.HP/this.baseStats.HP<.05)&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):t<.75&&this.currStats.MP>=4?(this.currStats.MP-=4,this.updateHTML("Ability"),await this.multiAttack(3)):await this.attack()}empower(){this.currStats.ATK=Math.floor(1.3*this.currStats.ATK+2),this.currStats.STR=Math.floor(1.5*this.currStats.STR+2),this.currStats.CRITCHANCE+=25,this.currStats.CRITDAMAGE=Math.floor(1.4*this.currStats.CRITDAMAGE),this.updateHTML("StatChange")}rage(){this.currStats.ATK=Math.floor(1.5*this.currStats.ATK),this.currStats.STR=Math.floor(1.8*this.currStats.STR),this.currStats.CRITCHANCE+=75,this.currStats.CRITDAMAGE=Math.floor(1.5*this.currStats.CRITDAMAGE),this.currStats.HP=this.baseStats.HP*(.75+.25*this.level/99),this.updateHTML("Ability"),this.updateHTML("Damage"),this.updateHTML("StatChange")}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${d(this.level)}`})}};var ot=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Defensive";this.variantSpecificHTML("Initialize")}async enemyAI(){let t=Math.random();(t<.1||t<.25&&this.currStats.HP/this.baseStats.HP<.25)&&this.currStats.MP>=2?(this.currStats.MP-=2,await this.heal(),this.updateHTML("Damage"),this.updateHTML("Ability")):t<.375&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):t<.625&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.defenseUp(),this.updateHTML("StatChange")):await this.attack()}async defenseUp(){this.currStats.DEF+=.01*this.currStats.DEF+1,this.currStats.DEF=Math.floor(this.currStats.DEF),m("enemyMove",{textContent:"DefenseUP"})}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${d(this.level)}`})}};var it=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Healer";this.variantSpecificHTML("Initialize")}async enemyAI(){let t=Math.random();(t<.333||t<.5&&this.currStats.HP/this.baseStats.HP<.25)&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Ability")):t<.375&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):await this.attack()}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${d(this.level)}`})}};var st=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Idle";this.variantSpecificHTML("Initialize")}async enemyAI(){await this.doNothing()}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${d(this.level)}`})}};var ct=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Null";this.variantSpecificHTML("Initialize")}async enemyAI(){await this.doNothing()}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Dummy Lv${d(this.level)}`})}};var lt=class extends Q{constructor(t,o,u){super(t,o,u);this.enemyType="Random";this.variantSpecificHTML("Initialize")}async enemyAI(){let t=Math.random();t<.125&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):t<.25&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):t<.375&&this.currStats.MP>=2?(this.currStats.MP-=2,this.updateHTML("Ability"),await this.multiAttack(3)):t<.75?await this.attack():await this.doNothing()}variantSpecificHTML(t){t==="Initialize"&&m("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${d(this.level)}`})}};var V=class{static setGlobalEnemy(e){V.testEnemy=e}static getGlobalEnemy(){return V.testEnemy}};var Ca={HP:1,MP:1,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:1,CRITDAMAGE:1,REWARD:0,CRITICAL:!1,INVINCIBLE:!0},Ea={HP:50,MP:25,ATK:2,STR:0,DEF:0,ARMOR:0,CRITCHANCE:5,CRITDAMAGE:144,REWARD:.1,CRITICAL:!0},Ta={HP:130,MP:30,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:25,CRITDAMAGE:150,REWARD:.4,CRITICAL:!0},Sa={HP:90,MP:12,ATK:1,STR:0,DEF:30,ARMOR:1,CRITCHANCE:5,CRITDAMAGE:125,REWARD:.1,CRITICAL:!0},Pa={HP:60,MP:24,ATK:1,STR:0,DEF:10,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100,REWARD:.1,CRITICAL:!0},La={HP:200,MP:0,ATK:0,STR:0,DEF:0,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100,REWARD:1,CRITICAL:!1},Ma={HP:50,MP:25,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:30,CRITDAMAGE:125,REWARD:.5,CRITICAL:!0},Se=(r,e=!1)=>{if(e)return V.setGlobalEnemy(new ct(Ca,5e3,r));let t=Math.random();t<=.05?V.setGlobalEnemy(new st(La,.666,r)):t<=.6?V.setGlobalEnemy(new nt(Ea,.5,r)):t<=.625?V.setGlobalEnemy(new ot(Sa,.66,r)):t<=.65?V.setGlobalEnemy(new it(Pa,.66,r)):t<=.7?V.setGlobalEnemy(new lt(Ma,.66,r)):V.setGlobalEnemy(new at(Ta,1,r))};var Qr={HP:150,MP:25,ATK:15,STR:0,DEF:15,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100},qr=.666,ft=class{constructor(e,t,o){this.baseStats=oe({},e),this.currStats=oe({},e),this.attackRate=t,this.delay=t,this.player=o,this.updateHTML("Initialize"),Se(this.player,!0),this.spawnInitialEnemy()}async spawnInitialEnemy(){await Ee(5e3),Se(this.player)}async decreaseDelay(e){this.delay-=e,ut&&this.delay<0&&await this.attack()}computeArmorDamageReduction(){return this.currStats.ARMOR}computeDefenseDamageDivisor(){let e=this.baseStats.DEF;return 1+e/100}computeActualDamageReceived(e){let t=this.computeArmorDamageReduction(),o=this.computeDefenseDamageDivisor();return Math.max(0,e-t/o)}async takeDamage(e){if(this.currStats.HP===0)return;let t=this.computeActualDamageReceived(e);this.currStats.HP-=t,this.currStats.HP=Math.max(0,this.currStats.HP),this.updateHTML("Damage"),this.currStats.HP===0&&(await Ee(9e3),this.currStats=oe({},this.baseStats),this.delay=this.attackRate,this.updateHTML("Initialize"),Se(this.player))}computeStrengthModifier(){let e=this.currStats.STR;return 1+e/100}computeDamageBase(){return 1+this.currStats.ATK}computeCriticalDamage(){return this.currStats.CRITDAMAGE/100}computeBaseDamageSent(){let e=this.computeDamageBase(),t=this.computeStrengthModifier(),o=1;return Math.random()<this.currStats.CRITCHANCE&&(o=this.computeCriticalDamage()),e*t*o}async attack(){let e=V.getGlobalEnemy();if(this.delay>0||this.currStats.HP===0||(e==null?void 0:e.currStats.HP)===0)return;let t=this.computeBaseDamageSent();e==null||e.takeDamage(t),this.currStats.HP+=this.baseStats.HP/60+t/40,this.currStats.HP=Math.min(this.currStats.HP,this.baseStats.HP),this.updateHTML("Damage"),this.delay=this.attackRate}async enrage(){this.delay>0||this.currStats.HP===0||this.currStats.MP<10||(this.currStats.ATK=Math.floor(1.1*this.currStats.ATK+2),this.currStats.STR=Math.floor(1.1*this.currStats.STR+2),this.currStats.CRITCHANCE+=5,this.currStats.CRITDAMAGE=Math.floor(1.2*this.currStats.CRITDAMAGE),this.currStats.MP-=10,this.updateHTML("StatChange"),this.updateHTML("Ability"),this.delay=this.attackRate)}computeHPBarWidth(){return 100*(this.currStats.HP/this.baseStats.HP)}computeMPBarWidth(){return 100*(this.currStats.MP/this.baseStats.MP)}updateHTML(e){if((e==="Initialize"||e==="StatChange")&&(m("playerATK",{textContent:`ATK ${this.currStats.ATK}`}),m("playerSTR",{textContent:`STR ${this.currStats.STR}`}),m("playerDEF",{textContent:`DEF ${this.currStats.DEF}`}),m("playerARMOR",{textContent:`ARMOR ${this.currStats.ARMOR}`}),m("playerCritChance",{textContent:`CritChance ${this.currStats.CRITCHANCE}`}),m("playerCritDamage",{textContent:`CritDamage ${this.currStats.CRITDAMAGE}`})),e==="Initialize"||e==="Damage"){m("playerHPText",{textContent:`${d(this.currStats.HP,2)}/${d(this.baseStats.HP)}`});let t=this.computeHPBarWidth();L("playerHPProgression",{width:`${t}%`})}if(e==="Initialize"||e==="Ability"){m("playerMPText",{textContent:`${d(this.currStats.MP,2)}/${d(this.baseStats.MP)}`});let t=this.computeMPBarWidth();L("playerMPProgression",{width:`${t}%`})}}valueOf(){return{baseStats:this.baseStats,attackRate:this.attackRate}}},ut=!1,Jr=()=>{ut=!ut,m("autoAttack",{textContent:`Auto Fight: ${ut}`})};var Zr="fighter",qt=(r,e)=>{var o,u,b;let t=(o=x(r,Zr))!=null?o:x(e,Zr);return new ft((u=t==null?void 0:t.baseStats)!=null?u:Qr,(b=t==null?void 0:t.attackRate)!=null?b:qr,e)};var S={firstPlayed:new Date,barEXP:0,barTNL:0,totalEXP:0,barLevel:0,highestBarLevel:0,refreshCount:0,refreshTime:0,criticalHits:0,criticalHitsThisRefresh:0,coinValueCache:0,currentChallenge:"None",completedChallenges:{basicChallenge:0,noRefresh:0,noCoinUpgrades:0,reducedFragments:0}},en=Object.assign({},S),Ra=async r=>{var o;let e=Lr(oe({},r),{coins:r.coins.valueOf(),coinUpgrades:{barSpeed:r.coinUpgrades.barSpeed.valueOf(),barMomentum:r.coinUpgrades.barMomentum.valueOf(),barReverberation:r.coinUpgrades.barReverberation.valueOf(),barVibration:r.coinUpgrades.barVibration.valueOf(),barAgitation:r.coinUpgrades.barAgitation.valueOf(),barAdoption:r.coinUpgrades.barAdoption.valueOf(),barEmpowerment:r.coinUpgrades.barEmpowerment.valueOf(),barReinforcement:r.coinUpgrades.barReinforcement.valueOf(),barResonance:r.coinUpgrades.barResonance.valueOf()},talents:{barCriticalChance:r.talents.barCriticalChance.valueOf(),barSpeed:r.talents.barSpeed.valueOf(),coinGain:r.talents.coinGain.valueOf()},barFragments:r.barFragments.valueOf(),fighter:r.fighter.valueOf()}),t=btoa(JSON.stringify(e));if(await ht.default.setItem("UPBSave",t),typeof((o=navigator.storage)==null?void 0:o.estimate)=="function"){let{usage:u,quota:b}=await navigator.storage.estimate();b&&u&&u/b*100>95&&W("You are very close to running out of space on this computer which may cause your save to getautomatically deleted soon! Clear some other site's data (and tell Khafra that this works please)!")}},jr=new Map([["coins",_t],["coinUpgrades.barSpeed",Nt],["coinUpgrades.barMomentum",$t],["coinUpgrades.barReverberation",Ut],["coinUpgrades.barVibration",Ft],["coinUpgrades.barAgitation",Ot],["coinUpgrades.barAdoption",Gt],["coinUpgrades.barEmpowerment",Xt],["coinUpgrades.barReinforcement",Wt],["coinUpgrades.barResonance",zt],["talents.barCriticalChance",Vt],["talents.barSpeed",Yt],["talents.coinGain",Qt],["barFragments",kt],["fighter",qt]]),wa=async()=>{let r=await ht.default.getItem("UPBSave"),e=r?JSON.parse(atob(r)):null;if(e!==null){let t=Object.keys(e);for(let o of t)o in en&&(jr.has(o)||Object.defineProperty(S,o,{value:e[o]}))}for(let[t,o]of jr)Rr(S,t,o(e!=null?e:S,S));Ue(S)},Be=new Set,mt=new Proxy(setInterval,{apply(r,e,t){let o=r.apply(e,t);return Be.add(o),o}}),Aa=new Proxy(clearInterval,{apply(r,e,t){let o=t[0];return Be.has(o)&&Be.delete(o),r.apply(e,t)}});window.addEventListener("pagehide",()=>{window.scrollTo(0,0)});var Jt=0,Zt=0,De=24,Ia=6e4,jt=async()=>{for(let r of Be)Aa(r);Be.clear(),await wa(),S.barTNL=Ae(S),Object.defineProperty(window,"player",{value:S}),be(he(S.barEXP,S.barTNL)),S.barFragments.updateHTML(),le("Main"),L("progression",{backgroundColor:ve(S)}),m("coinWorth",{textContent:`Worth ${d(S.coinValueCache)} coins`}),S.coinValueCache&&L("coinWorth",{color:"gold"}),Jt=performance.now(),Zt=performance.now(),mt(Ha,1e3/De),mt(Da,1e3/De),mt(Dr,1e3,S),mt(Ra,Ia,S)},tn=async()=>{if(await me("Are you SURE you want to reset the game?")===!1)return W("OK, the game hasn't been reset!");await ht.default.removeItem("UPBSave");let e=Object.keys(S);for(let t of e){if(typeof S[t]=="object"){delete S[t];continue}Object.defineProperty(S,t,{value:en[t]})}await jt()},Ha=()=>{let e=performance.now()-Jt;er(e/1e3),Jt+=e},Da=async()=>{var t;let e=performance.now()-Zt;Zt+=e,(t=V.getGlobalEnemy())==null||t.generateAttacks(e/1e3),S.fighter.decreaseDelay(e/1e3)},er=r=>{let e=r;if(e>5){let o=Bt(S),u=De*o*5,b=Math.floor(u),E=u-b,M=u*S.coinUpgrades.barResonance.upgradeEffect(),P=Math.floor(M),_=M-P;for(;e>5;){let N=Math.random(),Y=0;N<E&&(Y=1);let C=b+Y;S.criticalHitsThisRefresh+=C;let R=Math.random(),$=0;R<_&&($+=1);let U=P+$;for(;U>0;)S.coins.gain(Math.floor(S.barLevel/5)+3),U-=1;Ie(5,S),e-=5,he(S.barEXP,S.barTNL)>=100&&Ht(S),Dt(S)}}Ie(e,S),S.refreshTime+=r,m("refresh-timer",{textContent:`${d(S.refreshTime,2)}s`});let t=he(S.barEXP,S.barTNL);t<100?be(t):Ht(S),Dt(S)},we=60;var Pe=async(r,e)=>{let t=r==="Basic Challenge"?"Basic Challenge":`${r} Challenge`,o=25;switch(m("challenge-name",{textContent:t}),r){case"Basic Challenge":m("challenge-description",{textContent:`The challenge is simple: Get to level
                                    ${d(175+25*e.completedChallenges.basicChallenge)}! 
                                    Your bar fragments are reset on challenges, however.`}),m("challenge-completions",{textContent:`${t} has been completed
                                 ${e.completedChallenges.basicChallenge} / ${o} times`}),m("challenge-reward",{textContent:`First Completion: +1 Base Coin Worth to all levels above 100! \r

                    Each Completion: +1% Coins, +2% Chance for levels
                     ending in 5 to be worth more coins. \r

                    Final Completion: Another +15% Coins!`});break;case"No Refresh":m("challenge-description",{textContent:`Refreshing is so out of style! Get to level 
                                    ${d(100+15*e.completedChallenges.noRefresh)}
                                     without once refreshing!`}),m("challenge-completions",{textContent:`${t} has been completed 
                                    ${e.completedChallenges.noRefresh} / ${o} times`}),m("challenge-reward",{textContent:`First Completion: +3% Bar Fragments every 10 Bar Levels!
                            Each Completion: Reduce the threshold 
                            for 3x fragments by 1 level (from 100)
                            Final Completion: 3x Bar Fragments!`});break;case"No Coin Upgrades":m("challenge-description",{textContent:`Even in this game, deflation hurts. Get to level
                                 ${d(100+15*e.completedChallenges.noRefresh)}
                                  without the effects of coin upgrades!`}),m("challenge-completions",{textContent:`${t} has been completed 
                    ${e.completedChallenges.noRefresh} / ${o} times`}),m("challenge-reward",{textContent:"WIP REWARD! I doubt this is possible, anyway..."});break;case"Reduced Bar Fragments":m("challenge-description",{textContent:`Get to level ${d(200+40*e.completedChallenges.reducedFragments)}, 
                                but Bar Fragments are substantially reduced!.`}),m("challenge-completions",{textContent:`${t} has been completed 
                                ${e.completedChallenges.reducedFragments} / ${o}
                                 times`}),m("challenge-reward",{textContent:"WIP! I doubt this is possible, anyway..."});break;case"None":m("challenge-description",{textContent:`Exit your challenge, if you want. 
                                Otherwise resets your bar fragments, for some reason.`}),m("challenge-completions",{textContent:""}),m("challenge-reward",{textContent:""});break}};var rn=r=>{w("main-tab-nav").addEventListener("click",()=>le("Main")),w("upgrade-tab-nav").addEventListener("click",()=>le("Upgrades")),w("talent-tab-nav").addEventListener("click",()=>le("Talents")),w("dueling-tab-nav").addEventListener("click",()=>le("Dueling")),w("challenge-tab-nav").addEventListener("click",()=>le("Challenges")),w("buy-coin-bar-speed").addEventListener("click",e=>r.coinUpgrades.barSpeed.purchaseLevels(1,e)),w("buy-coin-bar-momentum").addEventListener("click",e=>r.coinUpgrades.barMomentum.purchaseLevels(1,e)),w("buy-coin-bar-reverberation").addEventListener("click",e=>r.coinUpgrades.barReverberation.purchaseLevels(1,e)),w("buy-coin-bar-vibration").addEventListener("click",e=>r.coinUpgrades.barVibration.purchaseLevels(1,e)),w("buy-coin-bar-agitation").addEventListener("click",e=>r.coinUpgrades.barAgitation.purchaseLevels(1,e)),w("buy-coin-bar-adoption").addEventListener("click",e=>r.coinUpgrades.barAdoption.purchaseLevels(1,e)),w("buy-coin-bar-empowerment").addEventListener("click",e=>r.coinUpgrades.barEmpowerment.purchaseLevels(1,e)),w("buy-coin-bar-reinforcement").addEventListener("click",e=>r.coinUpgrades.barReinforcement.purchaseLevels(1,e)),w("buy-coin-bar-resonance").addEventListener("click",e=>r.coinUpgrades.barResonance.purchaseLevels(1,e)),w("buy-reset").addEventListener("click",()=>void ge("Refresh",r)),w("reset-game").addEventListener("click",()=>void tn()),w("simulate-time").addEventListener("click",()=>void er(3600)),w("talentCriticalChanceSacrifice").addEventListener("click",()=>void r.talents.barCriticalChance.sacrificeFragments()),w("talentProgressSpeedSacrifice").addEventListener("click",()=>void r.talents.barSpeed.sacrificeFragments()),w("talentCoinGainSacrifice").addEventListener("click",()=>void r.talents.coinGain.sacrificeFragments()),w("basicAttack").addEventListener("click",()=>void r.fighter.attack()),w("autoAttack").addEventListener("click",()=>void Jr()),w("enrageSkill").addEventListener("click",()=>void r.fighter.enrage()),w("basic-challenge-icon").addEventListener("mouseover",()=>void Pe("Basic Challenge",r)),w("no-refresh-challenge-icon").addEventListener("mouseover",()=>void Pe("No Refresh",r)),w("no-coin-upgrade-challenge-icon").addEventListener("mouseover",()=>void Pe("No Coin Upgrades",r)),w("reduced-fragments-challenge-icon").addEventListener("mouseover",()=>void Pe("Reduced Bar Fragments",r)),w("none-challenge-icon").addEventListener("mouseover",()=>void Pe("None",r)),w("basic-challenge-icon").addEventListener("click",()=>void ue("Basic Challenge",r)),w("no-refresh-challenge-icon").addEventListener("click",()=>void ue("No Refresh",r)),w("no-coin-upgrade-challenge-icon").addEventListener("click",()=>void ue("No Coin Upgrades",r)),w("reduced-fragments-challenge-icon").addEventListener("click",()=>void ue("Reduced Bar Fragments",r)),w("none-challenge-icon").addEventListener("click",()=>void ue("None",r))};window.addEventListener("load",async()=>{var r,e;if(rn(S),await jt(),Oe(S),typeof((r=navigator.storage)==null?void 0:r.persist)=="function"&&typeof((e=navigator.storage)==null?void 0:e.persisted)=="function"){let t=await navigator.storage.persisted();t?console.log(`Storage is persistent! (persistent = ${t})`):await navigator.storage.persist().catch(()=>!1)&&W("Data on this page is now persistent! If you do not know what this means, you can safely ignore it.")}});document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&(S.coins.updateHTML(),S.coinUpgrades.barMomentum.updateHTML(),S.coinUpgrades.barSpeed.updateHTML(),S.coinUpgrades.barReverberation.updateHTML(),S.coinUpgrades.barVibration.updateHTML(),S.coinUpgrades.barAgitation.updateHTML(),S.barFragments.updateHTML(),S.talents.barCriticalChance.updateHTML("Initialize"),S.talents.barSpeed.updateHTML("Initialize"),m("coinWorth",{textContent:`Worth ${d(S.coinValueCache)} coins`}),S.coinValueCache>0?L("coinWorth",{color:"gold"}):L("coinWorth",{color:"grey"}))});})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
//# sourceMappingURL=out.js.map
