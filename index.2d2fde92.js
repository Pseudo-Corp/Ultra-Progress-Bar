!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};const n=e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)},r=new Set(["__proto__","prototype","constructor"]),a=new Set("0123456789");function i(e){const t=[];let n="",i="start",o=!1;for(const s of e)switch(s){case"\\":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");o&&(n+=s),i="property",o=!o;break;case".":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i){i="property";break}if(o){o=!1,n+=s;break}if(r.has(n))return[];t.push(n),n="",i="property";break;case"[":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i){i="index";break}if(o){o=!1,n+=s;break}if("property"===i){if(r.has(n))return[];t.push(n),n=""}i="index";break;case"]":if("index"===i){t.push(Number.parseInt(n,10)),n="",i="indexEnd";break}if("indexEnd"===i)throw new Error("Invalid character after an index");default:if("index"===i&&!a.has(s))throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");"start"===i&&(i="property"),o&&(o=!1,n+="\\"),n+=s}switch(o&&(n+="\\"),i){case"property":if(r.has(n))return[];t.push(n);break;case"index":throw new Error("Index was not closed");case"start":t.push("")}return t}function o(e,t){if("number"!=typeof t&&Array.isArray(e)){const n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function s(e,t){if(o(e,t))throw new Error("Cannot use string index")}function c(e,t,r){if(!n(e)||"string"!=typeof t)return void 0===r?e:r;const a=i(t);if(0===a.length)return r;for(let t=0;t<a.length;t++){const n=a[t];if(null==(e=o(e,n)?t===a.length-1?void 0:null:e[n])){if(t!==a.length-1)return r;break}}return void 0===e?r:e}function l(e,t,r){if(!n(e)||"string"!=typeof t)return e;const a=e,o=i(t);for(let t=0;t<o.length;t++){const a=o[t];s(e,a),t===o.length-1?e[a]=r:n(e[a])||(e[a]="number"==typeof o[t+1]?[]:{}),e=e[a]}return a}var u={};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/u=function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var c=void 0;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){var n=t[o][1][e];return a(n||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,n,r){(function(e){"use strict";var t,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var i=0,o=new a(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),t=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,t=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function h(e){1!==l.push(e)||r||t()}n.exports=h}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function a(){}var i={},o=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==a&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function a(t){n||(n=!0,i.resolve(e,t))}function o(){t(a,r)}var s=v(o);"error"===s.status&&r(s.value)}function v(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function p(e){return e instanceof this?e:i.resolve(new this(a),e)}function m(e){var t=new this(a);return i.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,c=-1,l=new this(a);++c<n;)u(e[c],c);return l;function u(e,a){function c(e){o[a]=e,++s!==n||r||(r=!0,i.resolve(l,o))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(l,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(a);++o<n;)c(e[o]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(a);return this.state!==c?h(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=v(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(t)}return e},i.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=p,l.reject=m,l.all=g,l.race=b},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var o=i();function s(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function h(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",p=void 0,m={},g=Object.prototype.toString,b="readonly",y="readwrite";function C(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}function M(e){return new l((function(t){var n=e.transaction(v,y),r=c([""]);n.objectStore(v).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function E(e){return"boolean"==typeof p?l.resolve(p):M(e).then((function(e){return p=e}))}function L(e){var t=m[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function T(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function w(e,t){return new l((function(n,r){if(m[e.name]=m[e.name]||_(),e.db){if(!t)return n(e.db);L(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var i=o.open.apply(o,a);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(v)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function R(e){return w(e,!1)}function x(e){return w(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,a=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function P(e){return c([C(atob(e.data))],{type:e.type})}function H(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return h(n,e,e),n}function D(e){L(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var a=n[r];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,R(e).then((function(t){return e.db=t,A(e)?x(e):t})).then((function(r){e.db=t.db=r;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=r})).catch((function(t){throw T(e,t),t}))}function N(e,t,n,r){void 0===r&&(r=1);try{var a=e.db.transaction(e.storeName,t);n(null,a)}catch(a){if(r>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),x(e)})).then((function(){return D(e).then((function(){N(e,t,n,r-1)}))})).catch(n);n(a)}}function _(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var a=m[n.name];a||(a=_(),m[n.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k);var i=[];function o(){return l.resolve()}for(var s=0;s<a.forages.length;s++){var c=a.forages[s];c!==t&&i.push(c._initReady().catch(o))}var u=a.forages.slice(0);return l.all(i).then((function(){return n.db=a.db,R(n)})).then((function(e){return n.db=e,A(n,t._defaultConfig.version)?x(n):e})).then((function(e){n.db=a.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function F(e,t){var n=this;e=d(e);var r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),H(e)&&(e=P(e)),t(e)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function $(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;H(r)&&(r=P(r));var a=e(r,n.key,s++);void 0!==a?t(a):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function O(e,t,n){var r=this;e=d(e);var a=new l((function(n,a){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(t)?E(i.db).then((function(e){return e?t:I(t)})):t})).then((function(t){N(r._dbInfo,y,(function(i,o){if(i)return a(i);try{var s=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return u(a,n),a}function U(e,t){var n=this;e=d(e);var r=new l((function(t,r){n.ready().then((function(){N(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(o.error)},i.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function j(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,y,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function G(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function X(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){N(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName),s=!1,c=o.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function z(e){var t=this,n=new l((function(e,n){t.ready().then((function(){N(t._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var t=i.result;t?(o.push(t.key),t.continue()):e(o)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function W(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;if(e.name){var i=e.name===n.name&&a._dbInfo.db?l.resolve(a._dbInfo.db):R(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;L(e);var r=m[e.name],a=r.forages;t.close();for(var i=0;i<a.length;i++){var s=a[i];s._dbInfo.db=null,s._dbInfo.version=n}return new l((function(t,r){var a=o.open(e.name,n);a.onerror=function(e){a.result.close(),r(e)},a.onupgradeneeded=function(){a.result.deleteObjectStore(e.storeName)},a.onsuccess=function(){var e=a.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<a.length;t++){var n=a[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}})):i.then((function(t){L(e);var n=m[e.name],r=n.forages;t.close();for(var a=0;a<r.length;a++)r[a]._dbInfo.db=null;return new l((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)S(r[t]._dbInfo)})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var K={_driver:"asyncStorage",_initStorage:B,_support:s(),iterate:$,getItem:F,setItem:O,removeItem:U,clear:j,length:G,key:X,keys:z,dropInstance:W};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",ae="uic8",ie="si16",oe="si32",se="ur16",ce="ui32",le="fl32",ue="fl64",he=Z+ee.length,de=Object.prototype.toString;function fe(e){var t,n,r,a,i,o=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=Y.indexOf(e[t]),r=Y.indexOf(e[t+1]),a=Y.indexOf(e[t+2]),i=Y.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|a>>2,u[c++]=(3&a)<<6|63&i;return l}function ve(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Y[n[t]>>2],r+=Y[(3&n[t])<<4|n[t+1]>>4],r+=Y[(15&n[t+1])<<2|n[t+2]>>6],r+=Y[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function pe(e,t){var n="";if(e&&(n=de.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var r,a=Q;e instanceof ArrayBuffer?(r=e,a+=ee):(r=e.buffer,"[object Int8Array]"===n?a+=ne:"[object Uint8Array]"===n?a+=re:"[object Uint8ClampedArray]"===n?a+=ae:"[object Int16Array]"===n?a+=ie:"[object Uint16Array]"===n?a+=se:"[object Int32Array]"===n?a+=oe:"[object Uint32Array]"===n?a+=ce:"[object Float32Array]"===n?a+=le:"[object Float64Array]"===n?a+=ue:t(new Error("Failed to get type for BinaryArray"))),t(a+ve(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=q+e.type+"~"+ve(this.result);t(Q+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(he),r=e.substring(Z,he);if(r===te&&J.test(n)){var a=n.match(J);t=a[1],n=n.substring(a[0].length)}var i=fe(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case ae:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case oe:return new Int32Array(i);case ce:return new Uint32Array(i);case le:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ge={serialize:pe,deserialize:me,stringToBuffer:fe,bufferToString:ve};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var a=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(a){be(a,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,a}function Ce(e,t,n,r,a,i){e.executeSql(n,r,a,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,o):be(e,t,(function(){e.executeSql(n,r,a,i)}),i)}),i):i(e,o)}),i)}function Me(e,t){var n=this;e=d(e);var r=new l((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Ce(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ee(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Ce(n,a,"SELECT * FROM "+a.storeName,[],(function(n,r){for(var i=r.rows,o=i.length,s=0;s<o;s++){var c=i.item(s),l=c.value;if(l&&(l=a.serializer.deserialize(l)),void 0!==(l=e(l,c.key,s+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Le(e,t,n,r){var a=this;e=d(e);var i=new l((function(i,o){a.ready().then((function(){void 0===t&&(t=null);var s=t,c=a._dbInfo;c.serializer.serialize(t,(function(t,l){l?o(l):c.db.transaction((function(n){Ce(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Le.apply(a,[e,s,n,r-1]));o(t)}}))}))})).catch(o)}));return u(i,n),i}function Se(e,t,n){return Le.apply(this,[e,t,n,1])}function Te(e,t){var n=this;e=d(e);var r=new l((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Ce(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function we(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Re(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function xe(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Ce(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ae(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Ce(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],a=0;a<n.rows.length;a++)r.push(n.rows.item(a).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ie(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var a=[],i=0;i<r.rows.length;i++)a.push(r.rows.item(i).name);t({db:e,storeNames:a})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Pe(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;return u(r=e.name?new l((function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ie(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function a(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],o=0,s=e.storeNames.length;o<s;o++)i.push(a(e.storeNames[o]));l.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),t),r}var He={_driver:"webSQLStorage",_initStorage:ye,_support:V(),iterate:Ee,getItem:Me,setItem:Se,removeItem:Te,clear:we,length:Re,key:xe,keys:Ae,dropInstance:Pe};function ke(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function De(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function _e(){return!Ne()||localStorage.length>0}function Be(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=De(e,t._defaultConfig),_e()?(t._dbInfo=n,n.serializer=ge,l.resolve()):l.reject()}function Fe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function $e(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Oe(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,a=r.length,i=localStorage.length,o=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(a),o++)))return l}}}));return u(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function je(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],a=0;a<n;a++){var i=localStorage.key(a);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function Ge(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Xe(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function ze(e,t,n){var r=this;e=d(e);var a=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(a,i){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(o.keyPrefix+e,t),a(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return u(a,n),a}function We(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,a=this;return u(r=e.name?new l((function(t){e.storeName?t(De(e,a._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),t),r}var Ke={_driver:"localStorageWrapper",_initStorage:Be,_support:ke(),iterate:Oe,getItem:$e,setItem:ze,removeItem:Xe,clear:Fe,length:Ge,key:Ue,keys:je,dropInstance:We},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var n=e.length,r=0;r<n;){if(Ve(e[r],t))return!0;r++}return!1},qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Qe={},Ze={INDEXEDDB:K,WEBSQL:He,LOCALSTORAGE:Ke},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function at(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(qe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ot=function(){function e(t){for(var n in a(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],i=r._driver;this[n]=i,Je[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var i=nt.concat("_initStorage"),o=0,s=i.length;o<s;o++){var c=i[o];if((!Ye(tt,c)||e[c])&&"function"!=typeof e[c])return void n(a)}var h=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var a=tt[n];e[a]||(e[a]=t(a))}};h();var d=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return h(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return h(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ge);return h(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return h(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;qe(e)||(e=[e]);var a=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function o(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var a=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(o).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=l.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(a)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),h(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];this.supports(a)&&t.push(a)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)at(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new ot;t.exports=st},{3:3}]},{},[4])(4);const h=e=>document.getElementById(e),d=(e,t)=>{if("hidden"===document.visibilityState)return!1;const n=Object.entries(t);for(const[t,r]of n)e[t]=r;return!0},f=(e,t)=>"hidden"!==document.visibilityState&&d("string"==typeof e?h(e):e,t),v=(e,t)=>"hidden"!==document.visibilityState&&d("string"==typeof e?h(e).style:e.style,t),p=(e,t)=>e.querySelector(t),m=e=>new Promise((t=>((e,t)=>{const n=h("confirmationBox"),r=h("alertWrapper"),a=p(document,"#transparentBG"),i=p(document,"#alert"),o=p(i,"#okAlert");n.style.display="block",r.style.display="block",a.style.display="block",p(i,"p").textContent=e,i.focus();const s=()=>{o.removeEventListener("click",s),i.removeEventListener("keyup",c),n.style.display="none",r.style.display="none",a.style.display="none",t(void 0)},c=e=>("Enter"===e.key||" "===e.key)&&s();o.addEventListener("click",s),i.addEventListener("keyup",c)})(e,t))),g=e=>new Promise((t=>((e,t)=>{const n=h("confirmationBox"),r=h("confirmWrapper"),a=p(document,"#confirm"),i=p(document,"#transparentBG"),o=p(a,"#okConfirm"),s=p(a,"#cancelConfirm");n.style.display="block",r.style.display="block",i.style.display="block",p(a,"p").textContent=e,a.focus();const c=({target:e})=>{const u=e;return o.removeEventListener("click",c),s.removeEventListener("click",c),a.removeEventListener("keyup",l),n.style.display="none",r.style.display="none",i.style.display="none",t(u===o)},l=e=>"Enter"===e.key||" "===e.key?c({target:o}):"Escape"===e.key?c({target:s}):e.preventDefault();o.addEventListener("click",c),s.addEventListener("click",c),a.addEventListener("keyup",l)})(e,t))),b=(e,t=0)=>{if(e<0)return"-"+b(-e,t);if(e>=1e6){const t=Math.floor(Math.log10(e));return e/=Math.pow(10,t),b(e,2)+"e"+b(t)}const n=Math.floor(e),r=e-n,a=n.toLocaleString(),i=t>0&&0!==e;let o=Math.pow(10,t)*r;Math.ceil(o)-o<1e-6&&(o=Math.ceil(o));let s=i?Math.floor(o).toString():"";if(""!==s){for(;s.length<t;)s="0"+s;s="."+s}return a+s},y=e=>{v("innerTesting",{border:"none"}),v("mainTab",{display:"none"}),v("upgradeTab",{display:"none"}),v("talentsTab",{display:"none"}),v("duelingTab",{display:"none"}),v("challengeTab",{display:"none"}),"Main"===e?v("mainTab",{display:"block"}):"Upgrades"===e?v("upgradeTab",{display:"block"}):"Talents"===e?v("talentsTab",{display:"block"}):"Dueling"===e?(v("duelingTab",{display:"block"}),v("innerTesting",{border:"2px solid grey"})):"Challenges"===e&&v("challengeTab",{display:"block"})},C=e=>{const t=[[2,"upgrade-tab-nav"],[5,"coin-momentum"],[5,"reset"],[20,"talent-tab-nav"],[30,"coin-reverberation"],[40,"coin-vibration"],[50,"dueling-tab-nav"],[75,"coin-adoption"],[0,"challenge-tab-nav"],[150,"coin-resonance"],[225,"coin-agitation"],[225,"coin-empowerment"],[250,"coin-reinforcement"]];for(const n of t){const t=e.highestBarLevel>=n[0]?"block":"none",r=document.getElementById(`${String(n[1])}`);r&&(r.style.display=t)}},M=(e,t)=>{v("progression",t?{backgroundColor:"gold"}:{backgroundColor:"turquoise"}),setTimeout((()=>{v("progression",{backgroundColor:D(e)})}),500),f("refresh-crit-counter",{textContent:b(e.criticalHitsThisRefresh)}),f("refresh-crit-fragments",{textContent:b(100*e.criticalHitsThisRefresh*e.coinUpgrades.barAgitation.upgradeEffect(),2)}),e.barFragments.updateHTML()},E=e=>{v("progression",{backgroundColor:"cyan"}),setTimeout((()=>{v("progression",{backgroundColor:D(e)})}),1e3),f("coinWorth",{textContent:`Worth ${b(e.coinValueCache)} coins`}),e.coinValueCache>0?v("coinWorth",{color:"gold"}):v("coinWorth",{color:"grey"}),f("refresh-crit-counter",{textContent:b(e.criticalHitsThisRefresh)}),f("refresh-counter",{textContent:b(e.refreshCount)})},L=e=>{for(const t in e.coinUpgrades){const n=t;e.coinUpgrades[n].updateHTML()}},S=(e,t)=>{switch(e){case"Basic Challenge":return t.barLevel>=175+25*t.completedChallenges.basicChallenge;case"No Refresh":return t.barLevel>=100+15*t.completedChallenges.noRefresh;case"No Coin Upgrades":return t.barLevel>=100+15*t.completedChallenges.noCoinUpgrades;case"Reduced Bar Fragments":return t.barLevel>=200+40*t.completedChallenges.reducedFragments;default:return!0}},T=(e,t)=>{if("No Refresh"===t.currentChallenge)return m("Hey, bub! You can't refresh, it'll be catastrophic, or something.");"Refresh"===e&&t.barLevel>=5?t.refreshTime<ot?m(`Currently, refreshes have a ${b(ot)} second cooldown. Sorry!`):(t.barFragments.set(t.barFragments.getAmountOnRefresh()),t.barEXP=0,t.barLevel=0,t.barTNL=I(t),k(H(t.barEXP,t.barTNL)),t.barFragments.updateHTML(),t.talents.barCriticalChance.convertToPerm(),t.talents.barCriticalChance.updateHTML("Initialize"),t.talents.barSpeed.convertToPerm(),t.talents.barSpeed.updateHTML("Initialize"),t.talents.coinGain.convertToPerm(),t.talents.coinGain.updateHTML("Initialize"),t.refreshCount+=1,t.refreshTime=0,t.criticalHitsThisRefresh=0,t.coinValueCache=F(t),M(t,!1),E(t)):m("You cannot refresh yet. Get to level 5 lol")},w=e=>{T("Refresh",e),e.barFragments.set(0)},R=async(e,t,n=!1)=>{const r=[["Basic Challenge","basic-challenge-icon"],["No Refresh","no-refresh-challenge-icon"],["No Coin Upgrades","no-coin-upgrade-challenge-icon"],["Reduced Bar Fragments","reduced-fragments-challenge-icon"]];if(n){t.currentChallenge="None";for(const t of r)v(t[1],{backgroundColor:e!==t[0]?"transparent":"lightgoldenrodyellow"});return void L(t)}if("None"!==t.currentChallenge&&"None"!==e)return m("You are already in a challenge!\n         Leave it using the rightmost icon if you want to start a new one.");let a;if(a="None"===t.currentChallenge?await g("Entering a challenge also resets your bar fragments. Continue?"):await g(`Would you like to exit ${t.currentChallenge}?`),!a)return m("Alright, enjoy your business.");if(t.barLevel<5&&"None"!==e)return m("I cannot do this action until you are at bar level 5.");"None"!==e&&w(t),t.currentChallenge=e,L(t);for(const t of r)v(t[1],{backgroundColor:e!==t[0]?"transparent":"lightgoldenrodyellow"})};let x=0,A=0;const I=e=>{const t=Math.pow(e.barLevel+1,2),n=Math.pow(1.5,e.barLevel+1)/10;return 5*Math.max(t,n)},P=(e,t,n=!1)=>{if(null==e)return;let r=1;r+=t.coinUpgrades.barSpeed.upgradeEffect(),r*=t.barFragments.unspentBonus(),r*=Math.pow(1+t.coinUpgrades.barMomentum.upgradeEffect(),Math.sqrt(100*Math.min(1,t.barEXP/t.barTNL))),r*=t.talents.barSpeed.talentEffect(),r*=Math.pow(1+t.coinUpgrades.barEmpowerment.upgradeEffect(),t.barLevel);if((n?-1:Math.random())<$(t)){let n=!1;r*=t.coinUpgrades.barVibration.upgradeEffect(),t.talents.barCriticalChance.gainEXP(e),t.criticalHits+=1,t.criticalHitsThisRefresh+=1;Math.random()<t.coinUpgrades.barResonance.upgradeEffect()&&(r*=3,t.coins.gain(Math.floor(t.barLevel/5)+3),n=!0),M(t,n)}const a=r*e;t.barEXP+=a,x+=a,f("perSecCurr",{textContent:`+${b(x,2)} this sec`})},H=(e,t)=>Math.min(100,.1*Math.floor(1e3*e/t)),k=e=>{v("progression",{width:`${e}%`})},D=e=>{if("None"!==e.currentChallenge)return"lightgoldenrodyellow";if(e.barLevel%5==0){if(e.barLevel>=320)return"#FF0000";return`#${(128+4*Math.floor(e.barLevel/10)).toString(16).padStart(2,"0")}0000`}if(e.barLevel>=128)return"#FFFFFF";return`#${(128+e.barLevel).toString(16).padStart(2,"0")}${(2*e.barLevel).toString(16).padStart(2,"0")}${(128+e.barLevel).toString(16).padStart(2,"0")}`},N=e=>{e.coins.gain(e.coinValueCache),e.coinValueCache=F(e),e.barEXP-=e.barTNL,e.barLevel+=1,e.barLevel>e.highestBarLevel&&(e.highestBarLevel=e.barLevel,C(e));const t=D(e);v("progression",{backgroundColor:t}),e.barTNL=I(e),e.barEXP/=10,e.barEXP=Math.min(e.barEXP,Math.floor(e.barTNL/10));const n=H(e.barEXP,e.barTNL);if(k(n),f("coinWorth",{textContent:`Worth ${b(e.coinValueCache)} coins`}),e.barFragments.updateHTML(),20===e.barLevel&&(e.talents.barCriticalChance.updateHTML("Level20"),e.talents.barSpeed.updateHTML("Level20")),"None"!==e.currentChallenge){const t=e.currentChallenge;if(S(t,e)){const n={"Basic Challenge":"basicChallenge","No Refresh":"noRefresh","No Coin Upgrades":"noCoinUpgrades","Reduced Bar Fragments":"reducedFragments",None:"reducedFragments"}[t];return e.completedChallenges[n]+=1,R("None",e,!0),m(`Congratulations! You have completed \n            ${t} #${e.completedChallenges[n]}! \n            Ant God is satisfied.`)}}},_=e=>{f("level",{textContent:`Level: ${e.barLevel}`}),f("exp",{textContent:`EXP: ${b(e.barEXP)}/${b(e.barTNL)}`})},B=e=>{A=x,x=0,f("perSecPrev",{textContent:`+${b(A,2)} prev sec`}),e.talents.barCriticalChance.updateHTML("Time"),e.talents.barSpeed.gainEXP(A),e.talents.barSpeed.updateHTML("Time"),e.talents.coinGain.updateHTML("Time")},F=e=>{let t=0;const n=1+e.barLevel;Math.random()<1/3&&n>=10&&(t+=Math.floor(n/10)+1),5===n&&(t+=3),10===n&&(t+=5),n>e.highestBarLevel&&(t+=3),n>=101&&e.completedChallenges.basicChallenge>0&&(t+=1),t*=1+e.talents.coinGain.talentEffect(),t*=1+e.completedChallenges.basicChallenge/100,t*=25===e.completedChallenges.basicChallenge?1.15:1,t>100&&(t=10*Math.pow(t,.5));const r=t-Math.floor(t);Math.random()<r&&(t+=1),t=Math.floor(t);return h("coinWorth").style.color=t>0?"gold":"grey",t},$=e=>e.coinUpgrades.barReverberation.upgradeEffect()+e.talents.barCriticalChance.talentEffect();class O{spend(e){this.amount>=e&&(this.amount-=e,this.updateHTML())}gain(e){this.amount+=e,this.updateOnGain(e),this.updateHTML()}set(e){this.amount=e,this.updateHTML()}valueOf(){return{amount:this.amount}}constructor(e=0,t){this.amount=e,this.player=t,this.amount=e,this.updateHTML()}}class U extends O{updateHTML(){const e=document.getElementsByClassName("coinCountDisplay");for(let t=0;t<e.length;t++)f(e[t],{textContent:b(this.amount)});f("gold-amount",{textContent:b(this.amount)}),f("gold-total-amount",{textContent:b(this.totalCoins)})}updateOnGain(e){e>0&&this.player.talents.coinGain.gainEXP(e),this.totalCoins+=e}valueOf(){return{amount:this.amount,totalCoins:this.totalCoins}}constructor(e,t,n){super(e,t),this.totalCoins=n,this.updateHTML()}}const j="coins";class G extends O{updateHTML(){f("fragment-amount",{textContent:b(this.amount)}),f("fragment-bonus",{textContent:b(this.amount)}),f("fragment-gain",{textContent:b(this.getAmountOnRefresh())})}getAmountOnRefresh(){const e=this.player.barLevel;let t=60*Math.pow(1.2,-5);return t*=Math.pow(1.2,e),t*=Math.pow(3,Math.floor(e/(100-this.player.completedChallenges.noRefresh))),t*=1+this.player.criticalHitsThisRefresh*this.player.coinUpgrades.barAgitation.upgradeEffect(),t*=1+this.player.coinUpgrades.barReinforcement.upgradeEffect()*this.player.barLevel,this.player.completedChallenges.noRefresh>0&&(t*=Math.pow(1.03,Math.floor(e/10))),25===this.player.completedChallenges.noRefresh&&(t*=3),"Reduced Bar Fragments"===this.player.currentChallenge&&(t=Math.pow(t,1/3)),Math.floor(t)}unspentBonus(){return 1+.01*this.amount}updateOnGain(){}}const X="barFragments";function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class W{constructor(e,t,n){this.level=e,this.cost=t,this.player=n}}class K extends W{capLevel(){-1!==this.maxLevel&&(this.level=Math.min(this.maxLevel,this.level))}purchaseLevels(e,t){t.shiftKey&&(e=-1,e=Math.floor(this.player.coins.amount/this.cost)),-1!==this.maxLevel&&(e=Math.min(e,this.maxLevel-this.level)),this.cost*e<=this.player.coins.amount&&(this.player.coins.spend(this.cost*e),this.level+=e,this.updateHTML())}valueOf(){return{level:this.level,cost:this.cost,maxLevel:this.maxLevel}}checkChallenge(){return"No Coin Upgrades"===this.player.currentChallenge}constructor(e,t,n){super(e,t,n),this.updateHTML()}}const V={barSpeed:1,barMomentum:10,barReverberation:25,barVibration:50,barAgitation:1e4,barAdoption:250,barEmpowerment:1e4,barReinforcement:2e4,barResonance:2e3};class Y extends K{upgradeEffect(){return this.checkChallenge()?0:4*this.level/100+.06*Math.min(90,this.level)}updateHTML(){f("coin-bar-speed-effect",{textContent:`+${b(this.upgradeEffect(),2)} Progress Per Second`}),f("coin-bar-speed-name",{textContent:`Bar Speed ${b(this.level)}`})}constructor(...e){super(...e),z(this,"maxLevel",-1)}}class q extends K{upgradeEffect(){return this.maxLevel===this.level?this.checkChallenge()?0:Math.pow(100,.1)-1:this.checkChallenge()?0:(.45*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+.005*Math.min(10,this.level))*((Math.pow(100,.1)-1)/.5)}updateHTML(){f("coin-bar-momentum-effect",{textContent:`Up to ${b(Math.pow(1+this.upgradeEffect(),10),2)}x Progress Speed based on fill%`}),this.level===this.maxLevel?(f("coin-bar-momentum-name",{textContent:"Bar Momentum [MAX LEVEL]"}),v("coin-bar-momentum-name",{color:"orchid"})):f("coin-bar-momentum-name",{textContent:`Bar Momentum ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"expoDivisor",400),z(this,"maxLevel",Math.ceil(this.expoDivisor*Math.log(1e3))),this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}}class J extends K{upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?0:.01:this.checkChallenge()?0:.009*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+2e-4*Math.min(5,this.level)}updateHTML(){f("coin-bar-reverberation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% chance to have a CRITICAL TICK`}),this.level===this.maxLevel?(f("coin-bar-reverberation-name",{textContent:"Bar Reverberation [MAX LEVEL]"}),v("coin-bar-reverberation-name",{color:"orchid"})):f("coin-bar-reverberation-name",{textContent:`Bar Reverberation ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"expoDivisor",100),z(this,"maxLevel",Math.ceil(this.expoDivisor*Math.log(1e3))),this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}}class Q extends K{upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?100:2e3:this.checkChallenge()?100:100+1700*(1-Math.pow(Math.E,-this.level/this.expoDivisor))+20*Math.min(10,this.level)}updateHTML(){f("coin-bar-vibration-effect",{textContent:`CRITICAL TICKS fill up the bar ${b(this.upgradeEffect(),2)}x faster`}),this.level===this.maxLevel?(f("coin-bar-vibration-name",{textContent:"Bar Vibration [MAX LEVEL]"}),v("coin-bar-vibration-name",{color:"orchid"})):f("coin-bar-vibration-name",{textContent:`Bar Vibration ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"expoDivisor",170),z(this,"maxLevel",Math.ceil(this.expoDivisor*Math.log(1e3))),this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}}class Z extends K{upgradeEffect(){return this.checkChallenge()?0:this.level/500}updateHTML(){f("coin-bar-agitation-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per CRIT.`}),f("coin-bar-agitation-name",{textContent:`Bar Agitation ${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"maxLevel",-1),this.updateHTML()}}class ee extends K{upgradeEffect(){return this.level/100}updateHTML(){f("coin-bar-adoption-effect",{textContent:`+${b(100*this.upgradeEffect())}% Talent EXP`}),this.level===this.maxLevel?(f("coin-bar-adoption-name",{textContent:"Bar Adoption [MAX LEVEL]"}),v("coin-bar-adoption-name",{color:"orchid"})):f("coin-bar-adoption-name",{textContent:`Bar Adoption ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"maxLevel",200),this.capLevel(),this.updateHTML()}}class te extends K{upgradeEffect(){return this.checkChallenge()?0:.02*this.level/100}updateHTML(){f("coin-bar-empowerment-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Progress Speed per bar level: (1+x)^(level)`}),this.level===this.maxLevel?(f("coin-bar-empowerment-name",{textContent:"Bar Empowerment [MAX LEVEL]"}),v("coin-bar-empowerment-name",{color:"orchid"})):f("coin-bar-empowerment-name",{textContent:`Bar Empowerment ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"maxLevel",100),this.capLevel(),this.updateHTML()}}class ne extends K{upgradeEffect(){return this.checkChallenge()?0:this.level/1e3}updateHTML(){f("coin-bar-reinforcement-effect",{textContent:`+${b(100*this.upgradeEffect(),2)}% Bar Fragments per bar level (1 + x * level)`}),f("coin-bar-reinforcement-name",{textContent:`Bar Reinforcement ${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"maxLevel",-1),this.updateHTML()}}class re extends K{upgradeEffect(){return this.level===this.maxLevel?this.checkChallenge()?0:1:this.checkChallenge()?0:1-Math.pow(Math.E,-this.level/this.expoDivisor)}updateHTML(){f("coin-bar-resonance-effect",{textContent:`On CRIT, ${b(100*this.upgradeEffect(),2)}% chance of SUPER\n                             CRIT (3x damage and earn coins)`}),this.level===this.maxLevel?(f("coin-bar-resonance-name",{textContent:"Bar Resonance [MAX LEVEL]"}),v("coin-bar-resonance-name",{color:"orchid"})):f("coin-bar-resonance-name",{textContent:`Bar Resonance ${b(this.level)}/${b(this.maxLevel)}`})}constructor(e,t,n){super(e,t,n),z(this,"expoDivisor",500),z(this,"maxLevel",Math.ceil(this.expoDivisor*Math.log(1e3))),this.maxLevel=100*Math.round(this.maxLevel/100),this.capLevel(),this.updateHTML()}}const ae="coinUpgrades.barSpeed",ie="coinUpgrades.barMomentum",oe="coinUpgrades.barReverberation",se="coinUpgrades.barVibration",ce="coinUpgrades.barAgitation",le="coinUpgrades.barAdoption",ue="coinUpgrades.barEmpowerment",he="coinUpgrades.barReinforcement",de="coinUpgrades.barResonance",fe=(e,t,n,r=1)=>Math.ceil(e*(Math.pow(n,r)-Math.pow(t,r))),ve=e=>new Promise((t=>setTimeout(t,e))),pe=e=>e.barLevel>=20;class me extends W{calculateTNL(){let e=fe(this.cost,this.level,this.level+1,2);const t=[50,100,200,500,1e3,2e3,5e3,1e4];for(const n of t)this.level>=n&&(e*=2);return e}setEXP(e){this.currEXP=e,this.updateHTML("GainEXP")}globalTalentEXPMultipliers(){let e=1;return e*=this.sacrificeBoost(),e*=1+this.player.coinUpgrades.barAdoption.upgradeEffect(),e}gainEXP(e){if(!pe(this.player))return;const t=this.calculateEXPGain(e);this.currEXP+=t,this.currEXP>=this.currTNL&&this.levelUp(),this.updateHTML("GainEXP")}subEXP(e){pe(this.player)&&(this.currEXP-=e)}levelUp(){let e=0;for(;this.currEXP>=this.currTNL&&!(e>=10);)this.level+=1,this.subEXP(this.currTNL),this.currTNL=this.calculateTNL(),e++;this.updateHTML("LevelUp")}computePermLevelGain(e){let t=0;return t+=Math.sqrt(e),t*=Math.min(4,Math.pow(this.player.refreshTime/300,2)),t=Math.min(e,t),Math.floor(t)}convertToPerm(){this.permLevel+=this.computePermLevelGain(this.level),this.level=0,this.setEXP(0),this.currTNL=this.calculateTNL(),this.updateHTML("PermLevelUp")}getBarWidth(){return Math.min(100,100*this.currEXP/this.currTNL)}sacrificeBoost(){return 1+.01*Math.pow(Math.log2(1+this.investedFragments/4),2)}async sacrificeFragments(){if(this.player.barFragments.amount<1e3)m("You cannot sacrifice your bar fragments until you have at least 1,000 of them.");else if(this.player.barFragments.amount<=this.investedFragments)m(`This bar needs more fragments than you can invest. You need ${b(this.investedFragments)}.`);else{await g(`You will sacrifice ${b(this.player.barFragments.amount-this.investedFragments)} Bar Fragments to increase EXP gain for this bar. Will you? (automatically performs a refresh, setting your fragments to 0)`)&&(this.investedFragments=this.player.barFragments.amount,this.player.refreshTime+=ot,T("Refresh",this.player),this.player.barFragments.set(0),this.updateHTML("Sacrifice"))}}updateHTML(e){if(void 0!==this.idHTML){if("Initialize"===e||"GainEXP"===e||"LevelUp"===e||"PermLevelUp"===e){f(`talent${this.idHTML}EXP`,{textContent:`EXP: ${b(this.currEXP)}/${b(this.currTNL)}`});const e=`${this.getBarWidth()}%`;v(`talent${this.idHTML}Progression`,{width:e})}"Initialize"!==e&&"LevelUp"!==e&&"PermLevelUp"!==e||f(`talent${this.idHTML}TempLevel`,{textContent:`Level this run: ${b(this.level)}`}),"Initialize"!==e&&"PermLevelUp"!==e||f(`talent${this.idHTML}PermLevel`,{textContent:`Banked levels: ${b(this.permLevel)}`}),"Initialize"!==e&&"Time"!==e&&"LevelUp"!==e||f(`talent${this.idHTML}PermGain`,{textContent:`Banked on reset: +${b(this.computePermLevelGain(this.level))}`}),"Initialize"!==e&&"LevelUp"!==e&&"PermLevelUp"!==e&&"Level20"!==e||f(`talent${this.idHTML}Effect`,{textContent:this.displayEffect()}),"Initialize"!==e&&"Sacrifice"!==e||(f(`talent${this.idHTML}SacrificeAmount`,{textContent:b(this.investedFragments)}),f(`talent${this.idHTML}SacrificeMultiplier`,{textContent:b(this.sacrificeBoost(),3)}))}}valueOf(){return{level:this.level,cost:this.cost,investedFragments:this.investedFragments,permLevel:this.permLevel,currEXP:this.currEXP,idHTML:this.idHTML}}constructor(e,t,n,r,a,i){super(e,t,i),this.investedFragments=n,this.permLevel=r,this.currEXP=a,this.currTNL=this.calculateTNL()}}const ge={talentCriticalChance:10,talentProgressSpeed:10,talentCoinGain:1e3};class be extends me{calculateEXPGain(e){let t=5;return t*=1e3*e/et,t*=this.player.barLevel/10-1,t*=this.globalTalentEXPMultipliers(),t}talentEffect(){return pe(this.player)?.0025*(1-Math.pow(Math.E,-this.level/2500))+.0025*Math.min(250,this.level)/250+.0025*(1-Math.pow(Math.E,-this.permLevel/4e3))+.0025*Math.min(500,this.level)/500:0}displayEffect(){return`+${b(100*this.talentEffect(),3)}% chance of CRITICAL TICK`}constructor(e,t,n,r,a,i){super(e,t,n,r,a,i),z(this,"idHTML","CriticalChance"),this.updateHTML("Initialize")}}class ye extends me{calculateEXPGain(e){let t=Math.log10(1+e);return t*=this.player.barLevel/10-1,t*=this.globalTalentEXPMultipliers(),t}talentEffect(){return(1+this.level/25)*(1+this.permLevel/50)}displayEffect(){return`Progress Speed +${b(100*(this.talentEffect()-1),2)}%`}constructor(e,t,n,r,a,i){super(e,t,n,r,a,i),z(this,"idHTML","ProgressSpeed"),this.updateHTML("Initialize")}}class Ce extends me{calculateEXPGain(e){let t=2+Math.floor(Math.pow(e,2)/100+4*e);return t*=this.globalTalentEXPMultipliers(),t}talentEffect(){return Math.min(.4,this.level/1e3)+Math.min(.4,this.permLevel/2e3)+.2*(25*this.level+this.permLevel)/(2500+25*this.level+this.permLevel)+1*(25*this.level+this.permLevel)/(5e4+25*this.level+this.permLevel)}displayEffect(){return`Progress bar grants +${b(100*this.talentEffect(),2)}% coins!`}constructor(e,t,n,r,a,i){super(e,t,n,r,a,i),z(this,"idHTML","CoinGain"),this.updateHTML("Initialize")}}const Me="talents.barCriticalChance",Ee="talents.barSpeed",Le="talents.coinGain";class Se{async generateAttacks(e){await this.checkMoveUse()&&(this.delay-=e,this.delay<0&&(this.makeMove(),this.delay=this.attackRate))}computeGeneratedLevel(){let e=1;return e+=Math.min(25,3*Math.log10(1+this.baseStats.HP)),e+=Math.min(25,3*Math.log10(1+this.baseStats.ATK)),e+=Math.min(25,3*Math.log10(1+this.baseStats.DEF)),e+=Math.min(10,this.baseStats.CRITCHANCE/10),e+=Math.min(13,4*Math.log10(this.baseStats.CRITDAMAGE/100)),e}computeArmorDamageReduction(){return this.currStats.ARMOR*(this.currStats.HP/this.baseStats.HP)}computeDefenseDamageDivisor(){return 1+this.currStats.DEF/100}computeActualDamageReceived(e){const t=this.computeArmorDamageReduction(),n=this.computeDefenseDamageDivisor();return this.baseStats.INVINCIBLE?0:Math.max(0,e-t/n)}async takeDamage(e){if(0===this.currStats.HP)return;const t=this.computeActualDamageReceived(e);this.currStats.HP-=t,this.currStats.HP=Math.max(0,this.currStats.HP),this.updateHTML("Damage"),0===this.currStats.HP&&(P(this.baseStats.REWARD,this.player,this.baseStats.CRITICAL),await ve(4e3),Oe(this.player))}computeStrengthModifier(){return 1+this.currStats.STR*(1-this.currStats.HP/this.baseStats.HP)/100}computeDamageBase(){return 1+this.currStats.ATK}computeCriticalDamage(){return this.currStats.CRITDAMAGE/100}computeBaseDamageSent(){const e=this.computeDamageBase(),t=this.computeStrengthModifier();let n=1;return Math.random()<this.currStats.CRITCHANCE&&(n=this.computeCriticalDamage()),e*t*n}computeHPBarWidth(){return this.currStats.HP/this.baseStats.HP*100}computeMPBarWidth(){return this.currStats.MP/this.baseStats.MP*100}makeMove(){this.enemyAI()}updateHTML(e){if("Initialize"!==e&&"StatChange"!=e||(f("enemyATK",{textContent:`ATK ${this.currStats.ATK}`}),f("enemySTR",{textContent:`STR ${this.currStats.STR}`}),f("enemyDEF",{textContent:`DEF ${this.currStats.DEF}`}),f("enemyARMOR",{textContent:`ARMOR ${this.currStats.ARMOR}`}),f("enemyCritChance",{textContent:`CritChance ${this.currStats.CRITCHANCE}`}),f("enemyCritDamage",{textContent:`CritDamage ${this.currStats.CRITDAMAGE}`})),"Initialize"===e||"Damage"===e){f("enemyHPText",{textContent:`${b(this.currStats.HP,2)}/${b(this.baseStats.HP)}`});const e=this.computeHPBarWidth();v("enemyHPProgression",{width:`${e}%`})}if("Initialize"===e||"Ability"===e){f("enemyMPText",{textContent:`${b(this.currStats.MP,2)}/${b(this.baseStats.MP)}`});const e=this.computeMPBarWidth();v("enemyMPProgression",{width:`${e}%`})}}async multiAttack(e){f("enemyMove",{textContent:`${b(e)}Hit`});for(let t=0;t<e&&(this.attack(!0),await this.checkMoveUse());t++)await ve(this.attackRate/Math.min(4,1+e)*1e3)}async attack(e=!1){const t=this.computeBaseDamageSent();this.player.fighter.takeDamage(t),e||f("enemyMove",{textContent:"Attack"})}async doNothing(){f("enemyMove",{textContent:"Nothing"})}async heal(){this.currStats.HP+=this.baseStats.HP*(.5+.5*this.level/99),this.currStats.HP=Math.min(this.currStats.HP,this.baseStats.HP),f("enemyMove",{textContent:"Heal"}),this.updateHTML("Damage")}async checkMoveUse(){return this.player.fighter.currStats.HP>0&&this.currStats.HP>0}constructor(e,t,n){this.baseStats={...e},this.currStats={...e},this.player=n,this.attackRate=t,this.delay=this.attackRate,this.level=this.computeGeneratedLevel(),this.updateHTML("Initialize")}}class Te extends Se{async enemyAI(){const e=Math.random();e<.25&&this.currStats.HP/this.baseStats.HP<.22&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):e<.33&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):e<.5&&this.currStats.MP>=2?(this.currStats.MP-=2,this.updateHTML("Ability"),await this.multiAttack(5)):await this.attack()}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Testing Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Aggressive"),this.variantSpecificHTML("Initialize")}}class we extends Se{async enemyAI(){const e=Math.random();return this.firstAttack?(this.empower(),this.updateHTML("StatChange"),this.updateHTML("Ability"),f("enemyMove",{textContent:"EMPOWER"}),this.firstAttack=!1,void(this.usedEmpowerment=!0)):!this.usedRage&&this.currStats.HP/this.baseStats.HP<.5?(this.rage(),this.updateHTML("StatChange"),this.updateHTML("Ability"),f("enemyMove",{textContent:"RAGE"}),void(this.usedRage=!0)):void((e<.05||e<.3&&this.currStats.HP/this.baseStats.HP<.05)&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):e<.75&&this.currStats.MP>=4?(this.currStats.MP-=4,this.updateHTML("Ability"),await this.multiAttack(3)):await this.attack())}empower(){this.currStats.ATK=Math.floor(1.3*this.currStats.ATK+2),this.currStats.STR=Math.floor(1.5*this.currStats.STR+2),this.currStats.CRITCHANCE+=25,this.currStats.CRITDAMAGE=Math.floor(1.4*this.currStats.CRITDAMAGE),this.updateHTML("StatChange")}rage(){this.currStats.ATK=Math.floor(1.5*this.currStats.ATK),this.currStats.STR=Math.floor(1.8*this.currStats.STR),this.currStats.CRITCHANCE+=75,this.currStats.CRITDAMAGE=Math.floor(1.5*this.currStats.CRITDAMAGE),this.currStats.HP=this.baseStats.HP*(.75+.25*this.level/99),this.updateHTML("Ability"),this.updateHTML("Damage"),this.updateHTML("StatChange")}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","BOSS"),this.firstAttack=!0,this.usedRage=!1,this.usedEmpowerment=!1,this.variantSpecificHTML("Initialize")}}class Re extends Se{async enemyAI(){const e=Math.random();(e<.1||e<.25&&this.currStats.HP/this.baseStats.HP<.25)&&this.currStats.MP>=2?(this.currStats.MP-=2,await this.heal(),this.updateHTML("Damage"),this.updateHTML("Ability")):e<.375&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):e<.625&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.defenseUp(),this.updateHTML("StatChange")):await this.attack()}async defenseUp(){this.currStats.DEF+=.01*this.currStats.DEF+1,this.currStats.DEF=Math.floor(this.currStats.DEF),f("enemyMove",{textContent:"DefenseUP"})}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Defensive"),this.variantSpecificHTML("Initialize")}}class xe extends Se{async enemyAI(){const e=Math.random();(e<.333||e<.5&&this.currStats.HP/this.baseStats.HP<.25)&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Ability")):e<.375&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):await this.attack()}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Healer"),this.variantSpecificHTML("Initialize")}}class Ae extends Se{async enemyAI(){await this.doNothing()}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Idle"),this.variantSpecificHTML("Initialize")}}class Ie extends Se{async enemyAI(){await this.doNothing()}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Null"),this.variantSpecificHTML("Initialize")}}class Pe extends Se{async enemyAI(){const e=Math.random();e<.125&&this.currStats.MP>=2?(await this.heal(),this.currStats.MP-=2,this.updateHTML("Damage"),this.updateHTML("Ability")):e<.25&&this.currStats.MP>=1?(this.currStats.MP-=1,this.updateHTML("Ability"),await this.multiAttack(2)):e<.375&&this.currStats.MP>=2?(this.currStats.MP-=2,this.updateHTML("Ability"),await this.multiAttack(3)):e<.75?await this.attack():await this.doNothing()}variantSpecificHTML(e){"Initialize"===e&&f("enemyName",{textContent:`${this.enemyType} Training Dummy Lv${b(this.level)}`})}constructor(e,t,n){super(e,t,n),z(this,"enemyType","Random"),this.variantSpecificHTML("Initialize")}}class He{static setGlobalEnemy(e){He.testEnemy=e}static getGlobalEnemy(){return He.testEnemy}}const ke={ENEMYTYPE:"Null",HP:1,MP:1,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:1,CRITDAMAGE:1,REWARD:0,CRITICAL:!1,INVINCIBLE:!0},De={ENEMYTYPE:"Aggressive",HP:50,MP:25,ATK:2,STR:0,DEF:0,ARMOR:0,CRITCHANCE:5,CRITDAMAGE:144,REWARD:.1,CRITICAL:!0},Ne={ENEMYTYPE:"BOSS",HP:130,MP:30,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:25,CRITDAMAGE:150,REWARD:.4,CRITICAL:!0},_e={ENEMYTYPE:"Defensive",HP:90,MP:12,ATK:1,STR:0,DEF:30,ARMOR:1,CRITCHANCE:5,CRITDAMAGE:125,REWARD:.1,CRITICAL:!0},Be={ENEMYTYPE:"Healer",HP:60,MP:24,ATK:1,STR:0,DEF:10,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100,REWARD:.1,CRITICAL:!0},Fe={ENEMYTYPE:"Idle",HP:200,MP:0,ATK:0,STR:0,DEF:0,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100,REWARD:1,CRITICAL:!1},$e={ENEMYTYPE:"Random",HP:50,MP:25,ATK:1,STR:1,DEF:1,ARMOR:1,CRITCHANCE:30,CRITDAMAGE:125,REWARD:.5,CRITICAL:!0},Oe=(e,t=!1)=>{if(t)return He.setGlobalEnemy(new Ie(ke,5e3,e));const n=Math.random();n<=.05?He.setGlobalEnemy(new Ae(Fe,.666,e)):n<=.6?He.setGlobalEnemy(new Te(De,.5,e)):n<=.625?He.setGlobalEnemy(new Re(_e,.66,e)):n<=.65?He.setGlobalEnemy(new xe(Be,.66,e)):n<=.7?He.setGlobalEnemy(new Pe($e,.66,e)):He.setGlobalEnemy(new we(Ne,1,e))},Ue={HP:150,MP:25,ATK:15,STR:0,DEF:15,ARMOR:0,CRITCHANCE:0,CRITDAMAGE:100};class je{async spawnInitialEnemy(){await ve(5e3),Oe(this.player)}async decreaseDelay(e){this.delay-=e,Ge&&this.delay<0&&await this.attack()}computeArmorDamageReduction(){return this.currStats.ARMOR}computeDefenseDamageDivisor(){return 1+this.baseStats.DEF/100}computeActualDamageReceived(e){const t=this.computeArmorDamageReduction(),n=this.computeDefenseDamageDivisor();return Math.max(0,e-t/n)}async takeDamage(e){if(0===this.currStats.HP)return;const t=this.computeActualDamageReceived(e);this.currStats.HP-=t,this.currStats.HP=Math.max(0,this.currStats.HP),this.updateHTML("Damage"),0===this.currStats.HP&&(await ve(9e3),this.currStats={...this.baseStats},this.delay=this.attackRate,this.updateHTML("Initialize"),Oe(this.player))}computeStrengthModifier(){return 1+this.currStats.STR/100}computeDamageBase(){return 1+this.currStats.ATK}computeCriticalDamage(){return this.currStats.CRITDAMAGE/100}computeBaseDamageSent(){const e=this.computeDamageBase(),t=this.computeStrengthModifier();let n=1;return Math.random()<this.currStats.CRITCHANCE&&(n=this.computeCriticalDamage()),e*t*n}async attack(){const e=He.getGlobalEnemy();if(this.delay>0||0===this.currStats.HP||0===(null==e?void 0:e.currStats.HP))return;const t=this.computeBaseDamageSent();null==e||e.takeDamage(t),this.currStats.HP+=this.baseStats.HP/60+t/40,this.currStats.HP=Math.min(this.currStats.HP,this.baseStats.HP),this.updateHTML("Damage"),this.delay=this.attackRate}async enrage(){this.delay>0||0===this.currStats.HP||this.currStats.MP<10||(this.currStats.ATK=Math.floor(1.1*this.currStats.ATK+2),this.currStats.STR=Math.floor(1.1*this.currStats.STR+2),this.currStats.CRITCHANCE+=5,this.currStats.CRITDAMAGE=Math.floor(1.2*this.currStats.CRITDAMAGE),this.currStats.MP-=10,this.updateHTML("StatChange"),this.updateHTML("Ability"),this.delay=this.attackRate)}computeHPBarWidth(){return this.currStats.HP/this.baseStats.HP*100}computeMPBarWidth(){return this.currStats.MP/this.baseStats.MP*100}updateHTML(e){if("Initialize"!==e&&"StatChange"!==e||(f("playerATK",{textContent:`ATK ${this.currStats.ATK}`}),f("playerSTR",{textContent:`STR ${this.currStats.STR}`}),f("playerDEF",{textContent:`DEF ${this.currStats.DEF}`}),f("playerARMOR",{textContent:`ARMOR ${this.currStats.ARMOR}`}),f("playerCritChance",{textContent:`CritChance ${this.currStats.CRITCHANCE}`}),f("playerCritDamage",{textContent:`CritDamage ${this.currStats.CRITDAMAGE}`})),"Initialize"===e||"Damage"===e){f("playerHPText",{textContent:`${b(this.currStats.HP,2)}/${b(this.baseStats.HP)}`});const e=this.computeHPBarWidth();v("playerHPProgression",{width:`${e}%`})}if("Initialize"===e||"Ability"===e){f("playerMPText",{textContent:`${b(this.currStats.MP,2)}/${b(this.baseStats.MP)}`});const e=this.computeMPBarWidth();v("playerMPProgression",{width:`${e}%`})}}valueOf(){return{baseStats:this.baseStats,attackRate:this.attackRate}}constructor(e,t,n){this.baseStats={...e},this.currStats={...e},this.attackRate=t,this.delay=t,this.player=n,this.updateHTML("Initialize"),Oe(this.player,!0),this.spawnInitialEnemy()}}let Ge=!1;const Xe="fighter",ze={firstPlayed:new Date,barEXP:0,barTNL:0,totalEXP:0,barLevel:0,highestBarLevel:0,refreshCount:0,refreshTime:0,criticalHits:0,criticalHitsThisRefresh:0,coinValueCache:0,currentChallenge:"None",completedChallenges:{basicChallenge:0,noRefresh:0,noCoinUpgrades:0,reducedFragments:0}},We=Object.assign({},ze),Ke=async t=>{var n;const r={...t,coins:t.coins.valueOf(),coinUpgrades:{barSpeed:t.coinUpgrades.barSpeed.valueOf(),barMomentum:t.coinUpgrades.barMomentum.valueOf(),barReverberation:t.coinUpgrades.barReverberation.valueOf(),barVibration:t.coinUpgrades.barVibration.valueOf(),barAgitation:t.coinUpgrades.barAgitation.valueOf(),barAdoption:t.coinUpgrades.barAdoption.valueOf(),barEmpowerment:t.coinUpgrades.barEmpowerment.valueOf(),barReinforcement:t.coinUpgrades.barReinforcement.valueOf(),barResonance:t.coinUpgrades.barResonance.valueOf()},talents:{barCriticalChance:t.talents.barCriticalChance.valueOf(),barSpeed:t.talents.barSpeed.valueOf(),coinGain:t.talents.coinGain.valueOf()},barFragments:t.barFragments.valueOf(),fighter:t.fighter.valueOf()},a=btoa(JSON.stringify(r));if(await e(u).setItem("UPBSave",a),"function"==typeof(null===(n=navigator.storage)||void 0===n?void 0:n.estimate)){const{usage:e,quota:t}=await navigator.storage.estimate();t&&e&&e/t*100>95&&m("You are very close to running out of space on this computer which may cause your save to getautomatically deleted soon! Clear some other site's data (and tell Khafra that this works please)!")}},Ve=new Map([["coins",(e,t)=>{var n;const r=null!==(n=c(e,j))&&void 0!==n?n:c(t,j);var a,i;return new U(null!==(a=null==r?void 0:r.amount)&&void 0!==a?a:0,t,null!==(i=null==r?void 0:r.totalCoins)&&void 0!==i?i:0)}],["coinUpgrades.barSpeed",(e,t)=>{var n;const r=null!==(n=c(e,ae))&&void 0!==n?n:c(t,ae);var a;return new Y(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barSpeed,t)}],["coinUpgrades.barMomentum",(e,t)=>{var n;const r=null!==(n=c(e,ie))&&void 0!==n?n:c(t,ie);var a;return new q(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barMomentum,t)}],["coinUpgrades.barReverberation",(e,t)=>{var n;const r=null!==(n=c(e,oe))&&void 0!==n?n:c(t,oe);var a;return new J(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barReverberation,t)}],["coinUpgrades.barVibration",(e,t)=>{var n;const r=null!==(n=c(e,se))&&void 0!==n?n:c(t,se);var a;return new Q(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barVibration,t)}],["coinUpgrades.barAgitation",(e,t)=>{var n;const r=null!==(n=c(e,ce))&&void 0!==n?n:c(t,ce);var a;return new Z(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barAgitation,t)}],["coinUpgrades.barAdoption",(e,t)=>{var n;const r=null!==(n=c(e,le))&&void 0!==n?n:c(t,le);var a;return new ee(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barAdoption,t)}],["coinUpgrades.barEmpowerment",(e,t)=>{var n;const r=null!==(n=c(e,ue))&&void 0!==n?n:c(t,ue);var a;return new te(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barEmpowerment,t)}],["coinUpgrades.barReinforcement",(e,t)=>{var n;const r=null!==(n=c(e,he))&&void 0!==n?n:c(t,he);var a;return new ne(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barReinforcement,t)}],["coinUpgrades.barResonance",(e,t)=>{var n;const r=null!==(n=c(e,de))&&void 0!==n?n:c(t,de);var a;return new re(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,V.barResonance,t)}],["talents.barCriticalChance",(e,t)=>{var n;const r=null!==(n=c(e,Me))&&void 0!==n?n:c(t,Me);var a,i,o,s;return new be(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,ge.talentCriticalChance,null!==(i=null==r?void 0:r.investedFragments)&&void 0!==i?i:0,null!==(o=null==r?void 0:r.permLevel)&&void 0!==o?o:0,null!==(s=null==r?void 0:r.currEXP)&&void 0!==s?s:0,t)}],["talents.barSpeed",(e,t)=>{var n;const r=null!==(n=c(e,Ee))&&void 0!==n?n:c(t,Ee);var a,i,o,s;return new ye(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,ge.talentProgressSpeed,null!==(i=null==r?void 0:r.investedFragments)&&void 0!==i?i:0,null!==(o=null==r?void 0:r.permLevel)&&void 0!==o?o:0,null!==(s=null==r?void 0:r.currEXP)&&void 0!==s?s:0,t)}],["talents.coinGain",(e,t)=>{var n;const r=null!==(n=c(e,Le))&&void 0!==n?n:c(t,Le);var a,i,o,s;return new Ce(null!==(a=null==r?void 0:r.level)&&void 0!==a?a:0,ge.talentCoinGain,null!==(i=null==r?void 0:r.investedFragments)&&void 0!==i?i:0,null!==(o=null==r?void 0:r.permLevel)&&void 0!==o?o:0,null!==(s=null==r?void 0:r.currEXP)&&void 0!==s?s:0,t)}],["barFragments",(e,t)=>{var n;const r=null!==(n=c(e,X))&&void 0!==n?n:c(t,X);var a;return new G(null!==(a=null==r?void 0:r.amount)&&void 0!==a?a:0,t)}],["fighter",(e,t)=>{var n;const r=null!==(n=c(e,Xe))&&void 0!==n?n:c(t,Xe);var a,i;return new je(null!==(a=null==r?void 0:r.baseStats)&&void 0!==a?a:Ue,null!==(i=null==r?void 0:r.attackRate)&&void 0!==i?i:.666,t)}]]),Ye=new Set,qe=new Proxy(setInterval,{apply(e,t,n){const r=e.apply(t,n);return Ye.add(r),r}}),Je=new Proxy(clearInterval,{apply(e,t,n){const r=n[0];return Ye.has(r)&&Ye.delete(r),e.apply(t,n)}});window.addEventListener("pagehide",(()=>{window.scrollTo(0,0)}));let Qe=0,Ze=0;const et=24,tt=async()=>{for(const e of Ye)Je(e);Ye.clear(),await(async()=>{const t=await e(u).getItem("UPBSave"),n=t?JSON.parse(atob(t)):null;if(null!==n){const e=Object.keys(n);for(const t of e)t in We&&(Ve.has(t)||Object.defineProperty(ze,t,{value:n[t]}))}for(const[e,t]of Ve)l(ze,e,t(null!=n?n:ze,ze));C(ze)})(),ze.barTNL=I(ze),Object.defineProperty(window,"player",{value:ze}),k(H(ze.barEXP,ze.barTNL)),ze.barFragments.updateHTML(),y("Main"),v("progression",{backgroundColor:D(ze)}),f("coinWorth",{textContent:`Worth ${b(ze.coinValueCache)} coins`}),ze.coinValueCache&&v("coinWorth",{color:"gold"}),Qe=performance.now(),Ze=performance.now(),qe(rt,1e3/et),qe(at,1e3/et),qe(B,1e3,ze),qe(Ke,6e4,ze)},nt=async()=>{if(!1===await g("Are you SURE you want to reset the game?"))return m("OK, the game hasn't been reset!");await e(u).removeItem("UPBSave");const t=Object.keys(ze);for(const e of t)"object"!=typeof ze[e]?Object.defineProperty(ze,e,{value:We[e]}):delete ze[e];await tt()},rt=()=>{const e=performance.now()-Qe;it(e/1e3),Qe+=e},at=async()=>{var e;const t=performance.now()-Ze;Ze+=t,null===(e=He.getGlobalEnemy())||void 0===e||e.generateAttacks(t/1e3),ze.fighter.decreaseDelay(t/1e3)},it=e=>{let t=e;if(t>5){const e=$(ze),n=et*e*5,r=Math.floor(n),a=n-r,i=n*ze.coinUpgrades.barResonance.upgradeEffect(),o=Math.floor(i),s=i-o;for(;t>5;){let e=0;Math.random()<a&&(e=1);const n=r+e;ze.criticalHitsThisRefresh+=n;let i=0;Math.random()<s&&(i+=1);let c=o+i;for(;c>0;)ze.coins.gain(Math.floor(ze.barLevel/5)+3),c-=1;P(5,ze),t-=5;H(ze.barEXP,ze.barTNL)>=100&&N(ze),_(ze)}}P(t,ze),ze.refreshTime+=e,f("refresh-timer",{textContent:`${b(ze.refreshTime,2)}s`});const n=H(ze.barEXP,ze.barTNL);n<100?k(n):N(ze),_(ze)},ot=180,st=async(e,t)=>{const n="Basic Challenge"===e?"Basic Challenge":`${e} Challenge`;switch(f("challenge-name",{textContent:n}),e){case"Basic Challenge":f("challenge-description",{textContent:`The challenge is simple: Get to level\n                                    ${b(175+25*t.completedChallenges.basicChallenge)}! \n                                    Your bar fragments are reset on challenges, however.`}),f("challenge-completions",{textContent:`${n} has been completed\n                                 ${t.completedChallenges.basicChallenge} / 25 times`}),f("challenge-reward",{textContent:"First Completion: +1 Base Coin Worth to all levels above 100! \r\n\n                    Each Completion: +1% Coins, +2% Chance for levels\n                     ending in 5 to be worth more coins. \r\n\n                    Final Completion: Another +15% Coins!"});break;case"No Refresh":f("challenge-description",{textContent:`Refreshing is so out of style! Get to level \n                                    ${b(100+15*t.completedChallenges.noRefresh)}\n                                     without once refreshing!`}),f("challenge-completions",{textContent:`${n} has been completed \n                                    ${t.completedChallenges.noRefresh} / 25 times`}),f("challenge-reward",{textContent:"First Completion: +3% Bar Fragments every 10 Bar Levels!\n                            Each Completion: Reduce the threshold \n                            for 3x fragments by 1 level (from 100)\n                            Final Completion: 3x Bar Fragments!"});break;case"No Coin Upgrades":f("challenge-description",{textContent:`Even in this game, deflation hurts. Get to level\n                                 ${b(100+15*t.completedChallenges.noRefresh)}\n                                  without the effects of coin upgrades!`}),f("challenge-completions",{textContent:`${n} has been completed \n                    ${t.completedChallenges.noRefresh} / 25 times`}),f("challenge-reward",{textContent:"WIP REWARD! I doubt this is possible, anyway..."});break;case"Reduced Bar Fragments":f("challenge-description",{textContent:`Get to level ${b(200+40*t.completedChallenges.reducedFragments)}, \n                                but Bar Fragments are substantially reduced!.`}),f("challenge-completions",{textContent:`${n} has been completed \n                                ${t.completedChallenges.reducedFragments} / 25\n                                 times`}),f("challenge-reward",{textContent:"WIP! I doubt this is possible, anyway..."});break;case"None":f("challenge-description",{textContent:"Exit your challenge, if you want. \n                                Otherwise resets your bar fragments, for some reason."}),f("challenge-completions",{textContent:""}),f("challenge-reward",{textContent:""})}},ct=e=>{h("main-tab-nav").addEventListener("click",(()=>y("Main"))),h("upgrade-tab-nav").addEventListener("click",(()=>y("Upgrades"))),h("talent-tab-nav").addEventListener("click",(()=>y("Talents"))),h("dueling-tab-nav").addEventListener("click",(()=>y("Dueling"))),h("challenge-tab-nav").addEventListener("click",(()=>y("Challenges"))),h("buy-coin-bar-speed").addEventListener("click",(t=>e.coinUpgrades.barSpeed.purchaseLevels(1,t))),h("buy-coin-bar-momentum").addEventListener("click",(t=>e.coinUpgrades.barMomentum.purchaseLevels(1,t))),h("buy-coin-bar-reverberation").addEventListener("click",(t=>e.coinUpgrades.barReverberation.purchaseLevels(1,t))),h("buy-coin-bar-vibration").addEventListener("click",(t=>e.coinUpgrades.barVibration.purchaseLevels(1,t))),h("buy-coin-bar-agitation").addEventListener("click",(t=>e.coinUpgrades.barAgitation.purchaseLevels(1,t))),h("buy-coin-bar-adoption").addEventListener("click",(t=>e.coinUpgrades.barAdoption.purchaseLevels(1,t))),h("buy-coin-bar-empowerment").addEventListener("click",(t=>e.coinUpgrades.barEmpowerment.purchaseLevels(1,t))),h("buy-coin-bar-reinforcement").addEventListener("click",(t=>e.coinUpgrades.barReinforcement.purchaseLevels(1,t))),h("buy-coin-bar-resonance").addEventListener("click",(t=>e.coinUpgrades.barResonance.purchaseLevels(1,t))),h("buy-reset").addEventListener("click",(()=>{T("Refresh",e)})),h("reset-game").addEventListener("click",(()=>{nt()})),h("simulate-time").addEventListener("click",(()=>{it(3600)})),h("talentCriticalChanceSacrifice").addEventListener("click",(()=>{e.talents.barCriticalChance.sacrificeFragments()})),h("talentProgressSpeedSacrifice").addEventListener("click",(()=>{e.talents.barSpeed.sacrificeFragments()})),h("talentCoinGainSacrifice").addEventListener("click",(()=>{e.talents.coinGain.sacrificeFragments()})),h("basicAttack").addEventListener("click",(()=>{e.fighter.attack()})),h("autoAttack").addEventListener("click",(()=>(Ge=!Ge,void f("autoAttack",{textContent:`Auto Fight: ${Ge}`})))),h("enrageSkill").addEventListener("click",(()=>{e.fighter.enrage()})),h("basic-challenge-icon").addEventListener("mouseover",(()=>{st("Basic Challenge",e)})),h("no-refresh-challenge-icon").addEventListener("mouseover",(()=>{st("No Refresh",e)})),h("no-coin-upgrade-challenge-icon").addEventListener("mouseover",(()=>{st("No Coin Upgrades",e)})),h("reduced-fragments-challenge-icon").addEventListener("mouseover",(()=>{st("Reduced Bar Fragments",e)})),h("none-challenge-icon").addEventListener("mouseover",(()=>{st("None",e)})),h("basic-challenge-icon").addEventListener("click",(()=>{R("Basic Challenge",e)})),h("no-refresh-challenge-icon").addEventListener("click",(()=>{R("No Refresh",e)})),h("no-coin-upgrade-challenge-icon").addEventListener("click",(()=>{R("No Coin Upgrades",e)})),h("reduced-fragments-challenge-icon").addEventListener("click",(()=>{R("Reduced Bar Fragments",e)})),h("none-challenge-icon").addEventListener("click",(()=>{R("None",e)}))};window.addEventListener("load",(async()=>{var e,t;if(ct(ze),await tt(),E(ze),"function"==typeof(null===(e=navigator.storage)||void 0===e?void 0:e.persist)&&"function"==typeof(null===(t=navigator.storage)||void 0===t?void 0:t.persisted)){const e=await navigator.storage.persisted();if(e)console.log(`Storage is persistent! (persistent = ${e})`);else{await navigator.storage.persist().catch((()=>!1))&&m("Data on this page is now persistent! If you do not know what this means, you can safely ignore it.")}}})),document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&(ze.coins.updateHTML(),ze.coinUpgrades.barMomentum.updateHTML(),ze.coinUpgrades.barSpeed.updateHTML(),ze.coinUpgrades.barReverberation.updateHTML(),ze.coinUpgrades.barVibration.updateHTML(),ze.coinUpgrades.barAgitation.updateHTML(),ze.barFragments.updateHTML(),ze.talents.barCriticalChance.updateHTML("Initialize"),ze.talents.barSpeed.updateHTML("Initialize"),f("coinWorth",{textContent:`Worth ${b(ze.coinValueCache)} coins`}),ze.coinValueCache>0?v("coinWorth",{color:"gold"}):v("coinWorth",{color:"grey"}))}))}();
//# sourceMappingURL=index.2d2fde92.js.map
